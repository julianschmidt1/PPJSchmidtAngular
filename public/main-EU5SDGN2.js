var mO=Object.defineProperty,gO=Object.defineProperties;var yO=Object.getOwnPropertyDescriptors;var XC=Object.getOwnPropertySymbols,vO=Object.getPrototypeOf,_O=Object.prototype.hasOwnProperty,wO=Object.prototype.propertyIsEnumerable,IO=Reflect.get;var ZC=(t,e,n)=>e in t?mO(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e)=>{for(var n in e||={})_O.call(e,n)&&ZC(t,n,e[n]);if(XC)for(var n of XC(e))wO.call(e,n)&&ZC(t,n,e[n]);return t},Ee=(t,e)=>gO(t,yO(e));var Ur=(t,e,n)=>IO(vO(t),n,e);var I=(t,e,n)=>new Promise((r,i)=>{var s=u=>{try{a(n.next(u))}catch(l){i(l)}},o=u=>{try{a(n.throw(u))}catch(l){i(l)}},a=u=>u.done?r(u.value):Promise.resolve(u.value).then(s,o);a((n=n.apply(t,e)).next())});var eT=null;var sm=1,tT=Symbol("SIGNAL");function Ce(t){let e=eT;return eT=t,e}var nT={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function EO(t){if(!(cm(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===sm)){if(!t.producerMustRecompute(t)&&!om(t)){t.dirty=!1,t.lastCleanEpoch=sm;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=sm}}function rT(t){return t&&(t.nextProducerIndex=0),Ce(t)}function iT(t,e){if(Ce(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(cm(t))for(let n=t.nextProducerIndex;n<t.producerNode.length;n++)am(t.producerNode[n],t.producerIndexOfThis[n]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function om(t){fl(t);for(let e=0;e<t.producerNode.length;e++){let n=t.producerNode[e],r=t.producerLastReadVersion[e];if(r!==n.version||(EO(n),r!==n.version))return!0}return!1}function sT(t){if(fl(t),cm(t))for(let e=0;e<t.producerNode.length;e++)am(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function am(t,e){if(CO(t),fl(t),t.liveConsumerNode.length===1)for(let r=0;r<t.producerNode.length;r++)am(t.producerNode[r],t.producerIndexOfThis[r]);let n=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[n],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[n],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let r=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];fl(i),i.producerIndexOfThis[r]=e}}function cm(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function fl(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function CO(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function TO(){throw new Error}var DO=TO;function oT(t){DO=t}function re(t){return typeof t=="function"}function ks(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var pl=ks(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function Ai(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ze=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let s of n)s.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(re(r))try{r()}catch(s){e=s instanceof pl?s.errors:[s]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let s of i)try{aT(s)}catch(o){e=e??[],o instanceof pl?e=[...e,...o.errors]:e.push(o)}}if(e)throw new pl(e)}}add(e){var n;if(e&&e!==this)if(this.closed)aT(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Ai(n,e)}remove(e){let{_finalizers:n}=this;n&&Ai(n,e),e instanceof t&&e._removeParent(this)}};ze.EMPTY=(()=>{let t=new ze;return t.closed=!0,t})();var um=ze.EMPTY;function ml(t){return t instanceof ze||t&&"closed"in t&&re(t.remove)&&re(t.add)&&re(t.unsubscribe)}function aT(t){re(t)?t():t.unsubscribe()}var gn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Fs={setTimeout(t,e,...n){let{delegate:r}=Fs;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=Fs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function gl(t){Fs.setTimeout(()=>{let{onUnhandledError:e}=gn;if(e)e(t);else throw t})}function Ka(){}var cT=lm("C",void 0,void 0);function uT(t){return lm("E",void 0,t)}function lT(t){return lm("N",t,void 0)}function lm(t,e,n){return{kind:t,value:e,error:n}}var Ri=null;function Ls(t){if(gn.useDeprecatedSynchronousErrorHandling){let e=!Ri;if(e&&(Ri={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Ri;if(Ri=null,n)throw r}}else t()}function dT(t){gn.useDeprecatedSynchronousErrorHandling&&Ri&&(Ri.errorThrown=!0,Ri.error=t)}var Ni=class extends ze{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ml(e)&&e.add(this)):this.destination=AO}static create(e,n,r){return new Vs(e,n,r)}next(e){this.isStopped?hm(lT(e),this):this._next(e)}error(e){this.isStopped?hm(uT(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?hm(cT,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},bO=Function.prototype.bind;function dm(t,e){return bO.call(t,e)}var fm=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){yl(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){yl(r)}else yl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){yl(n)}}},Vs=class extends Ni{constructor(e,n,r){super();let i;if(re(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let s;this&&gn.useDeprecatedNextContext?(s=Object.create(e),s.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&dm(e.next,s),error:e.error&&dm(e.error,s),complete:e.complete&&dm(e.complete,s)}):i=e}this.destination=new fm(i)}};function yl(t){gn.useDeprecatedSynchronousErrorHandling?dT(t):gl(t)}function SO(t){throw t}function hm(t,e){let{onStoppedNotification:n}=gn;n&&Fs.setTimeout(()=>n(t,e))}var AO={closed:!0,next:Ka,error:SO,complete:Ka};var Us=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Gt(t){return t}function vl(...t){return pm(t)}function pm(t){return t.length===0?Gt:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var ae=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let s=NO(n)?n:new Vs(n,r,i);return Ls(()=>{let{operator:o,source:a}=this;s.add(o?o.call(s,a):a?this._subscribe(s):this._trySubscribe(s))}),s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=hT(r),new r((i,s)=>{let o=new Vs({next:a=>{try{n(a)}catch(u){s(u),o.unsubscribe()}},error:s,complete:i});this.subscribe(o)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[Us](){return this}pipe(...n){return pm(n)(this)}toPromise(n){return n=hT(n),new n((r,i)=>{let s;this.subscribe(o=>s=o,o=>i(o),()=>r(s))})}}return t.create=e=>new t(e),t})();function hT(t){var e;return(e=t??gn.Promise)!==null&&e!==void 0?e:Promise}function RO(t){return t&&re(t.next)&&re(t.error)&&re(t.complete)}function NO(t){return t&&t instanceof Ni||RO(t)&&ml(t)}function mm(t){return re(t?.lift)}function ge(t){return e=>{if(mm(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function he(t,e,n,r,i){return new gm(t,e,n,r,i)}var gm=class extends Ni{constructor(e,n,r,i,s,o){super(e),this.onFinalize=s,this.shouldUnsubscribe=o,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=i?function(a){try{i(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function js(){return ge((t,e)=>{let n=null;t._refCount++;let r=he(e,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount){n=null;return}let i=t._connection,s=n;n=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});t.subscribe(r),r.closed||(n=t.connect())})}var Bs=class extends ae{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,mm(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ze;let n=this.getSubject();e.add(this.source.subscribe(he(n,void 0,()=>{this._teardown(),n.complete()},r=>{this._teardown(),n.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ze.EMPTY)}return e}refCount(){return js()(this)}};var fT=ks(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var It=(()=>{class t extends ae{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new _l(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new fT}next(n){Ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){Ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Ls(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:s}=this;return r||i?um:(this.currentObservers=null,s.push(n),new ze(()=>{this.currentObservers=null,Ai(s,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:s}=this;r?n.error(i):s&&n.complete()}asObservable(){let n=new ae;return n.source=this,n}}return t.create=(e,n)=>new _l(e,n),t})(),_l=class extends It{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:um}};var ht=class extends It{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var ym={now(){return(ym.delegate||Date).now()},delegate:void 0};var wl=class extends ze{constructor(e,n){super()}schedule(e,n=0){return this}};var Qa={setInterval(t,e,...n){let{delegate:r}=Qa;return r?.setInterval?r.setInterval(t,e,...n):setInterval(t,e,...n)},clearInterval(t){let{delegate:e}=Qa;return(e?.clearInterval||clearInterval)(t)},delegate:void 0};var $s=class extends wl{constructor(e,n){super(e,n),this.scheduler=e,this.work=n,this.pending=!1}schedule(e,n=0){var r;if(this.closed)return this;this.state=e;let i=this.id,s=this.scheduler;return i!=null&&(this.id=this.recycleAsyncId(s,i,n)),this.pending=!0,this.delay=n,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(s,this.id,n),this}requestAsyncId(e,n,r=0){return Qa.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,n,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return n;n!=null&&Qa.clearInterval(n)}execute(e,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,n);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,n){let r=!1,i;try{this.work(e)}catch(s){r=!0,i=s||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),i}unsubscribe(){if(!this.closed){let{id:e,scheduler:n}=this,{actions:r}=n;this.work=this.state=this.scheduler=null,this.pending=!1,Ai(r,this),e!=null&&(this.id=this.recycleAsyncId(n,e,null)),this.delay=null,super.unsubscribe()}}};var qs=class t{constructor(e,n=t.now){this.schedulerActionCtor=e,this.now=n}schedule(e,n=0,r){return new this.schedulerActionCtor(this,e).schedule(r,n)}};qs.now=ym.now;var Hs=class extends qs{constructor(e,n=qs.now){super(e,n),this.actions=[],this._active=!1}flush(e){let{actions:n}=this;if(this._active){n.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=n.shift());if(this._active=!1,r){for(;e=n.shift();)e.unsubscribe();throw r}}};var vm=new Hs($s);var Il=class extends $s{constructor(e,n){super(e,n),this.scheduler=e,this.work=n}schedule(e,n=0){return n>0?super.schedule(e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)}execute(e,n){return n>0||this.closed?super.execute(e,n):this._execute(e,n)}requestAsyncId(e,n,r=0){return r!=null&&r>0||r==null&&this.delay>0?super.requestAsyncId(e,n,r):(e.flush(this),0)}};var El=class extends Hs{};var _m=new El(Il);var zt=new ae(t=>t.complete());function pT(t){return t&&re(t.schedule)}function mT(t){return t[t.length-1]}function Cl(t){return re(mT(t))?t.pop():void 0}function jr(t){return pT(mT(t))?t.pop():void 0}function wm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function yT(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(h){try{l(r.next(h))}catch(p){o(p)}}function u(h){try{l(r.throw(h))}catch(p){o(p)}}function l(h){h.done?s(h.value):i(h.value).then(a,u)}l((r=r.apply(t,e||[])).next())})}function gT(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mi(t){return this instanceof Mi?(this.v=t,this):new Mi(t)}function vT(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i={},o("next"),o("throw"),o("return"),i[Symbol.asyncIterator]=function(){return this},i;function o(m){r[m]&&(i[m]=function(v){return new Promise(function(b,N){s.push([m,v,b,N])>1||a(m,v)})})}function a(m,v){try{u(r[m](v))}catch(b){p(s[0][3],b)}}function u(m){m.value instanceof Mi?Promise.resolve(m.value.v).then(l,h):p(s[0][2],m)}function l(m){a("next",m)}function h(m){a("throw",m)}function p(m,v){m(v),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _T(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gT=="function"?gT(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(a,u){o=t[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var Tl=t=>t&&typeof t.length=="number"&&typeof t!="function";function Dl(t){return re(t?.then)}function bl(t){return re(t[Us])}function Sl(t){return Symbol.asyncIterator&&re(t?.[Symbol.asyncIterator])}function Al(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function MO(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rl=MO();function Nl(t){return re(t?.[Rl])}function Ml(t){return vT(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Mi(n.read());if(i)return yield Mi(void 0);yield yield Mi(r)}}finally{n.releaseLock()}})}function xl(t){return re(t?.getReader)}function Qe(t){if(t instanceof ae)return t;if(t!=null){if(bl(t))return xO(t);if(Tl(t))return PO(t);if(Dl(t))return OO(t);if(Sl(t))return wT(t);if(Nl(t))return kO(t);if(xl(t))return FO(t)}throw Al(t)}function xO(t){return new ae(e=>{let n=t[Us]();if(re(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function PO(t){return new ae(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function OO(t){return new ae(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,gl)})}function kO(t){return new ae(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function wT(t){return new ae(e=>{LO(t,e).catch(n=>e.error(n))})}function FO(t){return wT(Ml(t))}function LO(t,e){var n,r,i,s;return yT(this,void 0,void 0,function*(){try{for(n=_T(t);r=yield n.next(),!r.done;){let o=r.value;if(e.next(o),e.closed)return}}catch(o){i={error:o}}finally{try{r&&!r.done&&(s=n.return)&&(yield s.call(n))}finally{if(i)throw i.error}}e.complete()})}function Vt(t,e,n,r=0,i=!1){let s=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(s),!i)return s}function Br(t,e=0){return ge((n,r)=>{n.subscribe(he(r,i=>Vt(r,t,()=>r.next(i),e),()=>Vt(r,t,()=>r.complete(),e),i=>Vt(r,t,()=>r.error(i),e)))})}function $r(t,e=0){return ge((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function IT(t,e){return Qe(t).pipe($r(e),Br(e))}function ET(t,e){return Qe(t).pipe($r(e),Br(e))}function CT(t,e){return new ae(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function TT(t,e){return new ae(n=>{let r;return Vt(n,e,()=>{r=t[Rl](),Vt(n,e,()=>{let i,s;try{({value:i,done:s}=r.next())}catch(o){n.error(o);return}s?n.complete():n.next(i)},0,!0)}),()=>re(r?.return)&&r.return()})}function Pl(t,e){if(!t)throw new Error("Iterable cannot be null");return new ae(n=>{Vt(n,e,()=>{let r=t[Symbol.asyncIterator]();Vt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function DT(t,e){return Pl(Ml(t),e)}function bT(t,e){if(t!=null){if(bl(t))return IT(t,e);if(Tl(t))return CT(t,e);if(Dl(t))return ET(t,e);if(Sl(t))return Pl(t,e);if(Nl(t))return TT(t,e);if(xl(t))return DT(t,e)}throw Al(t)}function Pe(t,e){return e?bT(t,e):Qe(t)}function Y(...t){let e=jr(t);return Pe(t,e)}function Gs(t,e){let n=re(t)?t:()=>t,r=i=>i.error(n());return new ae(e?i=>e.schedule(r,0,i):r)}function Im(t){return!!t&&(t instanceof ae||re(t.lift)&&re(t.subscribe))}var lr=ks(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function te(t,e){return ge((n,r)=>{let i=0;n.subscribe(he(r,s=>{r.next(t.call(e,s,i++))}))})}var{isArray:VO}=Array;function UO(t,e){return VO(e)?t(...e):t(e)}function Ol(t){return te(e=>UO(t,e))}var{isArray:jO}=Array,{getPrototypeOf:BO,prototype:$O,keys:qO}=Object;function kl(t){if(t.length===1){let e=t[0];if(jO(e))return{args:e,keys:null};if(HO(e)){let n=qO(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function HO(t){return t&&typeof t=="object"&&BO(t)===$O}function Fl(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ya(...t){let e=jr(t),n=Cl(t),{args:r,keys:i}=kl(t);if(r.length===0)return Pe([],e);let s=new ae(GO(r,e,i?o=>Fl(i,o):Gt));return n?s.pipe(Ol(n)):s}function GO(t,e,n=Gt){return r=>{ST(e,()=>{let{length:i}=t,s=new Array(i),o=i,a=i;for(let u=0;u<i;u++)ST(e,()=>{let l=Pe(t[u],e),h=!1;l.subscribe(he(r,p=>{s[u]=p,h||(h=!0,a--),a||r.next(n(s.slice()))},()=>{--o||r.complete()}))},r)},r)}}function ST(t,e,n){t?Vt(n,t,e):e()}function AT(t,e,n,r,i,s,o,a){let u=[],l=0,h=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},v=N=>l<r?b(N):u.push(N),b=N=>{s&&e.next(N),l++;let R=!1;Qe(n(N,h++)).subscribe(he(e,P=>{i?.(P),s?v(P):e.next(P)},()=>{R=!0},void 0,()=>{if(R)try{for(l--;u.length&&l<r;){let P=u.shift();o?Vt(e,o,()=>b(P)):b(P)}m()}catch(P){e.error(P)}}))};return t.subscribe(he(e,v,()=>{p=!0,m()})),()=>{a?.()}}function Ye(t,e,n=1/0){return re(e)?Ye((r,i)=>te((s,o)=>e(r,s,i,o))(Qe(t(r,i))),n):(typeof e=="number"&&(n=e),ge((r,i)=>AT(r,i,t,n)))}function zs(t=1/0){return Ye(Gt,t)}function RT(){return zs(1)}function Ws(...t){return RT()(Pe(t,jr(t)))}function Ll(t){return new ae(e=>{Qe(t()).subscribe(e)})}function Em(...t){let e=Cl(t),{args:n,keys:r}=kl(t),i=new ae(s=>{let{length:o}=n;if(!o){s.complete();return}let a=new Array(o),u=o,l=o;for(let h=0;h<o;h++){let p=!1;Qe(n[h]).subscribe(he(s,m=>{p||(p=!0,l--),a[h]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||s.next(r?Fl(r,a):a),s.complete())}))}});return e?i.pipe(Ol(e)):i}function Pt(t,e){return ge((n,r)=>{let i=0;n.subscribe(he(r,s=>t.call(e,s,i++)&&r.next(s)))})}function qr(t){return ge((e,n)=>{let r=null,i=!1,s;r=e.subscribe(he(n,void 0,void 0,o=>{s=Qe(t(o,qr(t)(e))),r?(r.unsubscribe(),r=null,s.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(n))})}function NT(t,e,n,r,i){return(s,o)=>{let a=n,u=e,l=0;s.subscribe(he(o,h=>{let p=l++;u=a?t(u,h,p):(a=!0,h),r&&o.next(u)},i&&(()=>{a&&o.next(u),o.complete()})))}}function dr(t,e){return re(e)?Ye(t,e,1):Ye(t,1)}function Hr(t){return ge((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function hr(t){return t<=0?()=>zt:ge((e,n)=>{let r=0;e.subscribe(he(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function Cm(t){return te(()=>t)}function Vl(t=zO){return ge((e,n)=>{let r=!1;e.subscribe(he(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function zO(){return new lr}function xi(t){return ge((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function Mn(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Pt((i,s)=>t(i,s,r)):Gt,hr(1),n?Hr(e):Vl(()=>new lr))}function Ks(t){return t<=0?()=>zt:ge((e,n)=>{let r=[];e.subscribe(he(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Tm(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Pt((i,s)=>t(i,s,r)):Gt,Ks(1),n?Hr(e):Vl(()=>new lr))}function Ul(t,e){return ge(NT(t,e,arguments.length>=2,!0))}function jl(...t){let e=jr(t);return ge((n,r)=>{(e?Ws(t,n,e):Ws(t,n)).subscribe(r)})}function Ut(t,e){return ge((n,r)=>{let i=null,s=0,o=!1,a=()=>o&&!i&&r.complete();n.subscribe(he(r,u=>{i?.unsubscribe();let l=0,h=s++;Qe(t(u,h)).subscribe(i=he(r,p=>r.next(e?e(u,p,h,l++):p),()=>{i=null,a()}))},()=>{o=!0,a()}))})}function Dm(t){return ge((e,n)=>{Qe(t).subscribe(he(n,()=>n.complete(),Ka)),!n.closed&&e.subscribe(n)})}function Je(t,e,n){let r=re(t)||e||n?{next:t,error:e,complete:n}:t;return r?ge((i,s)=>{var o;(o=r.subscribe)===null||o===void 0||o.call(r);let a=!0;i.subscribe(he(s,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),s.next(u)},()=>{var u;a=!1,(u=r.complete)===null||u===void 0||u.call(r),s.complete()},u=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,u),s.error(u)},()=>{var u,l;a&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):Gt}var mD="https://g.co/ng/security#xss",G=class extends Error{constructor(e,n){super(yd(e,n)),this.code=e}};function yd(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function cc(t){return{toString:t}.toString()}var Bl="__parameters__";function WO(t){return function(...n){if(t){let r=t(...n);for(let i in r)this[i]=r[i]}}}function gD(t,e,n){return cc(()=>{let r=WO(e);function i(...s){if(this instanceof i)return r.apply(this,s),this;let o=new i(...s);return a.annotation=o,a;function a(u,l,h){let p=u.hasOwnProperty(Bl)?u[Bl]:Object.defineProperty(u,Bl,{value:[]})[Bl];for(;p.length<=h;)p.push(null);return(p[h]=p[h]||[]).push(o),u}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var Pi=globalThis;function Ne(t){for(let e in t)if(t[e]===Ne)return e;throw Error("Could not find renamed property on target object.")}function KO(t,e){for(let n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function kt(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(kt).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let n=e.indexOf(`
`);return n===-1?e:e.substring(0,n)}function MT(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var QO=Ne({__forward_ref__:Ne});function Jr(t){return t.__forward_ref__=Jr,t.toString=function(){return kt(this())},t}function Ot(t){return yD(t)?t():t}function yD(t){return typeof t=="function"&&t.hasOwnProperty(QO)&&t.__forward_ref__===Jr}function $(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Un(t){return{providers:t.providers||[],imports:t.imports||[]}}function vd(t){return xT(t,_D)||xT(t,wD)}function vD(t){return vd(t)!==null}function xT(t,e){return t.hasOwnProperty(e)?t[e]:null}function YO(t){let e=t&&(t[_D]||t[wD]);return e||null}function PT(t){return t&&(t.hasOwnProperty(OT)||t.hasOwnProperty(JO))?t[OT]:null}var _D=Ne({\u0275prov:Ne}),OT=Ne({\u0275inj:Ne}),wD=Ne({ngInjectableDef:Ne}),JO=Ne({ngInjectorDef:Ne}),B=class{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=$({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function ID(t){return t&&!!t.\u0275providers}var XO=Ne({\u0275cmp:Ne}),ZO=Ne({\u0275dir:Ne}),ek=Ne({\u0275pipe:Ne}),tk=Ne({\u0275mod:Ne}),Yl=Ne({\u0275fac:Ne}),Ja=Ne({__NG_ELEMENT_ID__:Ne}),kT=Ne({__NG_ENV_ID__:Ne});function _d(t){return typeof t=="string"?t:t==null?"":String(t)}function nk(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():_d(t)}function rk(t,e){let n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new G(-200,t)}function Sg(t,e){throw new G(-201,!1)}var ce=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(ce||{}),Bm;function ED(){return Bm}function nn(t){let e=Bm;return Bm=t,e}function CD(t,e,n){let r=vd(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&ce.Optional)return null;if(e!==void 0)return e;Sg(t,"Injector")}var ik={},Xa=ik,$m="__NG_DI_FLAG__",Jl="ngTempTokenPath",sk="ngTokenPath",ok=/\n/gm,ak="\u0275",FT="__source",Zs;function ck(){return Zs}function Gr(t){let e=Zs;return Zs=t,e}function uk(t,e=ce.Default){if(Zs===void 0)throw new G(-203,!1);return Zs===null?CD(t,void 0,e):Zs.get(t,e&ce.Optional?null:void 0,e)}function K(t,e=ce.Default){return(ED()||uk)(Ot(t),e)}function M(t,e=ce.Default){return K(t,wd(e))}function wd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qm(t){let e=[];for(let n=0;n<t.length;n++){let r=Ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new G(900,!1);let i,s=ce.Default;for(let o=0;o<r.length;o++){let a=r[o],u=lk(a);typeof u=="number"?u===-1?i=a.token:s|=u:i=a}e.push(K(i,s))}else e.push(K(r))}return e}function TD(t,e){return t[$m]=e,t.prototype[$m]=e,t}function lk(t){return t[$m]}function dk(t,e,n,r){let i=t[Jl];throw e[FT]&&i.unshift(e[FT]),t.message=hk(`
`+t.message,i,n,r),t[sk]=i,t[Jl]=null,t}function hk(t,e,n,r=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==ak?t.slice(2):t;let i=kt(e);if(Array.isArray(e))i=e.map(kt).join(" -> ");else if(typeof e=="object"){let s=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];s.push(o+":"+(typeof a=="string"?JSON.stringify(a):kt(a)))}i=`{${s.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(ok,`
  `)}`}var We=TD(gD("Optional"),8);var Ag=TD(gD("SkipSelf"),4);function to(t,e){let n=t.hasOwnProperty(Yl);return n?t[Yl]:null}function Rg(t,e){t.forEach(n=>Array.isArray(n)?Rg(n,e):e(n))}function DD(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Xl(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function fk(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let s=i-2;t[i]=t[s],i--}t[e]=n,t[e+1]=r}}function pk(t,e,n){let r=uc(t,e);return r>=0?t[r|1]=n:(r=~r,fk(t,r,e,n)),r}function bm(t,e){let n=uc(t,e);if(n>=0)return t[n|1]}function uc(t,e){return mk(t,e,1)}function mk(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let s=r+(i-r>>1),o=t[s<<n];if(e===o)return s<<n;o>e?i=s:r=s+1}return~(i<<n)}var no={},rn=[],ro=new B(""),bD=new B("",-1),SD=new B(""),Zl=class{get(e,n=Xa){if(n===Xa){let r=new Error(`NullInjectorError: No provider for ${kt(e)}!`);throw r.name="NullInjectorError",r}return n}},AD=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(AD||{}),On=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(On||{}),Et=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(Et||{});function gk(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let s=e.length;if(i+s===r||t.charCodeAt(i+s)<=32)return i}n=i+1}}function Hm(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let s=n[r++],o=n[r++],a=n[r++];t.setAttribute(e,o,a,s)}else{let s=i,o=n[++r];yk(s)?t.setProperty(e,s,o):t.setAttribute(e,s,o),r++}}return r}function RD(t){return t===3||t===4||t===6}function yk(t){return t.charCodeAt(0)===64}function Za(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?LT(t,n,i,null,e[++r]):LT(t,n,i,null,null))}}return t}function LT(t,e,n,r,i){let s=0,o=t.length;if(e===-1)o=-1;else for(;s<t.length;){let a=t[s++];if(typeof a=="number"){if(a===e){o=-1;break}else if(a>e){o=s-1;break}}}for(;s<t.length;){let a=t[s];if(typeof a=="number")break;if(a===n){if(r===null){i!==null&&(t[s+1]=i);return}else if(r===t[s+1]){t[s+2]=i;return}}s++,r!==null&&s++,i!==null&&s++}o!==-1&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),r!==null&&t.splice(s++,0,r),i!==null&&t.splice(s++,0,i)}var ND="ng-template";function vk(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&gk(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(Ng(t))return!1;if(i=e.indexOf(1,i),i>-1){let s;for(;++i<e.length&&typeof(s=e[i])=="string";)if(s.toLowerCase()===n)return!0}return!1}function Ng(t){return t.type===4&&t.value!==ND}function _k(t,e,n){let r=t.type===4&&!n?ND:t.value;return e===r}function wk(t,e,n){let r=4,i=t.attrs,s=i!==null?Ck(i):0,o=!1;for(let a=0;a<e.length;a++){let u=e[a];if(typeof u=="number"){if(!o&&!yn(r)&&!yn(u))return!1;if(o&&yn(u))continue;o=!1,r=u|r&1;continue}if(!o)if(r&4){if(r=2|r&1,u!==""&&!_k(t,u,n)||u===""&&e.length===1){if(yn(r))return!1;o=!0}}else if(r&8){if(i===null||!vk(t,i,u,n)){if(yn(r))return!1;o=!0}}else{let l=e[++a],h=Ik(u,i,Ng(t),n);if(h===-1){if(yn(r))return!1;o=!0;continue}if(l!==""){let p;if(h>s?p="":p=i[h+1].toLowerCase(),r&2&&l!==p){if(yn(r))return!1;o=!0}}}}return yn(r)||o}function yn(t){return(t&1)===0}function Ik(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let s=!1;for(;i<e.length;){let o=e[i];if(o===t)return i;if(o===3||o===6)s=!0;else if(o===1||o===2){let a=e[++i];for(;typeof a=="string";)a=e[++i];continue}else{if(o===4)break;if(o===0){i+=4;continue}}i+=s?1:2}return-1}else return Tk(e,t)}function Ek(t,e,n=!1){for(let r=0;r<e.length;r++)if(wk(t,e[r],n))return!0;return!1}function Ck(t){for(let e=0;e<t.length;e++){let n=t[e];if(RD(n))return e}return t.length}function Tk(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function VT(t,e){return t?":not("+e.trim()+")":e}function Dk(t){let e=t[0],n=1,r=2,i="",s=!1;for(;n<t.length;){let o=t[n];if(typeof o=="string")if(r&2){let a=t[++n];i+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else r&8?i+="."+o:r&4&&(i+=" "+o);else i!==""&&!yn(o)&&(e+=VT(s,i),i=""),r=o,s=s||!yn(r);n++}return i!==""&&(e+=VT(s,i)),e}function bk(t){return t.map(Dk).join(",")}function Sk(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let s=t[r];if(typeof s=="string")i===2?s!==""&&e.push(s,t[++r]):i===8&&n.push(s);else{if(!yn(i))break;i=s}r++}return{attrs:e,classes:n}}function Ze(t){return cc(()=>{let e=kD(t),n=Ee(L({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===AD.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||On.Emulated,styles:t.styles||rn,_:null,schemas:t.schemas||null,tView:null,id:""});FD(n);let r=t.dependencies;return n.directiveDefs=jT(r,!1),n.pipeDefs=jT(r,!0),n.id=Nk(n),n})}function Ak(t){return Wr(t)||MD(t)}function Rk(t){return t!==null}function jn(t){return cc(()=>({type:t.type,bootstrap:t.bootstrap||rn,declarations:t.declarations||rn,imports:t.imports||rn,exports:t.exports||rn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function UT(t,e){if(t==null)return no;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],s,o,a=Et.None;Array.isArray(i)?(a=i[0],s=i[1],o=i[2]??s):(s=i,o=i),e?(n[s]=a!==Et.None?[r,a]:r,e[s]=o):n[s]=r}return n}function ft(t){return cc(()=>{let e=kD(t);return FD(e),e})}function Wr(t){return t[XO]||null}function MD(t){return t[ZO]||null}function xD(t){return t[ek]||null}function PD(t){let e=Wr(t)||MD(t)||xD(t);return e!==null?e.standalone:!1}function OD(t,e){let n=t[tk]||null;if(!n&&e===!0)throw new Error(`Type ${kt(t)} does not have '\u0275mod' property.`);return n}function kD(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||no,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||rn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:UT(t.inputs,e),outputs:UT(t.outputs),debugInfo:null}}function FD(t){t.features?.forEach(e=>e(t))}function jT(t,e){if(!t)return null;let n=e?xD:Ak;return()=>(typeof t=="function"?t():t).map(r=>n(r)).filter(Rk)}function Nk(t){let e=0,n=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of n)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function jt(t){return{\u0275providers:t}}function Mk(...t){return{\u0275providers:LD(!0,t),\u0275fromNgModule:!0}}function LD(t,...e){let n=[],r=new Set,i,s=o=>{n.push(o)};return Rg(e,o=>{let a=o;Gm(a,s,[],r)&&(i||=[],i.push(a))}),i!==void 0&&VD(i,s),n}function VD(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];Mg(i,s=>{e(s,r)})}}function Gm(t,e,n,r){if(t=Ot(t),!t)return!1;let i=null,s=PT(t),o=!s&&Wr(t);if(!s&&!o){let u=t.ngModule;if(s=PT(u),s)i=u;else return!1}else{if(o&&!o.standalone)return!1;i=t}let a=r.has(i);if(o){if(a)return!1;if(r.add(i),o.dependencies){let u=typeof o.dependencies=="function"?o.dependencies():o.dependencies;for(let l of u)Gm(l,e,n,r)}}else if(s){if(s.imports!=null&&!a){r.add(i);let l;try{Rg(s.imports,h=>{Gm(h,e,n,r)&&(l||=[],l.push(h))})}finally{}l!==void 0&&VD(l,e)}if(!a){let l=to(i)||(()=>new i);e({provide:i,useFactory:l,deps:rn},i),e({provide:SD,useValue:i,multi:!0},i),e({provide:ro,useValue:()=>K(i),multi:!0},i)}let u=s.providers;if(u!=null&&!a){let l=t;Mg(u,h=>{e(h,l)})}}else return!1;return i!==t&&t.providers!==void 0}function Mg(t,e){for(let n of t)ID(n)&&(n=n.\u0275providers),Array.isArray(n)?Mg(n,e):e(n)}var xk=Ne({provide:String,useValue:Ne});function UD(t){return t!==null&&typeof t=="object"&&xk in t}function Pk(t){return!!(t&&t.useExisting)}function Ok(t){return!!(t&&t.useFactory)}function io(t){return typeof t=="function"}function kk(t){return!!t.useClass}var Id=new B(""),Gl={},Fk={},Sm;function xg(){return Sm===void 0&&(Sm=new Zl),Sm}var Ct=class{},ec=class extends Ct{get destroyed(){return this._destroyed}constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Wm(e,o=>this.processProvider(o)),this.records.set(bD,Qs(void 0,this)),i.has("environment")&&this.records.set(Ct,Qs(void 0,this));let s=this.records.get(Id);s!=null&&typeof s.value=="string"&&this.scopes.add(s.value),this.injectorDefTypes=new Set(this.get(SD,rn,ce.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ce(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ce(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let n=Gr(this),r=nn(void 0),i;try{return e()}finally{Gr(n),nn(r)}}get(e,n=Xa,r=ce.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(kT))return e[kT](this);r=wd(r);let i,s=Gr(this),o=nn(void 0);try{if(!(r&ce.SkipSelf)){let u=this.records.get(e);if(u===void 0){let l=Bk(e)&&vd(e);l&&this.injectableDefInScope(l)?u=Qs(zm(e),Gl):u=null,this.records.set(e,u)}if(u!=null)return this.hydrate(e,u)}let a=r&ce.Self?xg():this.parent;return n=r&ce.Optional&&n===Xa?null:n,a.get(e,n)}catch(a){if(a.name==="NullInjectorError"){if((a[Jl]=a[Jl]||[]).unshift(kt(e)),s)throw a;return dk(a,e,"R3InjectorError",this.source)}else throw a}finally{nn(o),Gr(s)}}resolveInjectorInitializers(){let e=Ce(null),n=Gr(this),r=nn(void 0),i;try{let s=this.get(ro,rn,ce.Self);for(let o of s)o()}finally{Gr(n),nn(r),Ce(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(kt(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new G(205,!1)}processProvider(e){e=Ot(e);let n=io(e)?e:Ot(e&&e.provide),r=Vk(e);if(!io(e)&&e.multi===!0){let i=this.records.get(n);i||(i=Qs(void 0,Gl,!0),i.factory=()=>qm(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n){let r=Ce(null);try{return n.value===Gl&&(n.value=Fk,n.value=n.factory()),typeof n.value=="object"&&n.value&&jk(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Ce(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function zm(t){let e=vd(t),n=e!==null?e.factory:to(t);if(n!==null)return n;if(t instanceof B)throw new G(204,!1);if(t instanceof Function)return Lk(t);throw new G(204,!1)}function Lk(t){if(t.length>0)throw new G(204,!1);let n=YO(t);return n!==null?()=>n.factory(t):()=>new t}function Vk(t){if(UD(t))return Qs(void 0,t.useValue);{let e=jD(t);return Qs(e,Gl)}}function jD(t,e,n){let r;if(io(t)){let i=Ot(t);return to(i)||zm(i)}else if(UD(t))r=()=>Ot(t.useValue);else if(Ok(t))r=()=>t.useFactory(...qm(t.deps||[]));else if(Pk(t))r=()=>K(Ot(t.useExisting));else{let i=Ot(t&&(t.useClass||t.provide));if(Uk(t))r=()=>new i(...qm(t.deps));else return to(i)||zm(i)}return r}function Qs(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Uk(t){return!!t.deps}function jk(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function Bk(t){return typeof t=="function"||typeof t=="object"&&t instanceof B}function Wm(t,e){for(let n of t)Array.isArray(n)?Wm(n,e):n&&ID(n)?Wm(n.\u0275providers,e):e(n)}function In(t,e){t instanceof ec&&t.assertNotDestroyed();let n,r=Gr(t),i=nn(void 0);try{return e()}finally{Gr(r),nn(i)}}function BD(){return ED()!==void 0||ck()!=null}function $k(t){if(!BD())throw new G(-203,!1)}function qk(t){return typeof t=="function"}var mr=0,pe=1,ee=2,Tt=3,vn=4,En=5,ed=6,tc=7,_n=8,so=9,wn=10,st=11,nc=12,BT=13,ho=14,kn=15,Ed=16,Ys=17,oo=18,Cd=19,$D=20,zr=21,Am=22,Fi=23,Fn=25,qD=1;var Li=7,td=8,nd=9,sn=10,Pg=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Pg||{});function Oi(t){return Array.isArray(t)&&typeof t[qD]=="object"}function gr(t){return Array.isArray(t)&&t[qD]===!0}function Og(t){return(t.flags&4)!==0}function Td(t){return t.componentOffset>-1}function Dd(t){return(t.flags&1)===1}function Kr(t){return!!t.template}function Hk(t){return(t[ee]&512)!==0}var Km=class{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}};function HD(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}function Xr(){return GD}function GD(t){return t.type.prototype.ngOnChanges&&(t.setInput=zk),Gk}Xr.ngInherit=!0;function Gk(){let t=WD(this),e=t?.current;if(e){let n=t.previous;if(n===no)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function zk(t,e,n,r,i){let s=this.declaredInputs[r],o=WD(t)||Wk(t,{previous:no,current:null}),a=o.current||(o.current={}),u=o.previous,l=u[s];a[s]=new Km(l&&l.currentValue,n,u===no),HD(t,e,i,n)}var zD="__ngSimpleChanges__";function WD(t){return t[zD]||null}function Wk(t,e){return t[zD]=e}var $T=null;var xn=function(t,e,n){$T?.(t,e,n)},Kk="svg",Qk="math",Yk=!1;function Jk(){return Yk}function Ln(t){for(;Array.isArray(t);)t=t[mr];return t}function KD(t,e){return Ln(e[t])}function on(t,e){return Ln(e[t.index])}function QD(t,e){return t.data[e]}function Xk(t,e){return t[e]}function Zr(t,e){let n=e[t];return Oi(n)?n:n[mr]}function kg(t){return(t[ee]&128)===128}function Zk(t){return gr(t[Tt])}function ao(t,e){return e==null?null:t[e]}function YD(t){t[Ys]=0}function e1(t){t[ee]&1024||(t[ee]|=1024,kg(t)&&rc(t))}function t1(t,e){for(;t>0;)e=e[ho],t--;return e}function Fg(t){return!!(t[ee]&9216||t[Fi]?.dirty)}function Qm(t){t[wn].changeDetectionScheduler?.notify(1),Fg(t)?rc(t):t[ee]&64&&(Jk()?(t[ee]|=1024,rc(t)):t[wn].changeDetectionScheduler?.notify())}function rc(t){t[wn].changeDetectionScheduler?.notify();let e=ic(t);for(;e!==null&&!(e[ee]&8192||(e[ee]|=8192,!kg(e)));)e=ic(e)}function JD(t,e){if((t[ee]&256)===256)throw new G(911,!1);t[zr]===null&&(t[zr]=[]),t[zr].push(e)}function n1(t,e){if(t[zr]===null)return;let n=t[zr].indexOf(e);n!==-1&&t[zr].splice(n,1)}function ic(t){let e=t[Tt];return gr(e)?e[Tt]:e}var de={lFrame:ib(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function r1(){return de.lFrame.elementDepthCount}function i1(){de.lFrame.elementDepthCount++}function s1(){de.lFrame.elementDepthCount--}function XD(){return de.bindingsEnabled}function o1(){return de.skipHydrationRootTNode!==null}function a1(t){return de.skipHydrationRootTNode===t}function c1(){de.skipHydrationRootTNode=null}function Le(){return de.lFrame.lView}function Wt(){return de.lFrame.tView}function bd(t){return de.lFrame.contextLView=t,t[_n]}function Sd(t){return de.lFrame.contextLView=null,t}function Bt(){let t=ZD();for(;t!==null&&t.type===64;)t=t.parent;return t}function ZD(){return de.lFrame.currentTNode}function u1(){let t=de.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function $i(t,e){let n=de.lFrame;n.currentTNode=t,n.isParent=e}function Lg(){return de.lFrame.isParent}function eb(){de.lFrame.isParent=!1}function l1(){return de.lFrame.contextLView}function d1(t){return de.lFrame.bindingIndex=t}function Vg(){return de.lFrame.bindingIndex++}function h1(t){let e=de.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function f1(){return de.lFrame.inI18n}function p1(t,e){let n=de.lFrame;n.bindingIndex=n.bindingRootIndex=t,Ym(e)}function m1(){return de.lFrame.currentDirectiveIndex}function Ym(t){de.lFrame.currentDirectiveIndex=t}function g1(t){let e=de.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function tb(t){de.lFrame.currentQueryIndex=t}function y1(t){let e=t[pe];return e.type===2?e.declTNode:e.type===1?t[En]:null}function nb(t,e,n){if(n&ce.SkipSelf){let i=e,s=t;for(;i=i.parent,i===null&&!(n&ce.Host);)if(i=y1(s),i===null||(s=s[ho],i.type&10))break;if(i===null)return!1;e=i,t=s}let r=de.lFrame=rb();return r.currentTNode=e,r.lView=t,!0}function Ug(t){let e=rb(),n=t[pe];de.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function rb(){let t=de.lFrame,e=t===null?null:t.child;return e===null?ib(t):e}function ib(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function sb(){let t=de.lFrame;return de.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var ob=sb;function jg(){let t=sb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function v1(t){return(de.lFrame.contextLView=t1(t,de.lFrame.contextLView))[_n]}function fo(){return de.lFrame.selectedIndex}function Vi(t){de.lFrame.selectedIndex=t}function ab(){let t=de.lFrame;return QD(t.tView,t.selectedIndex)}function _1(){return de.lFrame.currentNamespace}var cb=!0;function Ad(){return cb}function Rd(t){cb=t}function w1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=e.type.prototype;if(r){let o=GD(e);(n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o)}i&&(n.preOrderHooks??=[]).push(0-t,i),s&&((n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s))}function Nd(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let s=t.data[n].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:h}=s;o&&(t.contentHooks??=[]).push(-n,o),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),h!=null&&(t.destroyHooks??=[]).push(n,h)}}function zl(t,e,n){ub(t,e,3,n)}function Wl(t,e,n,r){(t[ee]&3)===n&&ub(t,e,n,r)}function Rm(t,e){let n=t[ee];(n&3)===e&&(n&=16383,n+=1,t[ee]=n)}function ub(t,e,n,r){let i=r!==void 0?t[Ys]&65535:0,s=r??-1,o=e.length-1,a=0;for(let u=i;u<o;u++)if(typeof e[u+1]=="number"){if(a=e[u],r!=null&&a>=r)break}else e[u]<0&&(t[Ys]+=65536),(a<s||s==-1)&&(I1(t,n,e,u),t[Ys]=(t[Ys]&4294901760)+u+2),u++}function qT(t,e){xn(4,t,e);let n=Ce(null);try{e.call(t)}finally{Ce(n),xn(5,t,e)}}function I1(t,e,n,r){let i=n[r]<0,s=n[r+1],o=i?-n[r]:n[r],a=t[o];i?t[ee]>>14<t[Ys]>>16&&(t[ee]&3)===e&&(t[ee]+=16384,qT(a,s)):qT(a,s)}var eo=-1,Ui=class{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}};function E1(t){return t instanceof Ui}function C1(t){return(t.flags&8)!==0}function T1(t){return(t.flags&16)!==0}function lb(t){return t!==eo}function rd(t){return t&32767}function D1(t){return t>>16}function id(t,e){let n=D1(t),r=e;for(;n>0;)r=r[ho],n--;return r}var Jm=!0;function HT(t){let e=Jm;return Jm=t,e}var b1=256,db=b1-1,hb=5,S1=0,Pn={};function A1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(Ja)&&(r=n[Ja]),r==null&&(r=n[Ja]=S1++);let i=r&db,s=1<<i;e.data[t+(i>>hb)]|=s}function sd(t,e){let n=fb(t,e);if(n!==-1)return n;let r=e[pe];r.firstCreatePass&&(t.injectorIndex=e.length,Nm(r.data,t),Nm(e,null),Nm(r.blueprint,null));let i=Bg(t,e),s=t.injectorIndex;if(lb(i)){let o=rd(i),a=id(i,e),u=a[pe].data;for(let l=0;l<8;l++)e[s+l]=a[o+l]|u[o+l]}return e[s+8]=i,s}function Nm(t,e){t.push(0,0,0,0,0,0,0,0,e)}function fb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Bg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=vb(i),r===null)return eo;if(n++,i=i[ho],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return eo}function Xm(t,e,n){A1(t,e,n)}function R1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let s=n[i];if(RD(s))break;if(s===0)i=i+2;else if(typeof s=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(s===e)return n[i+1];i=i+2}}}return null}function pb(t,e,n){if(n&ce.Optional||t!==void 0)return t;Sg(e,"NodeInjector")}function mb(t,e,n,r){if(n&ce.Optional&&r===void 0&&(r=null),!(n&(ce.Self|ce.Host))){let i=t[so],s=nn(void 0);try{return i?i.get(e,r,n&ce.Optional):CD(e,r,n&ce.Optional)}finally{nn(s)}}return pb(r,e,n)}function gb(t,e,n,r=ce.Default,i){if(t!==null){if(e[ee]&2048&&!(r&ce.Self)){let o=O1(t,e,n,r,Pn);if(o!==Pn)return o}let s=yb(t,e,n,r,Pn);if(s!==Pn)return s}return mb(e,n,r,i)}function yb(t,e,n,r,i){let s=x1(n);if(typeof s=="function"){if(!nb(e,t,r))return r&ce.Host?pb(i,n,r):mb(e,n,r,i);try{let o;if(o=s(r),o==null&&!(r&ce.Optional))Sg(n);else return o}finally{ob()}}else if(typeof s=="number"){let o=null,a=fb(t,e),u=eo,l=r&ce.Host?e[kn][En]:null;for((a===-1||r&ce.SkipSelf)&&(u=a===-1?Bg(t,e):e[a+8],u===eo||!zT(r,!1)?a=-1:(o=e[pe],a=rd(u),e=id(u,e)));a!==-1;){let h=e[pe];if(GT(s,a,h.data)){let p=N1(a,e,n,o,r,l);if(p!==Pn)return p}u=e[a+8],u!==eo&&zT(r,e[pe].data[a+8]===l)&&GT(s,a,e)?(o=h,a=rd(u),e=id(u,e)):a=-1}}return i}function N1(t,e,n,r,i,s){let o=e[pe],a=o.data[t+8],u=r==null?Td(a)&&Jm:r!=o&&(a.type&3)!==0,l=i&ce.Host&&s===a,h=M1(a,o,n,u,l);return h!==null?co(e,o,h,a):Pn}function M1(t,e,n,r,i){let s=t.providerIndexes,o=e.data,a=s&1048575,u=t.directiveStart,l=t.directiveEnd,h=s>>20,p=r?a:a+h,m=i?a+h:l;for(let v=p;v<m;v++){let b=o[v];if(v<u&&n===b||v>=u&&b.type===n)return v}if(i){let v=o[u];if(v&&Kr(v)&&v.type===n)return u}return null}function co(t,e,n,r){let i=t[n],s=e.data;if(E1(i)){let o=i;o.resolving&&rk(nk(s[n]));let a=HT(o.canSeeViewProviders);o.resolving=!0;let u,l=o.injectImpl?nn(o.injectImpl):null,h=nb(t,r,ce.Default);try{i=t[n]=o.factory(void 0,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&w1(n,s[n],e)}finally{l!==null&&nn(l),HT(a),o.resolving=!1,ob()}}return i}function x1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Ja)?t[Ja]:void 0;return typeof e=="number"?e>=0?e&db:P1:e}function GT(t,e,n){let r=1<<t;return!!(n[e+(t>>hb)]&r)}function zT(t,e){return!(t&ce.Self)&&!(t&ce.Host&&e)}var ki=class{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return gb(this._tNode,this._lView,e,wd(r),n)}};function P1(){return new ki(Bt(),Le())}function qi(t){return cc(()=>{let e=t.prototype.constructor,n=e[Yl]||Zm(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let s=i[Yl]||Zm(i);if(s&&s!==n)return s;i=Object.getPrototypeOf(i)}return s=>new s})}function Zm(t){return yD(t)?()=>{let e=Zm(Ot(t));return e&&e()}:to(t)}function O1(t,e,n,r,i){let s=t,o=e;for(;s!==null&&o!==null&&o[ee]&2048&&!(o[ee]&512);){let a=yb(s,o,n,r|ce.Self,Pn);if(a!==Pn)return a;let u=s.parent;if(!u){let l=o[$D];if(l){let h=l.get(n,Pn,r);if(h!==Pn)return h}u=vb(o),o=o[ho]}s=u}return i}function vb(t){let e=t[pe],n=e.type;return n===2?e.declTNode:n===1?t[En]:null}function $g(t){return R1(Bt(),t)}function WT(t,e=null,n=null,r){let i=_b(t,e,n,r);return i.resolveInjectorInitializers(),i}function _b(t,e=null,n=null,r,i=new Set){let s=[n||rn,Mk(t)];return r=r||(typeof t=="object"?void 0:kt(t)),new ec(s,e||xg(),r||null,i)}var pt=(()=>{let e=class e{static create(r,i){if(Array.isArray(r))return WT({name:""},i,r,"");{let s=r.name??"";return WT({name:s},r.parent,r.providers,s)}}};e.THROW_IF_NOT_FOUND=Xa,e.NULL=new Zl,e.\u0275prov=$({token:e,providedIn:"any",factory:()=>K(bD)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var k1="ngOriginalError";function Mm(t){return t[k1]}var Vn=class{constructor(){this._console=console}handleError(e){let n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Mm(e);for(;n&&Mm(n);)n=Mm(n);return n||null}},wb=new B("",{providedIn:"root",factory:()=>M(Vn).handleError.bind(void 0)}),qg=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=F1,e.__NG_ENV_ID__=r=>r;let t=e;return t})(),eg=class extends qg{constructor(e){super(),this._lView=e}onDestroy(e){return JD(this._lView,e),()=>n1(this._lView,e)}};function F1(){return new eg(Le())}function L1(){return Md(Bt(),Le())}function Md(t,e){return new ei(on(t,e))}var ei=(()=>{let e=class e{constructor(r){this.nativeElement=r}};e.__NG_ELEMENT_ID__=L1;let t=e;return t})();var tg=class extends It{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,BD()&&(this.destroyRef=M(qg,{optional:!0})??void 0)}emit(e){let n=Ce(null);try{super.next(e)}finally{Ce(n)}}subscribe(e,n,r){let i=e,s=n||(()=>null),o=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),s=u.error?.bind(u),o=u.complete?.bind(u)}this.__isAsync&&(s=xm(s),i&&(i=xm(i)),o&&(o=xm(o)));let a=super.subscribe({next:i,error:s,complete:o});return e instanceof ze&&e.add(a),a}};function xm(t){return e=>{setTimeout(t,void 0,e)}}var Xe=tg;function Ib(t){return(t.flags&128)===128}var Eb=new Map,V1=0;function U1(){return V1++}function j1(t){Eb.set(t[Cd],t)}function B1(t){Eb.delete(t[Cd])}var KT="__ngContext__";function Qr(t,e){Oi(e)?(t[KT]=e[Cd],j1(e)):t[KT]=e}function Cb(t){return Db(t[nc])}function Tb(t){return Db(t[vn])}function Db(t){for(;t!==null&&!gr(t);)t=t[vn];return t}var ng;function bb(t){ng=t}function $1(){if(ng!==void 0)return ng;if(typeof document<"u")return document;throw new G(210,!1)}var Hg=new B("",{providedIn:"root",factory:()=>q1}),q1="ng",Gg=new B(""),an=new B("",{providedIn:"platform",factory:()=>"unknown"});var zg=new B("",{providedIn:"root",factory:()=>$1().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var H1="h",G1="b";var z1=()=>null;function Wg(t,e,n=!1){return z1(t,e,n)}var Sb=!1,W1=new B("",{providedIn:"root",factory:()=>Sb});var $l;function K1(){if($l===void 0&&($l=null,Pi.trustedTypes))try{$l=Pi.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return $l}function QT(t){return K1()?.createScriptURL(t)||t}var od=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${mD})`}};function lc(t){return t instanceof od?t.changingThisBreaksApplicationSecurity:t}function Kg(t,e){let n=Q1(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${mD})`)}return n===e}function Q1(t){return t instanceof od&&t.getTypeName()||null}var Y1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Ab(t){return t=String(t),t.match(Y1)?t:"unsafe:"+t}var xd=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(xd||{});function Hi(t){let e=Nb();return e?e.sanitize(xd.URL,t)||"":Kg(t,"URL")?lc(t):Ab(_d(t))}function J1(t){let e=Nb();if(e)return QT(e.sanitize(xd.RESOURCE_URL,t)||"");if(Kg(t,"ResourceURL"))return QT(lc(t));throw new G(904,!1)}function X1(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?J1:Hi}function Rb(t,e,n){return X1(e,n)(t)}function Nb(){let t=Le();return t&&t[wn].sanitizer}var Z1=/^>|^->|<!--|-->|--!>|<!-$/g,eF=/(<|>)/g,tF="\u200B$1\u200B";function nF(t){return t.replace(Z1,e=>e.replace(eF,tF))}function Mb(t){return t instanceof Function?t():t}function rF(t){return(t??M(pt)).get(an)==="browser"}var fr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(fr||{}),iF;function Qg(t,e){return iF(t,e)}function Js(t,e,n,r,i){if(r!=null){let s,o=!1;gr(r)?s=r:Oi(r)&&(o=!0,r=r[mr]);let a=Ln(r);t===0&&n!==null?i==null?Fb(e,n,a):ad(e,n,a,i||null,!0):t===1&&n!==null?ad(e,n,a,i||null,!0):t===2?EF(e,a,o):t===3&&e.destroyNode(a),s!=null&&TF(e,t,s,n,i)}}function sF(t,e){return t.createText(e)}function oF(t,e,n){t.setValue(e,n)}function aF(t,e){return t.createComment(nF(e))}function xb(t,e,n){return t.createElement(e,n)}function cF(t,e){Pb(t,e),e[mr]=null,e[En]=null}function uF(t,e,n,r,i,s){r[mr]=i,r[En]=e,Od(t,r,n,1,i,s)}function Pb(t,e){e[wn].changeDetectionScheduler?.notify(1),Od(t,e,e[st],2,null,null)}function lF(t){let e=t[nc];if(!e)return Pm(t[pe],t);for(;e;){let n=null;if(Oi(e))n=e[nc];else{let r=e[sn];r&&(n=r)}if(!n){for(;e&&!e[vn]&&e!==t;)Oi(e)&&Pm(e[pe],e),e=e[Tt];e===null&&(e=t),Oi(e)&&Pm(e[pe],e),n=e&&e[vn]}e=n}}function dF(t,e,n,r){let i=sn+r,s=n.length;r>0&&(n[i-1][vn]=e),r<s-sn?(e[vn]=n[i],DD(n,sn+r,e)):(n.push(e),e[vn]=null),e[Tt]=n;let o=e[Ed];o!==null&&n!==o&&hF(o,e);let a=e[oo];a!==null&&a.insertView(t),Qm(e),e[ee]|=128}function hF(t,e){let n=t[nd],i=e[Tt][Tt][kn];e[kn]!==i&&(t[ee]|=Pg.HasTransplantedViews),n===null?t[nd]=[e]:n.push(e)}function Ob(t,e){let n=t[nd],r=n.indexOf(e);n.splice(r,1)}function rg(t,e){if(t.length<=sn)return;let n=sn+e,r=t[n];if(r){let i=r[Ed];i!==null&&i!==t&&Ob(i,r),e>0&&(t[n-1][vn]=r[vn]);let s=Xl(t,sn+e);cF(r[pe],r);let o=s[oo];o!==null&&o.detachView(s[pe]),r[Tt]=null,r[vn]=null,r[ee]&=-129}return r}function kb(t,e){if(!(e[ee]&256)){let n=e[st];n.destroyNode&&Od(t,e,n,3,null,null),lF(e)}}function Pm(t,e){if(e[ee]&256)return;let n=Ce(null);try{e[ee]&=-129,e[ee]|=256,e[Fi]&&sT(e[Fi]),pF(t,e),fF(t,e),e[pe].type===1&&e[st].destroy();let r=e[Ed];if(r!==null&&gr(e[Tt])){r!==e[Tt]&&Ob(r,e);let i=e[oo];i!==null&&i.detachView(t)}B1(e)}finally{Ce(n)}}function fF(t,e){let n=t.cleanup,r=e[tc];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let o=n[s+3];o>=0?r[o]():r[-o].unsubscribe(),s+=2}else{let o=r[n[s+1]];n[s].call(o)}r!==null&&(e[tc]=null);let i=e[zr];if(i!==null){e[zr]=null;for(let s=0;s<i.length;s++){let o=i[s];o()}}}function pF(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof Ui)){let s=n[r+1];if(Array.isArray(s))for(let o=0;o<s.length;o+=2){let a=i[s[o]],u=s[o+1];xn(4,a,u);try{u.call(a)}finally{xn(5,a,u)}}else{xn(4,i,s);try{s.call(i)}finally{xn(5,i,s)}}}}}function mF(t,e,n){return gF(t,e.parent,n)}function gF(t,e,n){let r=e;for(;r!==null&&r.type&40;)e=r,r=e.parent;if(r===null)return n[mr];{let{componentOffset:i}=r;if(i>-1){let{encapsulation:s}=t.data[r.directiveStart+i];if(s===On.None||s===On.Emulated)return null}return on(r,n)}}function ad(t,e,n,r,i){t.insertBefore(e,n,r,i)}function Fb(t,e,n){t.appendChild(e,n)}function YT(t,e,n,r,i){r!==null?ad(t,e,n,r,i):Fb(t,e,n)}function yF(t,e,n,r){t.removeChild(e,n,r)}function Yg(t,e){return t.parentNode(e)}function vF(t,e){return t.nextSibling(e)}function _F(t,e,n){return IF(t,e,n)}function wF(t,e,n){return t.type&40?on(t,n):null}var IF=wF,JT;function Pd(t,e,n,r){let i=mF(t,r,e),s=e[st],o=r.parent||e[En],a=_F(o,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)YT(s,i,n[u],a,!1);else YT(s,i,n,a,!1);JT!==void 0&&JT(s,r,e,n,i)}function Kl(t,e){if(e!==null){let n=e.type;if(n&3)return on(e,t);if(n&4)return ig(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return Kl(t,r);{let i=t[e.index];return gr(i)?ig(-1,i):Ln(i)}}else{if(n&32)return Qg(e,t)()||Ln(t[e.index]);{let r=Lb(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=ic(t[kn]);return Kl(i,r)}else return Kl(t,e.next)}}}return null}function Lb(t,e){if(e!==null){let r=t[kn][En],i=e.projection;return r.projection[i]}return null}function ig(t,e){let n=sn+t+1;if(n<e.length){let r=e[n],i=r[pe].firstChild;if(i!==null)return Kl(r,i)}return e[Li]}function EF(t,e,n){let r=Yg(t,e);r&&yF(t,r,e,n)}function Jg(t,e,n,r,i,s,o){for(;n!=null;){let a=r[n.index],u=n.type;if(o&&e===0&&(a&&Qr(Ln(a),r),n.flags|=2),(n.flags&32)!==32)if(u&8)Jg(t,e,n.child,r,i,s,!1),Js(e,t,i,a,s);else if(u&32){let l=Qg(n,r),h;for(;h=l();)Js(e,t,i,h,s);Js(e,t,i,a,s)}else u&16?CF(t,e,r,n,i,s):Js(e,t,i,a,s);n=o?n.projectionNext:n.next}}function Od(t,e,n,r,i,s){Jg(n,r,t.firstChild,e,i,s,!1)}function CF(t,e,n,r,i,s){let o=n[kn],u=o[En].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let h=u[l];Js(e,t,i,h,s)}else{let l=u,h=o[Tt];Ib(r)&&(l.flags|=128),Jg(t,e,l,h,i,s,!0)}}function TF(t,e,n,r,i){let s=n[Li],o=Ln(n);s!==o&&Js(e,t,r,s,i);for(let a=sn;a<n.length;a++){let u=n[a];Od(u[pe],u,t,e,r,s)}}function DF(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let s=r.indexOf("-")===-1?void 0:fr.DashCase;i==null?t.removeStyle(n,r,s):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),s|=fr.Important),t.setStyle(n,r,i,s))}}function bF(t,e,n){t.setAttribute(e,"style",n)}function Vb(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function Ub(t,e,n){let{mergedAttrs:r,classes:i,styles:s}=n;r!==null&&Hm(t,e,r),i!==null&&Vb(t,e,i),s!==null&&bF(t,e,s)}var po={};function ue(t=1){jb(Wt(),Le(),fo()+t,!1)}function jb(t,e,n,r){if(!r)if((e[ee]&3)===3){let s=t.preOrderCheckHooks;s!==null&&zl(e,s,n)}else{let s=t.preOrderHooks;s!==null&&Wl(e,s,0,n)}Vi(n)}function Te(t,e=ce.Default){let n=Le();if(n===null)return K(t,e);let r=Bt();return gb(r,n,Ot(t),e)}function Bb(){let t="invalid";throw new Error(t)}function $b(t,e,n,r,i,s){let o=Ce(null);try{let a=null;i&Et.SignalBased&&(a=e[r][tT]),a!==null&&a.transformFn!==void 0&&(s=a.transformFn(s)),i&Et.HasDecoratorInputTransform&&(s=t.inputTransforms[r].call(e,s)),t.setInput!==null?t.setInput(e,a,s,n,r):HD(e,a,r,s)}finally{Ce(o)}}function SF(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)Vi(~i);else{let s=i,o=n[++r],a=n[++r];p1(o,s);let u=e[s];a(2,u)}}}finally{Vi(-1)}}function kd(t,e,n,r,i,s,o,a,u,l,h){let p=e.blueprint.slice();return p[mr]=i,p[ee]=r|4|128|8|64,(l!==null||t&&t[ee]&2048)&&(p[ee]|=2048),YD(p),p[Tt]=p[ho]=t,p[_n]=n,p[wn]=o||t&&t[wn],p[st]=a||t&&t[st],p[so]=u||t&&t[so]||null,p[En]=s,p[Cd]=U1(),p[ed]=h,p[$D]=l,p[kn]=e.type==2?t[kn]:p,p}function dc(t,e,n,r,i){let s=t.data[e];if(s===null)s=AF(t,e,n,r,i),f1()&&(s.flags|=32);else if(s.type&64){s.type=n,s.value=r,s.attrs=i;let o=u1();s.injectorIndex=o===null?-1:o.injectorIndex}return $i(s,!0),s}function AF(t,e,n,r,i){let s=ZD(),o=Lg(),a=o?s:s&&s.parent,u=t.data[e]=PF(t,a,n,e,r,i);return t.firstChild===null&&(t.firstChild=u),s!==null&&(o?s.child==null&&u.parent!==null&&(s.child=u):s.next===null&&(s.next=u,u.prev=s)),u}function qb(t,e,n,r){if(n===0)return-1;let i=e.length;for(let s=0;s<n;s++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Hb(t,e,n,r,i){let s=fo(),o=r&2;try{Vi(-1),o&&e.length>Fn&&jb(t,e,Fn,!1),xn(o?2:0,i),n(r,i)}finally{Vi(s),xn(o?3:1,i)}}function Xg(t,e,n){if(Og(e)){let r=Ce(null);try{let i=e.directiveStart,s=e.directiveEnd;for(let o=i;o<s;o++){let a=t.data[o];if(a.contentQueries){let u=n[o];a.contentQueries(1,u,o)}}}finally{Ce(r)}}}function Zg(t,e,n){XD()&&(jF(t,e,n,on(n,e)),(n.flags&64)===64&&Wb(t,e,n))}function ey(t,e,n=on){let r=e.localNames;if(r!==null){let i=e.index+1;for(let s=0;s<r.length;s+=2){let o=r[s+1],a=o===-1?n(e,t):t[o];t[i++]=a}}}function Gb(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=ty(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function ty(t,e,n,r,i,s,o,a,u,l,h){let p=Fn+r,m=p+i,v=RF(p,m),b=typeof l=="function"?l():l;return v[pe]={type:t,blueprint:v,template:n,queries:null,viewQuery:a,declTNode:e,data:v.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof s=="function"?s():s,pipeRegistry:typeof o=="function"?o():o,firstChild:null,schemas:u,consts:b,incompleteFirstPass:!1,ssrId:h}}function RF(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:po);return n}function NF(t,e,n,r){let s=r.get(W1,Sb)||n===On.ShadowDom,o=t.selectRootElement(e,s);return MF(o),o}function MF(t){xF(t)}var xF=()=>null;function PF(t,e,n,r,i,s){let o=e?e.injectorIndex:-1,a=0;return o1()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:o,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function XT(t,e,n,r,i){for(let s in e){if(!e.hasOwnProperty(s))continue;let o=e[s];if(o===void 0)continue;r??={};let a,u=Et.None;Array.isArray(o)?(a=o[0],u=o[1]):a=o;let l=s;if(i!==null){if(!i.hasOwnProperty(s))continue;l=i[s]}t===0?ZT(r,n,l,a,u):ZT(r,n,l,a)}return r}function ZT(t,e,n,r,i){let s;t.hasOwnProperty(n)?(s=t[n]).push(e,r):s=t[n]=[e,r],i!==void 0&&s.push(i)}function OF(t,e,n){let r=e.directiveStart,i=e.directiveEnd,s=t.data,o=e.attrs,a=[],u=null,l=null;for(let h=r;h<i;h++){let p=s[h],m=n?n.get(p):null,v=m?m.inputs:null,b=m?m.outputs:null;u=XT(0,p.inputs,h,u,v),l=XT(1,p.outputs,h,l,b);let N=u!==null&&o!==null&&!Ng(e)?JF(u,h,o):null;a.push(N)}u!==null&&(u.hasOwnProperty("class")&&(e.flags|=8),u.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=u,e.outputs=l}function kF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function FF(t,e,n,r,i,s,o,a){let u=on(e,n),l=e.inputs,h;!a&&l!=null&&(h=l[r])?(ry(t,n,h,r,i),Td(e)&&LF(n,e.index)):e.type&3?(r=kF(r),i=o!=null?o(i,e.value||"",r):i,s.setProperty(u,r,i)):e.type&12}function LF(t,e){let n=Zr(e,t);n[ee]&16||(n[ee]|=64)}function ny(t,e,n,r){if(XD()){let i=r===null?null:{"":-1},s=$F(t,n),o,a;s===null?o=a=null:[o,a]=s,o!==null&&zb(t,e,n,o,i,a),i&&qF(n,r,i)}n.mergedAttrs=Za(n.mergedAttrs,n.attrs)}function zb(t,e,n,r,i,s){for(let l=0;l<r.length;l++)Xm(sd(n,e),t,r[l].type);GF(n,t.data.length,r.length);for(let l=0;l<r.length;l++){let h=r[l];h.providersResolver&&h.providersResolver(h)}let o=!1,a=!1,u=qb(t,e,r.length,null);for(let l=0;l<r.length;l++){let h=r[l];n.mergedAttrs=Za(n.mergedAttrs,h.hostAttrs),zF(t,n,e,u,h),HF(u,h,i),h.contentQueries!==null&&(n.flags|=4),(h.hostBindings!==null||h.hostAttrs!==null||h.hostVars!==0)&&(n.flags|=64);let p=h.type.prototype;!o&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),o=!0),!a&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),a=!0),u++}OF(t,n,s)}function VF(t,e,n,r,i){let s=i.hostBindings;if(s){let o=t.hostBindingOpCodes;o===null&&(o=t.hostBindingOpCodes=[]);let a=~e.index;UF(o)!=a&&o.push(a),o.push(n,r,s)}}function UF(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function jF(t,e,n,r){let i=n.directiveStart,s=n.directiveEnd;Td(n)&&WF(e,n,t.data[i+n.componentOffset]),t.firstCreatePass||sd(n,e),Qr(r,e);let o=n.initialInputs;for(let a=i;a<s;a++){let u=t.data[a],l=co(e,t,a,n);if(Qr(l,e),o!==null&&YF(e,a-i,l,u,n,o),Kr(u)){let h=Zr(n.index,e);h[_n]=co(e,t,a,n)}}}function Wb(t,e,n){let r=n.directiveStart,i=n.directiveEnd,s=n.index,o=m1();try{Vi(s);for(let a=r;a<i;a++){let u=t.data[a],l=e[a];Ym(a),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&BF(u,l)}}finally{Vi(-1),Ym(o)}}function BF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function $F(t,e){let n=t.directiveRegistry,r=null,i=null;if(n)for(let s=0;s<n.length;s++){let o=n[s];if(Ek(e,o.selectors,!1))if(r||(r=[]),Kr(o))if(o.findHostDirectiveDefs!==null){let a=[];i=i||new Map,o.findHostDirectiveDefs(o,a,i),r.unshift(...a,o);let u=a.length;sg(t,e,u)}else r.unshift(o),sg(t,e,0);else i=i||new Map,o.findHostDirectiveDefs?.(o,r,i),r.push(o)}return r===null?null:[r,i]}function sg(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function qF(t,e,n){if(e){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let s=n[e[i+1]];if(s==null)throw new G(-301,!1);r.push(e[i],s)}}}function HF(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;Kr(e)&&(n[""]=t)}}function GF(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function zF(t,e,n,r,i){t.data[r]=i;let s=i.factory||(i.factory=to(i.type,!0)),o=new Ui(s,Kr(i),Te);t.blueprint[r]=o,n[r]=o,VF(t,e,r,qb(t,n,i.hostVars,po),i)}function WF(t,e,n){let r=on(e,t),i=Gb(n),s=t[wn].rendererFactory,o=16;n.signals?o=4096:n.onPush&&(o=64);let a=Fd(t,kd(t,i,null,o,r,e,null,s.createRenderer(r,n),null,null,null));t[e.index]=a}function KF(t,e,n,r,i,s){let o=on(t,e);QF(e[st],o,s,t.value,n,r,i)}function QF(t,e,n,r,i,s,o){if(s==null)t.removeAttribute(e,i,n);else{let a=o==null?_d(s):o(s,r||"",i);t.setAttribute(e,i,a,n)}}function YF(t,e,n,r,i,s){let o=s[e];if(o!==null)for(let a=0;a<o.length;){let u=o[a++],l=o[a++],h=o[a++],p=o[a++];$b(r,n,u,l,h,p)}}function JF(t,e,n){let r=null,i=0;for(;i<n.length;){let s=n[i];if(s===0){i+=4;continue}else if(s===5){i+=2;continue}if(typeof s=="number")break;if(t.hasOwnProperty(s)){r===null&&(r=[]);let o=t[s];for(let a=0;a<o.length;a+=3)if(o[a]===e){r.push(s,o[a+1],o[a+2],n[i+1]);break}}i+=2}return r}function Kb(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function Qb(t,e){let n=t.contentQueries;if(n!==null){let r=Ce(null);try{for(let i=0;i<n.length;i+=2){let s=n[i],o=n[i+1];if(o!==-1){let a=t.data[o];tb(s),a.contentQueries(2,e[o],o)}}}finally{Ce(r)}}}function Fd(t,e){return t[nc]?t[BT][vn]=e:t[nc]=e,t[BT]=e,e}function og(t,e,n){tb(0);let r=Ce(null);try{e(t,n)}finally{Ce(r)}}function XF(t){return t[tc]||(t[tc]=[])}function ZF(t){return t.cleanup||(t.cleanup=[])}function Yb(t,e){let n=t[so],r=n?n.get(Vn,null):null;r&&r.handleError(e)}function ry(t,e,n,r,i){for(let s=0;s<n.length;){let o=n[s++],a=n[s++],u=n[s++],l=e[o],h=t.data[o];$b(h,l,r,a,u,i)}}function eL(t,e,n){let r=KD(e,t);oF(t[st],r,n)}function tL(t,e){let n=Zr(e,t),r=n[pe];nL(r,n);let i=n[mr];i!==null&&n[ed]===null&&(n[ed]=Wg(i,n[so])),iy(r,n,n[_n])}function nL(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function iy(t,e,n){Ug(e);try{let r=t.viewQuery;r!==null&&og(1,r,n);let i=t.template;i!==null&&Hb(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[oo]?.finishViewCreation(t),t.staticContentQueries&&Qb(t,e),t.staticViewQueries&&og(2,t.viewQuery,n);let s=t.components;s!==null&&rL(e,s)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ee]&=-5,jg()}}function rL(t,e){for(let n=0;n<e.length;n++)tL(t,e[n])}function iL(t,e,n,r){let i=Ce(null);try{let s=e.tView,a=t[ee]&4096?4096:16,u=kd(t,s,n,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[Ed]=l;let h=t[oo];return h!==null&&(u[oo]=h.createEmbeddedView(s)),iy(s,u,n),u}finally{Ce(i)}}function eD(t,e){return!e||e.firstChild===null||Ib(t)}function sL(t,e,n,r=!0){let i=e[pe];if(dF(i,e,t,n),r){let o=ig(n,t),a=e[st],u=Yg(a,t[Li]);u!==null&&uF(i,t[En],a,e,u,o)}let s=e[ed];s!==null&&s.firstChild!==null&&(s.firstChild=null)}function cd(t,e,n,r,i=!1){for(;n!==null;){let s=e[n.index];s!==null&&r.push(Ln(s)),gr(s)&&oL(s,r);let o=n.type;if(o&8)cd(t,e,n.child,r);else if(o&32){let a=Qg(n,e),u;for(;u=a();)r.push(u)}else if(o&16){let a=Lb(e,n);if(Array.isArray(a))r.push(...a);else{let u=ic(e[kn]);cd(u[pe],u,a,r,!0)}}n=i?n.projectionNext:n.next}return r}function oL(t,e){for(let n=sn;n<t.length;n++){let r=t[n],i=r[pe].firstChild;i!==null&&cd(r[pe],r,i,e)}t[Li]!==t[mr]&&e.push(t[Li])}var Jb=[];function aL(t){return t[Fi]??cL(t)}function cL(t){let e=Jb.pop()??Object.create(lL);return e.lView=t,e}function uL(t){t.lView[Fi]!==t&&(t.lView=null,Jb.push(t))}var lL=Ee(L({},nT),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{rc(t.lView)},consumerOnSignalRead(){this.lView[Fi]=this}}),Xb=100;function Zb(t,e=!0,n=0){let r=t[wn],i=r.rendererFactory,s=!1;s||i.begin?.();try{dL(t,n)}catch(o){throw e&&Yb(t,o),o}finally{s||(i.end?.(),r.inlineEffectRunner?.flush())}}function dL(t,e){ag(t,e);let n=0;for(;Fg(t);){if(n===Xb)throw new G(103,!1);n++,ag(t,1)}}function hL(t,e,n,r){let i=e[ee];if((i&256)===256)return;let s=!1;!s&&e[wn].inlineEffectRunner?.flush(),Ug(e);let o=null,a=null;!s&&fL(t)&&(a=aL(e),o=rT(a));try{YD(e),d1(t.bindingStartIndex),n!==null&&Hb(t,e,n,2,r);let u=(i&3)===3;if(!s)if(u){let p=t.preOrderCheckHooks;p!==null&&zl(e,p,null)}else{let p=t.preOrderHooks;p!==null&&Wl(e,p,0,null),Rm(e,0)}if(pL(e),e0(e,0),t.contentQueries!==null&&Qb(t,e),!s)if(u){let p=t.contentCheckHooks;p!==null&&zl(e,p)}else{let p=t.contentHooks;p!==null&&Wl(e,p,1),Rm(e,1)}SF(t,e);let l=t.components;l!==null&&n0(e,l,0);let h=t.viewQuery;if(h!==null&&og(2,h,r),!s)if(u){let p=t.viewCheckHooks;p!==null&&zl(e,p)}else{let p=t.viewHooks;p!==null&&Wl(e,p,2),Rm(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Am]){for(let p of e[Am])p();e[Am]=null}s||(e[ee]&=-73)}catch(u){throw rc(e),u}finally{a!==null&&(iT(a,o),uL(a)),jg()}}function fL(t){return t.type!==2}function e0(t,e){for(let n=Cb(t);n!==null;n=Tb(n))for(let r=sn;r<n.length;r++){let i=n[r];t0(i,e)}}function pL(t){for(let e=Cb(t);e!==null;e=Tb(e)){if(!(e[ee]&Pg.HasTransplantedViews))continue;let n=e[nd];for(let r=0;r<n.length;r++){let i=n[r],s=i[Tt];e1(i)}}}function mL(t,e,n){let r=Zr(e,t);t0(r,n)}function t0(t,e){kg(t)&&ag(t,e)}function ag(t,e){let r=t[pe],i=t[ee],s=t[Fi],o=!!(e===0&&i&16);if(o||=!!(i&64&&e===0),o||=!!(i&1024),o||=!!(s?.dirty&&om(s)),s&&(s.dirty=!1),t[ee]&=-9217,o)hL(r,t,r.template,t[_n]);else if(i&8192){e0(t,1);let a=r.components;a!==null&&n0(t,a,1)}}function n0(t,e,n){for(let r=0;r<e.length;r++)mL(t,e[r],n)}function sy(t){for(t[wn].changeDetectionScheduler?.notify();t;){t[ee]|=64;let e=ic(t);if(Hk(t)&&!e)return t;t=e}return null}var ji=class{get rootNodes(){let e=this._lView,n=e[pe];return cd(n,e,n.firstChild,[])}constructor(e,n,r=!0){this._lView=e,this._cdRefInjectingView=n,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[_n]}set context(e){this._lView[_n]=e}get destroyed(){return(this._lView[ee]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Tt];if(gr(e)){let n=e[td],r=n?n.indexOf(this):-1;r>-1&&(rg(e,r),Xl(n,r))}this._attachedToViewContainer=!1}kb(this._lView[pe],this._lView)}onDestroy(e){JD(this._lView,e)}markForCheck(){sy(this._cdRefInjectingView||this._lView)}detach(){this._lView[ee]&=-129}reattach(){Qm(this._lView),this._lView[ee]|=128}detectChanges(){this._lView[ee]|=1024,Zb(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new G(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Pb(this._lView[pe],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new G(902,!1);this._appRef=e,Qm(this._lView)}},Ld=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=vL;let t=e;return t})(),gL=Ld,yL=class extends gL{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,n){return this.createEmbeddedViewImpl(e,n)}createEmbeddedViewImpl(e,n,r){let i=iL(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:n,dehydratedView:r});return new ji(i)}};function vL(){return r0(Bt(),Le())}function r0(t,e){return t.type&4?new yL(e,t,Md(t,e)):null}var F7=new RegExp(`^(\\d+)*(${G1}|${H1})*(.*)`);var _L=()=>null;function tD(t,e){return _L(t,e)}var ud=class{},cg=class{},ld=class{};function wL(t){let e=Error(`No component factory found for ${kt(t)}.`);return e[IL]=t,e}var IL="ngComponent";var ug=class{resolveComponentFactory(e){throw wL(e)}},Vd=(()=>{let e=class e{};e.NULL=new ug;let t=e;return t})(),sc=class{},Gi=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>EL();let t=e;return t})();function EL(){let t=Le(),e=Bt(),n=Zr(e.index,t);return(Oi(n)?n:t)[st]}var CL=(()=>{let e=class e{};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Om={};var nD=new Set;function Ud(t){nD.has(t)||(nD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function rD(...t){}function TL(){let t=typeof Pi.requestAnimationFrame=="function",e=Pi[t?"requestAnimationFrame":"setTimeout"],n=Pi[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&n){let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r);let i=n[Zone.__symbol__("OriginalDelegate")];i&&(n=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:n}}var ye=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Xe(!1),this.onMicrotaskEmpty=new Xe(!1),this.onStable=new Xe(!1),this.onError=new Xe(!1),typeof Zone>"u")throw new G(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!r&&n,i.shouldCoalesceRunChangeDetection=r,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=TL().nativeRequestAnimationFrame,SL(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new G(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new G(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let s=this._inner,o=s.scheduleEventTask("NgZoneEvent: "+i,e,DL,rD,rD);try{return s.runTask(o,n,r)}finally{s.cancelTask(o)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},DL={};function oy(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function bL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Pi,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,lg(t),t.isCheckStableRunning=!0,oy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),lg(t))}function SL(t){let e=()=>{bL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{if(AL(a))return n.invokeTask(i,s,o,a);try{return iD(t),n.invokeTask(i,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),sD(t)}},onInvoke:(n,r,i,s,o,a,u)=>{try{return iD(t),n.invoke(i,s,o,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),sD(t)}},onHasTask:(n,r,i,s)=>{n.hasTask(i,s),r===i&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,lg(t),oy(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(n,r,i,s)=>(n.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function lg(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function iD(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function sD(t){t._nesting--,oy(t)}function AL(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Xs=function(t){return t[t.EarlyRead=0]="EarlyRead",t[t.Write=1]="Write",t[t.MixedReadWrite=2]="MixedReadWrite",t[t.Read=3]="Read",t}(Xs||{}),RL={destroy(){}};function jd(t,e){!e&&$k(jd);let n=e?.injector??M(pt);if(!rF(n))return RL;Ud("NgAfterNextRender");let r=n.get(ay),i=r.handler??=new hg,s=e?.phase??Xs.MixedReadWrite,o=()=>{i.unregister(u),a()},a=n.get(qg).onDestroy(o),u=In(n,()=>new dg(s,()=>{o(),t()}));return i.register(u),{destroy:o}}var dg=class{constructor(e,n){this.phase=e,this.callbackFn=n,this.zone=M(ye),this.errorHandler=M(Vn,{optional:!0}),M(ud,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(e){this.errorHandler?.handleError(e)}}},hg=class{constructor(){this.executingCallbacks=!1,this.buckets={[Xs.EarlyRead]:new Set,[Xs.Write]:new Set,[Xs.MixedReadWrite]:new Set,[Xs.Read]:new Set},this.deferredCallbacks=new Set}register(e){(this.executingCallbacks?this.deferredCallbacks:this.buckets[e.phase]).add(e)}unregister(e){this.buckets[e.phase].delete(e),this.deferredCallbacks.delete(e)}execute(){this.executingCallbacks=!0;for(let e of Object.values(this.buckets))for(let n of e)n.invoke();this.executingCallbacks=!1;for(let e of this.deferredCallbacks)this.buckets[e.phase].add(e);this.deferredCallbacks.clear()}destroy(){for(let e of Object.values(this.buckets))e.clear();this.deferredCallbacks.clear()}},ay=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let r=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of r)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function dd(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,s=0;if(e!==null)for(let o=0;o<e.length;o++){let a=e[o];if(typeof a=="number")s=a;else if(s==1)i=MT(i,a);else if(s==2){let u=a,l=e[++o];r=MT(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}var hd=class extends Vd{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=Wr(e);return new uo(n,this.ngModule)}};function oD(t){let e=[];for(let n in t){if(!t.hasOwnProperty(n))continue;let r=t[n];r!==void 0&&e.push({propName:Array.isArray(r)?r[0]:r,templateName:n})}return e}function NL(t){let e=t.toLowerCase();return e==="svg"?Kk:e==="math"?Qk:null}var fg=class{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){r=wd(r);let i=this.injector.get(e,Om,r);return i!==Om||n===Om?i:this.parentInjector.get(e,n,r)}},uo=class extends ld{get inputs(){let e=this.componentDef,n=e.inputTransforms,r=oD(e.inputs);if(n!==null)for(let i of r)n.hasOwnProperty(i.propName)&&(i.transform=n[i.propName]);return r}get outputs(){return oD(this.componentDef.outputs)}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=bk(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}create(e,n,r,i){let s=Ce(null);try{i=i||this.ngModule;let o=i instanceof Ct?i:i?.injector;o&&this.componentDef.getStandaloneInjector!==null&&(o=this.componentDef.getStandaloneInjector(o)||o);let a=o?new fg(e,o):e,u=a.get(sc,null);if(u===null)throw new G(407,!1);let l=a.get(CL,null),h=a.get(ay,null),p=a.get(ud,null),m={rendererFactory:u,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:h,changeDetectionScheduler:p},v=u.createRenderer(null,this.componentDef),b=this.componentDef.selectors[0][0]||"div",N=r?NF(v,r,this.componentDef.encapsulation,a):xb(v,b,NL(b)),R=512;this.componentDef.signals?R|=4096:this.componentDef.onPush||(R|=16);let P=null;N!==null&&(P=Wg(N,a,!0));let q=ty(0,null,null,1,0,null,null,null,null,null,null),H=kd(null,q,null,R,null,null,m,v,a,null,P);Ug(H);let W,xe;try{let ne=this.componentDef,C,y=null;ne.findHostDirectiveDefs?(C=[],y=new Map,ne.findHostDirectiveDefs(ne,C,y),C.push(ne)):C=[ne];let _=ML(H,N),E=xL(_,N,ne,C,H,m,v);xe=QD(q,Fn),N&&kL(v,ne,N,r),n!==void 0&&FL(xe,this.ngContentSelectors,n),W=OL(E,ne,C,y,H,[LL]),iy(q,H,null)}finally{jg()}return new pg(this.componentType,W,Md(xe,H),H,xe)}finally{Ce(s)}}},pg=class extends cg{constructor(e,n,r,i,s){super(),this.location=r,this._rootLView=i,this._tNode=s,this.previousInputValues=null,this.instance=n,this.hostView=this.changeDetectorRef=new ji(i,void 0,!1),this.componentType=e}setInput(e,n){let r=this._tNode.inputs,i;if(r!==null&&(i=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let s=this._rootLView;ry(s[pe],s,i,e,n),this.previousInputValues.set(e,n);let o=Zr(this._tNode.index,s);sy(o)}}get injector(){return new ki(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function ML(t,e){let n=t[pe],r=Fn;return t[r]=e,dc(n,r,2,"#host",null)}function xL(t,e,n,r,i,s,o){let a=i[pe];PL(r,t,e,o);let u=null;e!==null&&(u=Wg(e,i[so]));let l=s.rendererFactory.createRenderer(e,n),h=16;n.signals?h=4096:n.onPush&&(h=64);let p=kd(i,Gb(n),null,h,i[t.index],t,s,l,null,null,u);return a.firstCreatePass&&sg(a,t,r.length-1),Fd(i,p),i[t.index]=p}function PL(t,e,n,r){for(let i of t)e.mergedAttrs=Za(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(dd(e,e.mergedAttrs,!0),n!==null&&Ub(r,n,e))}function OL(t,e,n,r,i,s){let o=Bt(),a=i[pe],u=on(o,i);zb(a,i,o,n,null,r);for(let h=0;h<n.length;h++){let p=o.directiveStart+h,m=co(i,a,p,o);Qr(m,i)}Wb(a,i,o),u&&Qr(u,i);let l=co(i,a,o.directiveStart+o.componentOffset,o);if(t[_n]=i[_n]=l,s!==null)for(let h of s)h(l,e);return Xg(a,o,i),l}function kL(t,e,n,r){if(r)Hm(t,n,["ng-version","17.3.10"]);else{let{attrs:i,classes:s}=Sk(e.selectors[0]);i&&Hm(t,n,i),s&&s.length>0&&Vb(t,n,s.join(" "))}}function FL(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let s=n[i];r.push(s!=null?Array.from(s):null)}}function LL(){let t=Bt();Nd(Le()[pe],t)}var mo=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=VL;let t=e;return t})();function VL(){let t=Bt();return jL(t,Le())}var UL=mo,i0=class extends UL{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Md(this._hostTNode,this._hostLView)}get injector(){return new ki(this._hostTNode,this._hostLView)}get parentInjector(){let e=Bg(this._hostTNode,this._hostLView);if(lb(e)){let n=id(e,this._hostLView),r=rd(e),i=n[pe].data[r+8];return new ki(i,n)}else return new ki(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=aD(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-sn}createEmbeddedView(e,n,r){let i,s;typeof r=="number"?i=r:r!=null&&(i=r.index,s=r.injector);let o=tD(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(n||{},s,o);return this.insertImpl(a,i,eD(this._hostTNode,o)),a}createComponent(e,n,r,i,s){let o=e&&!qk(e),a;if(o)a=n;else{let b=n||{};a=b.index,r=b.injector,i=b.projectableNodes,s=b.environmentInjector||b.ngModuleRef}let u=o?e:new uo(Wr(e)),l=r||this.parentInjector;if(!s&&u.ngModule==null){let N=(o?l:this.parentInjector).get(Ct,null);N&&(s=N)}let h=Wr(u.componentType??{}),p=tD(this._lContainer,h?.id??null),m=p?.firstChild??null,v=u.create(l,i,m,s);return this.insertImpl(v.hostView,a,eD(this._hostTNode,p)),v}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(Zk(i)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let u=i[Tt],l=new i0(u,u[En],u[Tt]);l.detach(l.indexOf(e))}}let s=this._adjustIndex(n),o=this._lContainer;return sL(o,i,s,r),e.attachToViewContainerRef(),DD(km(o),s,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=aD(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);r&&(Xl(km(this._lContainer),n),kb(r[pe],r))}detach(e){let n=this._adjustIndex(e,-1),r=rg(this._lContainer,n);return r&&Xl(km(this._lContainer),n)!=null?new ji(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function aD(t){return t[td]}function km(t){return t[td]||(t[td]=[])}function jL(t,e){let n,r=e[t.index];return gr(r)?n=r:(n=Kb(r,e,null,t),e[t.index]=n,Fd(e,n)),$L(n,e,t,r),new i0(n,t,e)}function BL(t,e){let n=t[st],r=n.createComment(""),i=on(e,t),s=Yg(n,i);return ad(n,s,r,vF(n,i),!1),r}var $L=GL,qL=()=>!1;function HL(t,e,n){return qL(t,e,n)}function GL(t,e,n,r){if(t[Li])return;let i;n.type&8?i=Ln(r):i=BL(e,n),t[Li]=i}function zL(t){return Object.getPrototypeOf(t.prototype).constructor}function Bn(t){let e=zL(t.type),n=!0,r=[t];for(;e;){let i;if(Kr(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new G(903,!1);i=e.\u0275dir}if(i){if(n){r.push(i);let o=t;o.inputs=ql(t.inputs),o.inputTransforms=ql(t.inputTransforms),o.declaredInputs=ql(t.declaredInputs),o.outputs=ql(t.outputs);let a=i.hostBindings;a&&JL(t,a);let u=i.viewQuery,l=i.contentQueries;if(u&&QL(t,u),l&&YL(t,l),WL(t,i),KO(t.outputs,i.outputs),Kr(i)&&i.data.animation){let h=t.data;h.animation=(h.animation||[]).concat(i.data.animation)}}let s=i.features;if(s)for(let o=0;o<s.length;o++){let a=s[o];a&&a.ngInherit&&a(t),a===Bn&&(n=!1)}}e=Object.getPrototypeOf(e)}KL(r)}function WL(t,e){for(let n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;let r=e.inputs[n];if(r!==void 0&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n],e.inputTransforms!==null)){let i=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function KL(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){let i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=Za(i.hostAttrs,n=Za(n,i.hostAttrs))}}function ql(t){return t===no?{}:t===rn?[]:t}function QL(t,e){let n=t.viewQuery;n?t.viewQuery=(r,i)=>{e(r,i),n(r,i)}:t.viewQuery=e}function YL(t,e){let n=t.contentQueries;n?t.contentQueries=(r,i,s)=>{e(r,i,s),n(r,i,s)}:t.contentQueries=e}function JL(t,e){let n=t.hostBindings;n?t.hostBindings=(r,i)=>{e(r,i),n(r,i)}:t.hostBindings=e}function cy(t){let e=t.inputConfig,n={};for(let r in e)if(e.hasOwnProperty(r)){let i=e[r];Array.isArray(i)&&i[3]&&(n[r]=i[3])}t.inputTransforms=n}var Yr=class{},oc=class{};var mg=class extends Yr{constructor(e,n,r){super(),this._parent=n,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new hd(this);let i=OD(e);this._bootstrapComponents=Mb(i.bootstrap),this._r3Injector=_b(e,n,[{provide:Yr,useValue:this},{provide:Vd,useValue:this.componentFactoryResolver},...r],kt(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},gg=class extends oc{constructor(e){super(),this.moduleType=e}create(e){return new mg(this.moduleType,e,[])}};var fd=class extends Yr{constructor(e){super(),this.componentFactoryResolver=new hd(this),this.instance=null;let n=new ec([...e.providers,{provide:Yr,useValue:this},{provide:Vd,useValue:this.componentFactoryResolver}],e.parent||xg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Bd(t,e,n=null){return new fd({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var go=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ht(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let r=this.taskId++;return this.pendingTasks.add(r),r}remove(r){this.pendingTasks.delete(r),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function s0(t){return ZL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function XL(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{let n=t[Symbol.iterator](),r;for(;!(r=n.next()).done;)e(r.value)}}function ZL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function $d(t,e,n){let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function eV(t){return(t.flags&32)===32}function tV(t,e,n,r,i,s,o,a,u){let l=e.consts,h=dc(e,t,4,o||null,ao(l,a));ny(e,n,h,ao(l,u)),Nd(e,h);let p=h.tView=ty(2,h,r,i,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,h),p.queries=e.queries.embeddedTView(h)),h}function je(t,e,n,r,i,s,o,a){let u=Le(),l=Wt(),h=t+Fn,p=l.firstCreatePass?tV(h,l,u,e,n,r,i,s,o):l.data[h];$i(p,!1);let m=nV(l,u,p,t);Ad()&&Pd(l,u,m,p),Qr(m,u);let v=Kb(m,u,m,p);return u[h]=v,Fd(u,v),HL(v,p,u),Dd(p)&&Zg(l,u,p),o!=null&&ey(u,p,a),je}var nV=rV;function rV(t,e,n,r){return Rd(!0),e[st].createComment("")}function qd(t,e,n,r){let i=Le(),s=Vg();if($d(i,s,e)){let o=Wt(),a=ab();KF(a,i,t,e,n,r)}return qd}function iV(t,e,n,r){return $d(t,Vg(),n)?e+_d(n)+r:po}function Hl(t,e){return t<<17|e<<2}function Bi(t){return t>>17&32767}function sV(t){return(t&2)==2}function oV(t,e){return t&131071|e<<17}function yg(t){return t|2}function lo(t){return(t&131068)>>2}function Fm(t,e){return t&-131069|e<<2}function aV(t){return(t&1)===1}function vg(t){return t|1}function cV(t,e,n,r,i,s){let o=s?e.classBindings:e.styleBindings,a=Bi(o),u=lo(o);t[r]=n;let l=!1,h;if(Array.isArray(n)){let p=n;h=p[1],(h===null||uc(p,h)>0)&&(l=!0)}else h=n;if(i)if(u!==0){let m=Bi(t[a+1]);t[r+1]=Hl(m,a),m!==0&&(t[m+1]=Fm(t[m+1],r)),t[a+1]=oV(t[a+1],r)}else t[r+1]=Hl(a,0),a!==0&&(t[a+1]=Fm(t[a+1],r)),a=r;else t[r+1]=Hl(u,0),a===0?a=r:t[u+1]=Fm(t[u+1],r),u=r;l&&(t[r+1]=yg(t[r+1])),cD(t,h,r,!0),cD(t,h,r,!1),uV(e,h,t,r,s),o=Hl(a,u),s?e.classBindings=o:e.styleBindings=o}function uV(t,e,n,r,i){let s=i?t.residualClasses:t.residualStyles;s!=null&&typeof e=="string"&&uc(s,e)>=0&&(n[r+1]=vg(n[r+1]))}function cD(t,e,n,r){let i=t[n+1],s=e===null,o=r?Bi(i):lo(i),a=!1;for(;o!==0&&(a===!1||s);){let u=t[o],l=t[o+1];lV(u,e)&&(a=!0,t[o+1]=r?vg(l):yg(l)),o=r?Bi(l):lo(l)}a&&(t[n+1]=r?yg(i):vg(i))}function lV(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?uc(t,e)>=0:!1}function De(t,e,n){let r=Le(),i=Vg();if($d(r,i,e)){let s=Wt(),o=ab();FF(s,o,r,t,e,r[st],n,!1)}return De}function uD(t,e,n,r,i){let s=e.inputs,o=i?"class":"style";ry(t,n,s[o],o,r)}function Hd(t,e){return dV(t,e,null,!0),Hd}function dV(t,e,n,r){let i=Le(),s=Wt(),o=h1(2);if(s.firstUpdatePass&&fV(s,t,o,r),e!==po&&$d(i,o,e)){let a=s.data[fo()];vV(s,a,i,i[st],t,i[o+1]=_V(e,n),r,o)}}function hV(t,e){return e>=t.expandoStartIndex}function fV(t,e,n,r){let i=t.data;if(i[n+1]===null){let s=i[fo()],o=hV(t,n);wV(s,r)&&e===null&&!o&&(e=!1),e=pV(i,s,e,r),cV(i,s,e,n,o,r)}}function pV(t,e,n,r){let i=g1(t),s=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=Lm(null,t,e,n,r),n=ac(n,e.attrs,r),s=null);else{let o=e.directiveStylingLast;if(o===-1||t[o]!==i)if(n=Lm(i,t,e,n,r),s===null){let u=mV(t,e,r);u!==void 0&&Array.isArray(u)&&(u=Lm(null,t,e,u[1],r),u=ac(u,e.attrs,r),gV(t,e,r,u))}else s=yV(t,e,r)}return s!==void 0&&(r?e.residualClasses=s:e.residualStyles=s),n}function mV(t,e,n){let r=n?e.classBindings:e.styleBindings;if(lo(r)!==0)return t[Bi(r)]}function gV(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[Bi(i)]=r}function yV(t,e,n){let r,i=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<i;s++){let o=t[s].hostAttrs;r=ac(r,o,n)}return ac(r,e.attrs,n)}function Lm(t,e,n,r,i){let s=null,o=n.directiveEnd,a=n.directiveStylingLast;for(a===-1?a=n.directiveStart:a++;a<o&&(s=e[a],r=ac(r,s.hostAttrs,i),s!==t);)a++;return t!==null&&(n.directiveStylingLast=a),r}function ac(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let s=0;s<e.length;s++){let o=e[s];typeof o=="number"?i=o:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),pk(t,o,n?!0:e[++s]))}return t===void 0?null:t}function vV(t,e,n,r,i,s,o,a){if(!(e.type&3))return;let u=t.data,l=u[a+1],h=aV(l)?lD(u,e,n,i,lo(l),o):void 0;if(!pd(h)){pd(s)||sV(l)&&(s=lD(u,null,n,i,a,o));let p=KD(fo(),n);DF(r,o,p,i,s)}}function lD(t,e,n,r,i,s){let o=e===null,a;for(;i>0;){let u=t[i],l=Array.isArray(u),h=l?u[1]:u,p=h===null,m=n[i+1];m===po&&(m=p?rn:void 0);let v=p?bm(m,r):h===r?m:void 0;if(l&&!pd(v)&&(v=bm(u,r)),pd(v)&&(a=v,o))return a;let b=t[i+1];i=o?Bi(b):lo(b)}if(e!==null){let u=s?e.residualClasses:e.residualStyles;u!=null&&(a=bm(u,r))}return a}function pd(t){return t!==void 0}function _V(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=kt(lc(t)))),t}function wV(t,e){return(t.flags&(e?8:16))!==0}function IV(t,e,n,r,i,s){let o=e.consts,a=ao(o,i),u=dc(e,t,2,r,a);return ny(e,n,u,ao(o,s)),u.attrs!==null&&dd(u,u.attrs,!1),u.mergedAttrs!==null&&dd(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function U(t,e,n,r){let i=Le(),s=Wt(),o=Fn+t,a=i[st],u=s.firstCreatePass?IV(o,s,i,e,n,r):s.data[o],l=EV(s,i,u,a,e,t);i[o]=l;let h=Dd(u);return $i(u,!0),Ub(a,l,u),!eV(u)&&Ad()&&Pd(s,i,l,u),r1()===0&&Qr(l,i),i1(),h&&(Zg(s,i,u),Xg(s,u,i)),r!==null&&ey(i,u),U}function V(){let t=Bt();Lg()?eb():(t=t.parent,$i(t,!1));let e=t;a1(e)&&c1(),s1();let n=Wt();return n.firstCreatePass&&(Nd(n,t),Og(t)&&n.queries.elementEnd(t)),e.classesWithoutHost!=null&&C1(e)&&uD(n,e,Le(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&T1(e)&&uD(n,e,Le(),e.stylesWithoutHost,!1),V}function Ve(t,e,n,r){return U(t,e,n,r),V(),Ve}var EV=(t,e,n,r,i,s)=>(Rd(!0),xb(r,i,_1()));function CV(t,e,n,r,i){let s=e.consts,o=ao(s,r),a=dc(e,t,8,"ng-container",o);o!==null&&dd(a,o,!0);let u=ao(s,i);return ny(e,n,a,u),e.queries!==null&&e.queries.elementStart(e,a),a}function yr(t,e,n){let r=Le(),i=Wt(),s=t+Fn,o=i.firstCreatePass?CV(s,i,r,e,n):i.data[s];$i(o,!0);let a=TV(i,r,o,t);return r[s]=a,Ad()&&Pd(i,r,a,o),Qr(a,r),Dd(o)&&(Zg(i,r,o),Xg(i,o,r)),n!=null&&ey(r,o),yr}function vr(){let t=Bt(),e=Wt();return Lg()?eb():(t=t.parent,$i(t,!1)),e.firstCreatePass&&(Nd(e,t),Og(t)&&e.queries.elementEnd(t)),vr}var TV=(t,e,n,r)=>(Rd(!0),aF(e[st],""));function Gd(){return Le()}var md="en-US";var DV=md;function bV(t){typeof t=="string"&&(DV=t.toLowerCase().replace(/_/g,"-"))}function Ke(t,e,n,r){let i=Le(),s=Wt(),o=Bt();return AV(s,i,i[st],o,t,e,r),Ke}function SV(t,e,n,r){let i=t.cleanup;if(i!=null)for(let s=0;s<i.length-1;s+=2){let o=i[s];if(o===n&&i[s+1]===r){let a=e[tc],u=i[s+2];return a.length>u?a[u]:null}typeof o=="string"&&(s+=2)}return null}function AV(t,e,n,r,i,s,o){let a=Dd(r),l=t.firstCreatePass&&ZF(t),h=e[_n],p=XF(e),m=!0;if(r.type&3||o){let N=on(r,e),R=o?o(N):N,P=p.length,q=o?W=>o(Ln(W[r.index])):r.index,H=null;if(!o&&a&&(H=SV(t,e,i,r.index)),H!==null){let W=H.__ngLastListenerFn__||H;W.__ngNextListenerFn__=s,H.__ngLastListenerFn__=s,m=!1}else{s=hD(r,e,h,s,!1);let W=n.listen(R,i,s);p.push(s,W),l&&l.push(i,q,P,P+1)}}else s=hD(r,e,h,s,!1);let v=r.outputs,b;if(m&&v!==null&&(b=v[i])){let N=b.length;if(N)for(let R=0;R<N;R+=2){let P=b[R],q=b[R+1],xe=e[P][q].subscribe(s),ne=p.length;p.push(s,xe),l&&l.push(i,r.index,ne,-(ne+1))}}}function dD(t,e,n,r){let i=Ce(null);try{return xn(6,e,n),n(r)!==!1}catch(s){return Yb(t,s),!1}finally{xn(7,e,n),Ce(i)}}function hD(t,e,n,r,i){return function s(o){if(o===Function)return r;let a=t.componentOffset>-1?Zr(t.index,e):e;sy(a);let u=dD(e,n,r,o),l=s.__ngNextListenerFn__;for(;l;)u=dD(e,n,l,o)&&u,l=l.__ngNextListenerFn__;return i&&u===!1&&o.preventDefault(),u}}function Kt(t=1){return v1(t)}function zd(t){let e=l1();return Xk(e,Fn+t)}function J(t,e=""){let n=Le(),r=Wt(),i=t+Fn,s=r.firstCreatePass?dc(r,i,1,e,null):r.data[i],o=RV(r,n,s,e,t);n[i]=o,Ad()&&Pd(r,n,o,s),$i(s,!1)}var RV=(t,e,n,r,i)=>(Rd(!0),sF(e[st],r));function zi(t){return Cn("",t,""),zi}function Cn(t,e,n){let r=Le(),i=iV(r,t,e,n);return i!==po&&eL(r,fo(),i),Cn}function NV(t,e,n){let r=Wt();if(r.firstCreatePass){let i=Kr(t);_g(n,r.data,r.blueprint,i,!0),_g(e,r.data,r.blueprint,i,!1)}}function _g(t,e,n,r,i){if(t=Ot(t),Array.isArray(t))for(let s=0;s<t.length;s++)_g(t[s],e,n,r,i);else{let s=Wt(),o=Le(),a=Bt(),u=io(t)?t:Ot(t.provide),l=jD(t),h=a.providerIndexes&1048575,p=a.directiveStart,m=a.providerIndexes>>20;if(io(t)||!t.multi){let v=new Ui(l,i,Te),b=Um(u,e,i?h:h+m,p);b===-1?(Xm(sd(a,o),s,u),Vm(s,t,e.length),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(v),o.push(v)):(n[b]=v,o[b]=v)}else{let v=Um(u,e,h+m,p),b=Um(u,e,h,h+m),N=v>=0&&n[v],R=b>=0&&n[b];if(i&&!R||!i&&!N){Xm(sd(a,o),s,u);let P=PV(i?xV:MV,n.length,i,r,l);!i&&R&&(n[b].providerFactory=P),Vm(s,t,e.length,0),e.push(u),a.directiveStart++,a.directiveEnd++,i&&(a.providerIndexes+=1048576),n.push(P),o.push(P)}else{let P=o0(n[i?b:v],l,!i&&r);Vm(s,t,v>-1?v:b,P)}!i&&r&&R&&n[b].componentProviders++}}}function Vm(t,e,n,r){let i=io(e),s=kk(e);if(i||s){let u=(s?Ot(e.useClass):e).prototype.ngOnDestroy;if(u){let l=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let h=l.indexOf(n);h===-1?l.push(n,[r,u]):l[h+1].push(r,u)}else l.push(n,u)}}}function o0(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Um(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function MV(t,e,n,r){return wg(this.multi,[])}function xV(t,e,n,r){let i=this.multi,s;if(this.providerFactory){let o=this.providerFactory.componentProviders,a=co(n,n[pe],this.providerFactory.index,r);s=a.slice(0,o),wg(i,s);for(let u=o;u<a.length;u++)s.push(a[u])}else s=[],wg(i,s);return s}function wg(t,e){for(let n=0;n<t.length;n++){let r=t[n];e.push(r())}return e}function PV(t,e,n,r,i){let s=new Ui(t,n,Te);return s.multi=[],s.index=e,s.componentProviders=0,o0(s,i,r&&!n),s}function yo(t,e=[]){return n=>{n.providersResolver=(r,i)=>NV(r,i?i(t):t,e)}}var OV=(()=>{let e=class e{constructor(r){this._injector=r,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(r){if(!r.standalone)return null;if(!this.cachedInjectors.has(r)){let i=LD(!1,r.type),s=i.length>0?Bd([i],this._injector,`Standalone[${r.type.name}]`):null;this.cachedInjectors.set(r,s)}return this.cachedInjectors.get(r)}ngOnDestroy(){try{for(let r of this.cachedInjectors.values())r!==null&&r.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=$({token:e,providedIn:"environment",factory:()=>new e(K(Ct))});let t=e;return t})();function et(t){Ud("NgStandalone"),t.getStandaloneInjector=e=>e.get(OV).getOrCreateStandaloneInjector(t)}function Wd(t,e){return r0(t,e)}var pr=class{constructor(e){this.full=e;let n=e.split(".");this.major=n[0],this.minor=n[1],this.patch=n.slice(2).join(".")}},a0=new pr("17.3.10"),Kd=(()=>{let e=class e{log(r){console.log(r)}warn(r){console.warn(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"platform"});let t=e;return t})();var c0=new B("");function Wi(t){return!!t&&typeof t.then=="function"}function u0(t){return!!t&&typeof t.subscribe=="function"}var Qd=new B(""),l0=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,i)=>{this.resolve=r,this.reject=i}),this.appInits=M(Qd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let r=[];for(let s of this.appInits){let o=s();if(Wi(o))r.push(o);else if(u0(o)){let a=new Promise((u,l)=>{o.subscribe({complete:u,error:l})});r.push(a)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(r).then(()=>{i()}).catch(s=>{this.reject(s)}),r.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),hc=new B("");function kV(){oT(()=>{throw new G(600,!1)})}function FV(t){return t.isBoundToModule}function LV(t,e,n){try{let r=n();return Wi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}var vo=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=M(wb),this.afterRenderEffectManager=M(ay),this.externalTestViews=new Set,this.beforeRender=new It,this.afterTick=new It,this.componentTypes=[],this.components=[],this.isStable=M(go).hasPendingTasks.pipe(te(r=>!r)),this._injector=M(Ct)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(r,i){let s=r instanceof ld;if(!this._injector.get(l0).done){let v=!s&&PD(r),b=!1;throw new G(405,b)}let a;s?a=r:a=this._injector.get(Vd).resolveComponentFactory(r),this.componentTypes.push(a.componentType);let u=FV(a)?void 0:this._injector.get(Yr),l=i||a.selector,h=a.create(pt.NULL,[],l,u),p=h.location.nativeElement,m=h.injector.get(c0,null);return m?.registerApplication(p),h.onDestroy(()=>{this.detachView(h.hostView),jm(this.components,h),m?.unregisterApplication(p)}),this._loadComponent(h),h}tick(){this._tick(!0)}_tick(r){if(this._runningTick)throw new G(101,!1);let i=Ce(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(r)}catch(s){this.internalErrorHandler(s)}finally{this.afterTick.next(),this._runningTick=!1,Ce(i)}}detectChangesInAttachedViews(r){let i=0,s=this.afterRenderEffectManager;for(;;){if(i===Xb)throw new G(103,!1);if(r){let o=i===0;this.beforeRender.next(o);for(let{_lView:a,notifyErrorHandler:u}of this._views)VV(a,o,u)}if(i++,s.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ig(o))&&(s.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>Ig(o))))break}}attachView(r){let i=r;this._views.push(i),i.attachToAppRef(this)}detachView(r){let i=r;jm(this._views,i),i.detachFromAppRef()}_loadComponent(r){this.attachView(r.hostView),this.tick(),this.components.push(r);let i=this._injector.get(hc,[]);[...this._bootstrapListeners,...i].forEach(s=>s(r))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(r=>r()),this._views.slice().forEach(r=>r.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(r){return this._destroyListeners.push(r),()=>jm(this._destroyListeners,r)}destroy(){if(this._destroyed)throw new G(406,!1);let r=this._injector;r.destroy&&!r.destroyed&&r.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function jm(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function VV(t,e,n){!e&&!Ig(t)||UV(t,n,e)}function Ig(t){return Fg(t)}function UV(t,e,n){let r;n?(r=0,t[ee]|=1024):t[ee]&64?r=0:r=1,Zb(t,e,r)}var Eg=class{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},Yd=(()=>{let e=class e{compileModuleSync(r){return new gg(r)}compileModuleAsync(r){return Promise.resolve(this.compileModuleSync(r))}compileModuleAndAllComponentsSync(r){let i=this.compileModuleSync(r),s=OD(r),o=Mb(s.declarations).reduce((a,u)=>{let l=Wr(u);return l&&a.push(new uo(l)),a},[]);return new Eg(i,o)}compileModuleAndAllComponentsAsync(r){return Promise.resolve(this.compileModuleAndAllComponentsSync(r))}clearCache(){}clearCacheFor(r){}getModuleId(r){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var jV=(()=>{let e=class e{constructor(){this.zone=M(ye),this.applicationRef=M(vo)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function BV(t){return[{provide:ye,useFactory:t},{provide:ro,multi:!0,useFactory:()=>{let e=M(jV,{optional:!0});return()=>e.initialize()}},{provide:ro,multi:!0,useFactory:()=>{let e=M(GV);return()=>{e.initialize()}}},{provide:wb,useFactory:$V}]}function $V(){let t=M(ye),e=M(Vn);return n=>t.runOutsideAngular(()=>e.handleError(n))}function qV(t){let e=BV(()=>new ye(HV(t)));return jt([[],e])}function HV(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var GV=(()=>{let e=class e{constructor(){this.subscription=new ze,this.initialized=!1,this.zone=M(ye),this.pendingTasks=M(go)}initialize(){if(this.initialized)return;this.initialized=!0;let r=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(r=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ye.assertNotInAngularZone(),queueMicrotask(()=>{r!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(r),r=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ye.assertInAngularZone(),r??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function zV(){return typeof $localize<"u"&&$localize.locale||md}var uy=new B("",{providedIn:"root",factory:()=>M(uy,ce.Optional|ce.SkipSelf)||zV()});var d0=new B("");var Ql=null;function WV(t=[],e){return pt.create({name:e,providers:[{provide:Id,useValue:"platform"},{provide:d0,useValue:new Set([()=>Ql=null])},...t]})}function KV(t=[]){if(Ql)return Ql;let e=WV(t);return Ql=e,kV(),QV(e),e}function QV(t){t.get(Gg,null)?.forEach(n=>n())}var _o=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=YV;let t=e;return t})();function YV(t){return JV(Bt(),Le(),(t&16)===16)}function JV(t,e,n){if(Td(t)&&!n){let r=Zr(t.index,e);return new ji(r,r)}else if(t.type&47){let r=e[kn];return new ji(r,e)}return null}var Cg=class{constructor(){}supports(e){return s0(e)}create(e){return new Tg(e)}},XV=(t,e)=>e,Tg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||XV}forEachItem(e){let n;for(n=this._itHead;n!==null;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,i=0,s=null;for(;n||r;){let o=!r||n&&n.currentIndex<fD(r,i,s)?n:r,a=fD(o,i,s),u=o.currentIndex;if(o===r)i--,r=r._nextRemoved;else if(n=n._next,o.previousIndex==null)i++;else{s||(s=[]);let l=a-i,h=u-i;if(l!=h){for(let m=0;m<l;m++){let v=m<s.length?s[m]:s[m]=0,b=v+m;h<=b&&b<l&&(s[m]=v+1)}let p=o.previousIndex;s[p]=h-l}}a!==u&&e(o,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)e(n)}diff(e){if(e==null&&(e=[]),!s0(e))throw new G(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._itHead,r=!1,i,s,o;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)s=e[a],o=this._trackByFn(a,s),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,s,o,a),r=!0):(r&&(n=this._verifyReinsertion(n,s,o,a)),Object.is(n.item,s)||this._addIdentityChange(n,s)),n=n._next}else i=0,XL(e,a=>{o=this._trackByFn(i,a),n===null||!Object.is(n.trackById,o)?(n=this._mismatch(n,a,o,i),r=!0):(r&&(n=this._verifyReinsertion(n,a,o,i)),Object.is(n.item,a)||this._addIdentityChange(n,a)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,i){let s;return e===null?s=this._itTail:(s=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,s,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,i),e!==null?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,s,i)):e=this._addAfter(new Dg(n,r),s,i)),e}_verifyReinsertion(e,n,r,i){let s=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return s!==null?e=this._reinsertAfter(s,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let n=e._next;this._addToRemovals(this._unlink(e)),e=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,s=e._nextRemoved;return i===null?this._removalsHead=s:i._nextRemoved=s,s===null?this._removalsTail=i:s._prevRemoved=i,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){let i=n===null?this._itHead:n._next;return e._next=i,e._prev=n,i===null?this._itTail=e:i._prev=e,n===null?this._itHead=e:n._next=e,this._linkedRecords===null&&(this._linkedRecords=new gd),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let n=e._prev,r=e._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new gd),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Dg=class{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},bg=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let n=e._prevDup,r=e._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}},gd=class{constructor(){this.map=new Map}put(e){let n=e.trackById,r=this.map.get(n);r||(r=new bg,this.map.set(n,r)),r.add(e)}get(e,n){let r=e,i=this.map.get(r);return i?i.get(e,n):null}remove(e){let n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function fD(t,e,n){let r=t.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}function pD(){return new ly([new Cg])}var ly=(()=>{let e=class e{constructor(r){this.factories=r}static create(r,i){if(i!=null){let s=i.factories.slice();r=r.concat(s)}return new e(r)}static extend(r){return{provide:e,useFactory:i=>e.create(r,i||pD()),deps:[[e,new Ag,new We]]}}find(r){let i=this.factories.find(s=>s.supports(r));if(i!=null)return i;throw new G(901,!1)}};e.\u0275prov=$({token:e,providedIn:"root",factory:pD});let t=e;return t})();function h0(t){try{let{rootComponent:e,appProviders:n,platformProviders:r}=t,i=KV(r),s=[qV(),...n||[]],a=new fd({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,u=a.get(ye);return u.run(()=>{a.resolveInjectorInitializers();let l=a.get(Vn,null),h;u.runOutsideAngular(()=>{h=u.onError.subscribe({next:v=>{l.handleError(v)}})});let p=()=>a.destroy(),m=i.get(d0);return m.add(p),a.onDestroy(()=>{h.unsubscribe(),m.delete(p)}),LV(l,u,()=>{let v=a.get(l0);return v.runInitializers(),v.donePromise.then(()=>{let b=a.get(uy,md);bV(b||md);let N=a.get(vo);return e!==void 0&&N.bootstrap(e),N})})})}catch(e){return Promise.reject(e)}}function wo(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}function f0(t){let e=Wr(t);if(!e)return null;let n=new uo(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var v0=null;function wr(){return v0}function _0(t){v0??=t}var Jd=class{};var Dt=new B(""),my=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>M(ZV),providedIn:"platform"});let t=e;return t})(),w0=new B(""),ZV=(()=>{let e=class e extends my{constructor(){super(),this._doc=M(Dt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return wr().getBaseHref(this._doc)}onPopState(r){let i=wr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("popstate",r,!1),()=>i.removeEventListener("popstate",r)}onHashChange(r){let i=wr().getGlobalEventTarget(this._doc,"window");return i.addEventListener("hashchange",r,!1),()=>i.removeEventListener("hashchange",r)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(r){this._location.pathname=r}pushState(r,i,s){this._history.pushState(r,i,s)}replaceState(r,i,s){this._history.replaceState(r,i,s)}forward(){this._history.forward()}back(){this._history.back()}historyGo(r=0){this._history.go(r)}getState(){return this._history.state}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>new e,providedIn:"platform"});let t=e;return t})();function gy(t,e){if(t.length==0)return e;if(e.length==0)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,n==2?t+e.substring(1):n==1?t+e:t+"/"+e}function p0(t){let e=t.match(/#|\?|$/),n=e&&e.index||t.length,r=n-(t[n-1]==="/"?1:0);return t.slice(0,r)+t.slice(n)}function _r(t){return t&&t[0]!=="?"?"?"+t:t}var Ir=(()=>{let e=class e{historyGo(r){throw new Error("")}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>M(yy),providedIn:"root"});let t=e;return t})(),I0=new B(""),yy=(()=>{let e=class e extends Ir{constructor(r,i){super(),this._platformLocation=r,this._removeListenerFns=[],this._baseHref=i??this._platformLocation.getBaseHrefFromDOM()??M(Dt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}prepareExternalUrl(r){return gy(this._baseHref,r)}path(r=!1){let i=this._platformLocation.pathname+_r(this._platformLocation.search),s=this._platformLocation.hash;return s&&r?`${i}${s}`:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+_r(o));this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+_r(o));this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(K(my),K(I0,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),E0=(()=>{let e=class e extends Ir{constructor(r,i){super(),this._platformLocation=r,this._baseHref="",this._removeListenerFns=[],i!=null&&(this._baseHref=i)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(r){this._removeListenerFns.push(this._platformLocation.onPopState(r),this._platformLocation.onHashChange(r))}getBaseHref(){return this._baseHref}path(r=!1){let i=this._platformLocation.hash??"#";return i.length>0?i.substring(1):i}prepareExternalUrl(r){let i=gy(this._baseHref,r);return i.length>0?"#"+i:i}pushState(r,i,s,o){let a=this.prepareExternalUrl(s+_r(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.pushState(r,i,a)}replaceState(r,i,s,o){let a=this.prepareExternalUrl(s+_r(o));a.length==0&&(a=this._platformLocation.pathname),this._platformLocation.replaceState(r,i,a)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(r=0){this._platformLocation.historyGo?.(r)}};e.\u0275fac=function(i){return new(i||e)(K(my),K(I0,8))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Eo=(()=>{let e=class e{constructor(r){this._subject=new Xe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=r;let i=this._locationStrategy.getBaseHref();this._basePath=nU(p0(m0(i))),this._locationStrategy.onPopState(s=>{this._subject.emit({url:this.path(!0),pop:!0,state:s.state,type:s.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(r=!1){return this.normalize(this._locationStrategy.path(r))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(r,i=""){return this.path()==this.normalize(r+_r(i))}normalize(r){return e.stripTrailingSlash(tU(this._basePath,m0(r)))}prepareExternalUrl(r){return r&&r[0]!=="/"&&(r="/"+r),this._locationStrategy.prepareExternalUrl(r)}go(r,i="",s=null){this._locationStrategy.pushState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+_r(i)),s)}replaceState(r,i="",s=null){this._locationStrategy.replaceState(s,"",r,i),this._notifyUrlChangeListeners(this.prepareExternalUrl(r+_r(i)),s)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(r=0){this._locationStrategy.historyGo?.(r)}onUrlChange(r){return this._urlChangeListeners.push(r),this._urlChangeSubscription??=this.subscribe(i=>{this._notifyUrlChangeListeners(i.url,i.state)}),()=>{let i=this._urlChangeListeners.indexOf(r);this._urlChangeListeners.splice(i,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(r="",i){this._urlChangeListeners.forEach(s=>s(r,i))}subscribe(r,i,s){return this._subject.subscribe({next:r,error:i,complete:s})}};e.normalizeQueryParams=_r,e.joinWithSlash=gy,e.stripTrailingSlash=p0,e.\u0275fac=function(i){return new(i||e)(K(Ir))},e.\u0275prov=$({token:e,factory:()=>eU(),providedIn:"root"});let t=e;return t})();function eU(){return new Eo(K(Ir))}function tU(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function m0(t){return t.replace(/\/index.html$/,"")}function nU(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function Xd(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,s]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}var dy=class{constructor(e,n,r,i){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Zd=(()=>{let e=class e{set ngForOf(r){this._ngForOf=r,this._ngForOfDirty=!0}set ngForTrackBy(r){this._trackByFn=r}get ngForTrackBy(){return this._trackByFn}constructor(r,i,s){this._viewContainer=r,this._template=i,this._differs=s,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(r){r&&(this._template=r)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let r=this._ngForOf;if(!this._differ&&r)if(0)try{}catch{}else this._differ=this._differs.find(r).create(this.ngForTrackBy)}if(this._differ){let r=this._differ.diff(this._ngForOf);r&&this._applyChanges(r)}}_applyChanges(r){let i=this._viewContainer;r.forEachOperation((s,o,a)=>{if(s.previousIndex==null)i.createEmbeddedView(this._template,new dy(s.item,this._ngForOf,-1,-1),a===null?void 0:a);else if(a==null)i.remove(o===null?void 0:o);else if(o!==null){let u=i.get(o);i.move(u,a),g0(u,s)}});for(let s=0,o=i.length;s<o;s++){let u=i.get(s).context;u.index=s,u.count=o,u.ngForOf=this._ngForOf}r.forEachIdentityChange(s=>{let o=i.get(s.currentIndex);g0(o,s)})}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Te(mo),Te(Ld),Te(ly))},e.\u0275dir=ft({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function g0(t,e){t.context.$implicit=e.item}var cn=(()=>{let e=class e{constructor(r,i){this._viewContainer=r,this._context=new hy,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(r){this._context.$implicit=this._context.ngIf=r,this._updateView()}set ngIfThen(r){y0("ngIfThen",r),this._thenTemplateRef=r,this._thenViewRef=null,this._updateView()}set ngIfElse(r){y0("ngIfElse",r),this._elseTemplateRef=r,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(r,i){return!0}};e.\u0275fac=function(i){return new(i||e)(Te(mo),Te(Ld))},e.\u0275dir=ft({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),hy=class{constructor(){this.$implicit=null,this.ngIf=null}};function y0(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${kt(e)}'.`)}var Qt=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Un({});let t=e;return t})(),vy="browser",rU="server";function iU(t){return t===vy}function eh(t){return t===rU}var C0=(()=>{let e=class e{};e.\u0275prov=$({token:e,providedIn:"root",factory:()=>iU(M(an))?new fy(M(Dt),window):new py});let t=e;return t})(),fy=class{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let n=sU(this.document,e);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,i=n.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}};function sU(t,e){let n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if(typeof t.createTreeWalker=="function"&&t.body&&typeof t.body.attachShadow=="function"){let r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;for(;i;){let s=i.shadowRoot;if(s){let o=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(o)return o}i=r.nextNode()}}return null}var py=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},Io=class{};var pc=class{},nh=class{},Ki=class t{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),s=i.toLowerCase(),o=n.slice(r+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.setHeaderEntries(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let s=e.value;if(!s)this.headers.delete(n),this.normalizedNames.delete(n);else{let o=this.headers.get(n);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,o)}break}}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(s=>s.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var wy=class{encodeKey(e){return T0(e)}encodeValue(e){return T0(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function cU(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,s)),e.decodeValue(i.slice(s+1))],u=n.get(o)||[];u.push(a),n.set(o,u)}),n}var uU=/%(\d[a-f0-9])/gi,lU={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function T0(t){return encodeURIComponent(t).replace(uU,(e,n)=>lU[n]??e)}function th(t){return`${t}`}var ni=class t{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new wy,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=cU(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(th):[th(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(s=>{n.push({param:r,value:s,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(th(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(th(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Iy=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function dU(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function D0(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function b0(t){return typeof Blob<"u"&&t instanceof Blob}function S0(t){return typeof FormData<"u"&&t instanceof FormData}function hU(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var fc=class t{constructor(e,n,r,i){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(dU(this.method)||i?(this.body=r!==void 0?r:null,s=i):s=r,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Ki,this.context??=new Iy,!this.params)this.params=new ni,this.urlWithParams=n;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),u=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+u+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||D0(this.body)||b0(this.body)||S0(this.body)||hU(this.body)?this.body:this.body instanceof ni?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||S0(this.body)?null:b0(this.body)?this.body.type||null:D0(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof ni?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,u=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((m,v)=>m.set(v,e.setHeaders[v]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,v)=>m.set(v,e.setParams[v]),h)),new t(n,r,o,{params:h,headers:l,context:p,reportProgress:u,responseType:i,withCredentials:a,transferCache:s})}},Co=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(Co||{}),mc=class{constructor(e,n=sh.Ok,r="OK"){this.headers=e.headers||new Ki,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Ey=class t extends mc{constructor(e={}){super(e),this.type=Co.ResponseHeader}clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},rh=class t extends mc{constructor(e={}){super(e),this.type=Co.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},ih=class extends mc{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},sh=function(t){return t[t.Continue=100]="Continue",t[t.SwitchingProtocols=101]="SwitchingProtocols",t[t.Processing=102]="Processing",t[t.EarlyHints=103]="EarlyHints",t[t.Ok=200]="Ok",t[t.Created=201]="Created",t[t.Accepted=202]="Accepted",t[t.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",t[t.NoContent=204]="NoContent",t[t.ResetContent=205]="ResetContent",t[t.PartialContent=206]="PartialContent",t[t.MultiStatus=207]="MultiStatus",t[t.AlreadyReported=208]="AlreadyReported",t[t.ImUsed=226]="ImUsed",t[t.MultipleChoices=300]="MultipleChoices",t[t.MovedPermanently=301]="MovedPermanently",t[t.Found=302]="Found",t[t.SeeOther=303]="SeeOther",t[t.NotModified=304]="NotModified",t[t.UseProxy=305]="UseProxy",t[t.Unused=306]="Unused",t[t.TemporaryRedirect=307]="TemporaryRedirect",t[t.PermanentRedirect=308]="PermanentRedirect",t[t.BadRequest=400]="BadRequest",t[t.Unauthorized=401]="Unauthorized",t[t.PaymentRequired=402]="PaymentRequired",t[t.Forbidden=403]="Forbidden",t[t.NotFound=404]="NotFound",t[t.MethodNotAllowed=405]="MethodNotAllowed",t[t.NotAcceptable=406]="NotAcceptable",t[t.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",t[t.RequestTimeout=408]="RequestTimeout",t[t.Conflict=409]="Conflict",t[t.Gone=410]="Gone",t[t.LengthRequired=411]="LengthRequired",t[t.PreconditionFailed=412]="PreconditionFailed",t[t.PayloadTooLarge=413]="PayloadTooLarge",t[t.UriTooLong=414]="UriTooLong",t[t.UnsupportedMediaType=415]="UnsupportedMediaType",t[t.RangeNotSatisfiable=416]="RangeNotSatisfiable",t[t.ExpectationFailed=417]="ExpectationFailed",t[t.ImATeapot=418]="ImATeapot",t[t.MisdirectedRequest=421]="MisdirectedRequest",t[t.UnprocessableEntity=422]="UnprocessableEntity",t[t.Locked=423]="Locked",t[t.FailedDependency=424]="FailedDependency",t[t.TooEarly=425]="TooEarly",t[t.UpgradeRequired=426]="UpgradeRequired",t[t.PreconditionRequired=428]="PreconditionRequired",t[t.TooManyRequests=429]="TooManyRequests",t[t.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",t[t.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",t[t.InternalServerError=500]="InternalServerError",t[t.NotImplemented=501]="NotImplemented",t[t.BadGateway=502]="BadGateway",t[t.ServiceUnavailable=503]="ServiceUnavailable",t[t.GatewayTimeout=504]="GatewayTimeout",t[t.HttpVersionNotSupported=505]="HttpVersionNotSupported",t[t.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",t[t.InsufficientStorage=507]="InsufficientStorage",t[t.LoopDetected=508]="LoopDetected",t[t.NotExtended=510]="NotExtended",t[t.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",t}(sh||{});function _y(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,transferCache:t.transferCache}}var gc=(()=>{let e=class e{constructor(r){this.handler=r}request(r,i,s={}){let o;if(r instanceof fc)o=r;else{let l;s.headers instanceof Ki?l=s.headers:l=new Ki(s.headers);let h;s.params&&(s.params instanceof ni?h=s.params:h=new ni({fromObject:s.params})),o=new fc(r,i,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Y(o).pipe(dr(l=>this.handler.handle(l)));if(r instanceof fc||s.observe==="events")return a;let u=a.pipe(Pt(l=>l instanceof rh));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return u.pipe(te(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return u.pipe(te(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return u.pipe(te(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return u.pipe(te(l=>l.body))}case"response":return u;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(r,i={}){return this.request("DELETE",r,i)}get(r,i={}){return this.request("GET",r,i)}head(r,i={}){return this.request("HEAD",r,i)}jsonp(r,i){return this.request("JSONP",r,{params:new ni().append(i,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(r,i={}){return this.request("OPTIONS",r,i)}patch(r,i,s={}){return this.request("PATCH",r,_y(s,i))}post(r,i,s={}){return this.request("POST",r,_y(s,i))}put(r,i,s={}){return this.request("PUT",r,_y(s,i))}};e.\u0275fac=function(i){return new(i||e)(K(pc))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function fU(t,e){return e(t)}function pU(t,e,n){return(r,i)=>In(n,()=>e(r,s=>t(s,i)))}var N0=new B(""),mU=new B(""),gU=new B("");var A0=(()=>{let e=class e extends pc{constructor(r,i){super(),this.backend=r,this.injector=i,this.chain=null,this.pendingTasks=M(go);let s=M(gU,{optional:!0});this.backend=s??r}handle(r){if(this.chain===null){let s=Array.from(new Set([...this.injector.get(N0),...this.injector.get(mU,[])]));this.chain=s.reduceRight((o,a)=>pU(o,a,this.injector),fU)}let i=this.pendingTasks.add();return this.chain(r,s=>this.backend.handle(s)).pipe(xi(()=>this.pendingTasks.remove(i)))}};e.\u0275fac=function(i){return new(i||e)(K(nh),K(Ct))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();var yU=/^\)\]\}',?\n/;function vU(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}var R0=(()=>{let e=class e{constructor(r){this.xhrFactory=r}handle(r){if(r.method==="JSONP")throw new G(-2800,!1);let i=this.xhrFactory;return(i.\u0275loadImpl?Pe(i.\u0275loadImpl()):Y(null)).pipe(Ut(()=>new ae(o=>{let a=i.build();if(a.open(r.method,r.urlWithParams),r.withCredentials&&(a.withCredentials=!0),r.headers.forEach((R,P)=>a.setRequestHeader(R,P.join(","))),r.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!r.headers.has("Content-Type")){let R=r.detectContentTypeHeader();R!==null&&a.setRequestHeader("Content-Type",R)}if(r.responseType){let R=r.responseType.toLowerCase();a.responseType=R!=="json"?R:"text"}let u=r.serializeBody(),l=null,h=()=>{if(l!==null)return l;let R=a.statusText||"OK",P=new Ki(a.getAllResponseHeaders()),q=vU(a)||r.url;return l=new Ey({headers:P,status:a.status,statusText:R,url:q}),l},p=()=>{let{headers:R,status:P,statusText:q,url:H}=h(),W=null;P!==sh.NoContent&&(W=typeof a.response>"u"?a.responseText:a.response),P===0&&(P=W?sh.Ok:0);let xe=P>=200&&P<300;if(r.responseType==="json"&&typeof W=="string"){let ne=W;W=W.replace(yU,"");try{W=W!==""?JSON.parse(W):null}catch(C){W=ne,xe&&(xe=!1,W={error:C,text:W})}}xe?(o.next(new rh({body:W,headers:R,status:P,statusText:q,url:H||void 0})),o.complete()):o.error(new ih({error:W,headers:R,status:P,statusText:q,url:H||void 0}))},m=R=>{let{url:P}=h(),q=new ih({error:R,status:a.status||0,statusText:a.statusText||"Unknown Error",url:P||void 0});o.error(q)},v=!1,b=R=>{v||(o.next(h()),v=!0);let P={type:Co.DownloadProgress,loaded:R.loaded};R.lengthComputable&&(P.total=R.total),r.responseType==="text"&&a.responseText&&(P.partialText=a.responseText),o.next(P)},N=R=>{let P={type:Co.UploadProgress,loaded:R.loaded};R.lengthComputable&&(P.total=R.total),o.next(P)};return a.addEventListener("load",p),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),r.reportProgress&&(a.addEventListener("progress",b),u!==null&&a.upload&&a.upload.addEventListener("progress",N)),a.send(u),o.next({type:Co.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",p),a.removeEventListener("timeout",m),r.reportProgress&&(a.removeEventListener("progress",b),u!==null&&a.upload&&a.upload.removeEventListener("progress",N)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(i){return new(i||e)(K(Io))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),M0=new B(""),_U="XSRF-TOKEN",wU=new B("",{providedIn:"root",factory:()=>_U}),IU="X-XSRF-TOKEN",EU=new B("",{providedIn:"root",factory:()=>IU}),oh=class{},CU=(()=>{let e=class e{constructor(r,i,s){this.doc=r,this.platform=i,this.cookieName=s,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let r=this.doc.cookie||"";return r!==this.lastCookieString&&(this.parseCount++,this.lastToken=Xd(r,this.cookieName),this.lastCookieString=r),this.lastToken}};e.\u0275fac=function(i){return new(i||e)(K(Dt),K(an),K(wU))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function TU(t,e){let n=t.url.toLowerCase();if(!M(M0)||t.method==="GET"||t.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(t);let r=M(oh).getToken(),i=M(EU);return r!=null&&!t.headers.has(i)&&(t=t.clone({headers:t.headers.set(i,r)})),e(t)}function x0(...t){let e=[gc,R0,A0,{provide:pc,useExisting:A0},{provide:nh,useExisting:R0},{provide:N0,useValue:TU,multi:!0},{provide:M0,useValue:!0},{provide:oh,useClass:CU}];for(let n of t)e.push(...n.\u0275providers);return jt(e)}var Dy=class extends Jd{constructor(){super(...arguments),this.supportsDOMEvents=!0}},by=class t extends Dy{static makeCurrent(){_0(new t)}onAndCancel(e,n,r){return e.addEventListener(n,r),()=>{e.removeEventListener(n,r)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=DU();return n==null?null:bU(n)}resetBaseElement(){yc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xd(document.cookie,e)}},yc=null;function DU(){return yc=yc||document.querySelector("base"),yc?yc.getAttribute("href"):null}function bU(t){return new URL(t,document.baseURI).pathname}var SU=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Sy=new B(""),F0=(()=>{let e=class e{constructor(r,i){this._zone=i,this._eventNameToPlugin=new Map,r.forEach(s=>{s.manager=this}),this._plugins=r.slice().reverse()}addEventListener(r,i,s){return this._findPluginFor(i).addEventListener(r,i,s)}getZone(){return this._zone}_findPluginFor(r){let i=this._eventNameToPlugin.get(r);if(i)return i;if(i=this._plugins.find(o=>o.supports(r)),!i)throw new G(5101,!1);return this._eventNameToPlugin.set(r,i),i}};e.\u0275fac=function(i){return new(i||e)(K(Sy),K(ye))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),ah=class{constructor(e){this._doc=e}},Cy="ng-app-id",L0=(()=>{let e=class e{constructor(r,i,s,o={}){this.doc=r,this.appId=i,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=eh(o),this.resetHostNodes()}addStyles(r){for(let i of r)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(r){for(let i of r)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let r=this.styleNodesInDOM;r&&(r.forEach(i=>i.remove()),r.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(r){this.hostNodes.add(r);for(let i of this.getAllStyles())this.addStyleToHost(r,i)}removeHost(r){this.hostNodes.delete(r)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(r){for(let i of this.hostNodes)this.addStyleToHost(i,r)}onStyleRemoved(r){let i=this.styleRef;i.get(r)?.elements?.forEach(s=>s.remove()),i.delete(r)}collectServerRenderedStyles(){let r=this.doc.head?.querySelectorAll(`style[${Cy}="${this.appId}"]`);if(r?.length){let i=new Map;return r.forEach(s=>{s.textContent!=null&&i.set(s.textContent,s)}),i}return null}changeUsageCount(r,i){let s=this.styleRef;if(s.has(r)){let o=s.get(r);return o.usage+=i,o.usage}return s.set(r,{usage:i,elements:[]}),i}getStyleElement(r,i){let s=this.styleNodesInDOM,o=s?.get(i);if(o?.parentNode===r)return s.delete(i),o.removeAttribute(Cy),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=i,this.platformIsServer&&a.setAttribute(Cy,this.appId),r.appendChild(a),a}}addStyleToHost(r,i){let s=this.getStyleElement(r,i),o=this.styleRef,a=o.get(i)?.elements;a?a.push(s):o.set(i,{elements:[s],usage:1})}resetHostNodes(){let r=this.hostNodes;r.clear(),r.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(K(Dt),K(Hg),K(zg,8),K(an))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),Ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ry=/%COMP%/g,V0="%COMP%",AU=`_nghost-${V0}`,RU=`_ngcontent-${V0}`,NU=!0,MU=new B("",{providedIn:"root",factory:()=>NU});function xU(t){return RU.replace(Ry,t)}function PU(t){return AU.replace(Ry,t)}function U0(t,e){return e.map(n=>n.replace(Ry,t))}var P0=(()=>{let e=class e{constructor(r,i,s,o,a,u,l,h=null){this.eventManager=r,this.sharedStylesHost=i,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=u,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=eh(u),this.defaultRenderer=new vc(r,a,l,this.platformIsServer)}createRenderer(r,i){if(!r||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===On.ShadowDom&&(i=Ee(L({},i),{encapsulation:On.Emulated}));let s=this.getOrCreateRenderer(r,i);return s instanceof ch?s.applyToHost(r):s instanceof _c&&s.applyStyles(),s}getOrCreateRenderer(r,i){let s=this.rendererByCompId,o=s.get(i.id);if(!o){let a=this.doc,u=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(i.encapsulation){case On.Emulated:o=new ch(l,h,i,this.appId,p,a,u,m);break;case On.ShadowDom:return new Ay(l,h,r,i,a,u,this.nonce,m);default:o=new _c(l,h,i,p,a,u,m);break}s.set(i.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(K(F0),K(L0),K(Hg),K(MU),K(Dt),K(an),K(ye),K(zg))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),vc=class{constructor(e,n,r,i){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Ty[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(O0(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(O0(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new G(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let s=Ty[i];s?e.setAttributeNS(s,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=Ty[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(fr.DashCase|fr.Important)?e.style.setProperty(n,r,i&fr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&fr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r){if(typeof e=="string"&&(e=wr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(r))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function O0(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var Ay=class extends vc{constructor(e,n,r,i,s,o,a,u){super(e,s,o,u),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=U0(i.id,i.styles);for(let h of l){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_c=class extends vc{constructor(e,n,r,i,s,o,a,u){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i,this.styles=u?U0(u,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ch=class extends _c{constructor(e,n,r,i,s,o,a,u){let l=i+"-"+r.id;super(e,n,r,s,o,a,u,l),this.contentAttr=xU(l),this.hostAttr=PU(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}},OU=(()=>{let e=class e extends ah{constructor(r){super(r)}supports(r){return!0}addEventListener(r,i,s){return r.addEventListener(i,s,!1),()=>this.removeEventListener(r,i,s)}removeEventListener(r,i,s){return r.removeEventListener(i,s)}};e.\u0275fac=function(i){return new(i||e)(K(Dt))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})(),k0=["alt","control","meta","shift"],kU={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},FU={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},LU=(()=>{let e=class e extends ah{constructor(r){super(r)}supports(r){return e.parseEventName(r)!=null}addEventListener(r,i,s){let o=e.parseEventName(i),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>wr().onAndCancel(r,o.domEventName,a))}static parseEventName(r){let i=r.toLowerCase().split("."),s=i.shift();if(i.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(i.pop()),a="",u=i.indexOf("code");if(u>-1&&(i.splice(u,1),a="code."),k0.forEach(h=>{let p=i.indexOf(h);p>-1&&(i.splice(p,1),a+=h+".")}),a+=o,i.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(r,i){let s=kU[r.key]||r.key,o="";return i.indexOf("code.")>-1&&(s=r.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),k0.forEach(a=>{if(a!==s){let u=FU[a];u(r)&&(o+=a+".")}}),o+=s,o===i)}static eventCallback(r,i,s){return o=>{e.matchEventFullKeyCode(o,r)&&s.runGuarded(()=>i(o))}}static _normalizeKey(r){return r==="esc"?"escape":r}};e.\u0275fac=function(i){return new(i||e)(K(Dt))},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function j0(t,e){return h0(L({rootComponent:t},VU(e)))}function VU(t){return{appProviders:[...qU,...t?.providers??[]],platformProviders:$U}}function UU(){by.makeCurrent()}function jU(){return new Vn}function BU(){return bb(document),document}var $U=[{provide:an,useValue:vy},{provide:Gg,useValue:UU,multi:!0},{provide:Dt,useFactory:BU,deps:[]}];var qU=[{provide:Id,useValue:"root"},{provide:Vn,useFactory:jU,deps:[]},{provide:Sy,useClass:OU,multi:!0,deps:[Dt,ye,an]},{provide:Sy,useClass:LU,multi:!0,deps:[Dt]},P0,L0,F0,{provide:sc,useExisting:P0},{provide:Io,useClass:SU,deps:[]},[]];var B0=(()=>{let e=class e{constructor(r){this._doc=r}getTitle(){return this._doc.title}setTitle(r){this._doc.title=r||""}};e.\u0275fac=function(i){return new(i||e)(K(Dt))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var oe="primary",kc=Symbol("RouteTitle"),Oy=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ao(t){return new Oy(t)}function GU(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let s=0;s<r.length;s++){let o=r[s],a=t[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function zU(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!$n(t[n],e[n]))return!1;return!0}function $n(t,e){let n=t?ky(t):void 0,r=e?ky(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Y0(t[i],e[i]))return!1;return!0}function ky(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function Y0(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,s)=>r[s]===i)}else return t===e}function J0(t){return t.length>0?t[t.length-1]:null}function ai(t){return Im(t)?t:Wi(t)?Pe(Promise.resolve(t)):Y(t)}var WU={exact:Z0,subset:eS},X0={exact:KU,subset:QU,ignored:()=>!0};function $0(t,e,n){return WU[n.paths](t.root,e.root,n.matrixParams)&&X0[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function KU(t,e){return $n(t,e)}function Z0(t,e,n){if(!Yi(t.segments,e.segments)||!dh(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!Z0(t.children[r],e.children[r],n))return!1;return!0}function QU(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Y0(t[n],e[n]))}function eS(t,e,n){return tS(t,e,e.segments,n)}function tS(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!Yi(i,n)||e.hasChildren()||!dh(i,n,r))}else if(t.segments.length===n.length){if(!Yi(t.segments,n)||!dh(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!eS(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!Yi(t.segments,i)||!dh(t.segments,i,r)||!t.children[oe]?!1:tS(t.children[oe],e,s,r)}}function dh(t,e,n){return e.every((r,i)=>X0[n](t[i].parameters,r.parameters))}var ri=class{constructor(e=new Se([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ao(this.queryParams),this._queryParamMap}toString(){return XU.serialize(this)}},Se=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return hh(this)}},Qi=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ao(this.parameters),this._parameterMap}toString(){return rS(this)}};function YU(t,e){return Yi(t,e)&&t.every((n,r)=>$n(n.parameters,e[r].parameters))}function Yi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function JU(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===oe&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==oe&&(n=n.concat(e(i,r)))}),n}var Fc=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>new bc,providedIn:"root"});let t=e;return t})(),bc=class{parse(e){let n=new Ly(e);return new ri(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${wc(e.root,!0)}`,r=tj(e.queryParams),i=typeof e.fragment=="string"?`#${ZU(e.fragment)}`:"";return`${n}${r}${i}`}},XU=new bc;function hh(t){return t.segments.map(e=>rS(e)).join("/")}function wc(t,e){if(!t.hasChildren())return hh(t);if(e){let n=t.children[oe]?wc(t.children[oe],!1):"",r=[];return Object.entries(t.children).forEach(([i,s])=>{i!==oe&&r.push(`${i}:${wc(s,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=JU(t,(r,i)=>i===oe?[wc(t.children[oe],!1)]:[`${i}:${wc(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[oe]!=null?`${hh(t)}/${n[0]}`:`${hh(t)}/(${n.join("//")})`}}function nS(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function uh(t){return nS(t).replace(/%3B/gi,";")}function ZU(t){return encodeURI(t)}function Fy(t){return nS(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fh(t){return decodeURIComponent(t)}function q0(t){return fh(t.replace(/\+/g,"%20"))}function rS(t){return`${Fy(t.path)}${ej(t.parameters)}`}function ej(t){return Object.entries(t).map(([e,n])=>`;${Fy(e)}=${Fy(n)}`).join("")}function tj(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${uh(n)}=${uh(i)}`).join("&"):`${uh(n)}=${uh(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var nj=/^[^\/()?;#]+/;function Ny(t){let e=t.match(nj);return e?e[0]:""}var rj=/^[^\/()?;=#]+/;function ij(t){let e=t.match(rj);return e?e[0]:""}var sj=/^[^=?&#]+/;function oj(t){let e=t.match(sj);return e?e[0]:""}var aj=/^[^&#]+/;function cj(t){let e=t.match(aj);return e?e[0]:""}var Ly=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[oe]=new Se(e,n)),r}parseSegment(){let e=Ny(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Qi(fh(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ij(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=Ny(this.remaining);i&&(r=i,this.capture(r))}e[fh(n)]=fh(r)}parseQueryParam(e){let n=oj(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let o=cj(this.remaining);o&&(r=o,this.capture(r))}let i=q0(n),s=q0(r);if(e.hasOwnProperty(i)){let o=e[i];Array.isArray(o)||(o=[o],e[i]=o),o.push(s)}else e[i]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Ny(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new G(4010,!1);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=oe);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[oe]:new Se([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function iS(t){return t.segments.length>0?new Se([],{[oe]:t}):t}function sS(t){let e={};for(let[r,i]of Object.entries(t.children)){let s=sS(i);if(r===oe&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[r]=s)}let n=new Se(t.segments,e);return uj(n)}function uj(t){if(t.numberOfChildren===1&&t.children[oe]){let e=t.children[oe];return new Se(t.segments.concat(e.segments),e.children)}return t}function Ro(t){return t instanceof ri}function lj(t,e,n=null,r=null){let i=oS(t);return aS(i,e,n,r)}function oS(t){let e;function n(s){let o={};for(let u of s.children){let l=n(u);o[u.outlet]=l}let a=new Se(s.url,o);return s===t&&(e=a),a}let r=n(t.root),i=iS(r);return e??i}function aS(t,e,n,r){let i=t;for(;i.parent;)i=i.parent;if(e.length===0)return My(i,i,i,n,r);let s=dj(e);if(s.toRoot())return My(i,i,new Se([],{}),n,r);let o=hj(s,i,t),a=o.processChildren?Cc(o.segmentGroup,o.index,s.commands):uS(o.segmentGroup,o.index,s.commands);return My(i,o.segmentGroup,a,n,r)}function ph(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Sc(t){return typeof t=="object"&&t!=null&&t.outlets}function My(t,e,n,r,i){let s={};r&&Object.entries(r).forEach(([u,l])=>{s[u]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;t===e?o=n:o=cS(t,e,n);let a=iS(sS(o));return new ri(a,s,i)}function cS(t,e,n){let r={};return Object.entries(t.children).forEach(([i,s])=>{s===e?r[i]=n:r[i]=cS(s,e,n)}),new Se(t.segments,r)}var mh=class{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&ph(r[0]))throw new G(4003,!1);let i=r.find(Sc);if(i&&i!==J0(r))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function dj(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new mh(!0,0,t);let e=0,n=!1,r=t.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([u,l])=>{a[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,u)=>{u==0&&a==="."||(u==0&&a===""?n=!0:a===".."?e++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new mh(n,e,r)}var bo=class{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function hj(t,e,n){if(t.isAbsolute)return new bo(e,!0,0);if(!n)return new bo(e,!1,NaN);if(n.parent===null)return new bo(n,!0,0);let r=ph(t.commands[0])?0:1,i=n.segments.length-1+r;return fj(n,i,t.numberOfDoubleDots)}function fj(t,e,n){let r=t,i=e,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new G(4005,!1);i=r.segments.length}return new bo(r,!1,i-s)}function pj(t){return Sc(t[0])?t[0].outlets:{[oe]:t}}function uS(t,e,n){if(t??=new Se([],{}),t.segments.length===0&&t.hasChildren())return Cc(t,e,n);let r=mj(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let s=new Se(t.segments.slice(0,r.pathIndex),{});return s.children[oe]=new Se(t.segments.slice(r.pathIndex),t.children),Cc(s,0,i)}else return r.match&&i.length===0?new Se(t.segments,{}):r.match&&!t.hasChildren()?Vy(t,e,n):r.match?Cc(t,0,i):Vy(t,e,n)}function Cc(t,e,n){if(n.length===0)return new Se(t.segments,{});{let r=pj(n),i={};if(Object.keys(r).some(s=>s!==oe)&&t.children[oe]&&t.numberOfChildren===1&&t.children[oe].segments.length===0){let s=Cc(t.children[oe],e,n);return new Se(t.segments,s.children)}return Object.entries(r).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=uS(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{r[s]===void 0&&(i[s]=o)}),new Se(t.segments,i)}}function mj(t,e,n){let r=0,i=e,s={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return s;let o=t.segments[i],a=n[r];if(Sc(a))break;let u=`${a}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!G0(u,l,o))return s;r+=2}else{if(!G0(u,{},o))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Vy(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let s=n[i];if(Sc(s)){let u=gj(s.outlets);return new Se(r,u)}if(i===0&&ph(n[0])){let u=t.segments[e];r.push(new Qi(u.path,H0(n[0]))),i++;continue}let o=Sc(s)?s.outlets[oe]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ph(a)?(r.push(new Qi(o,H0(a))),i+=2):(r.push(new Qi(o,{})),i++)}return new Se(r,{})}function gj(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Vy(new Se([],{}),0,r))}),e}function H0(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function G0(t,e,n){return t==n.path&&$n(e,n.parameters)}var Tc="imperative",ot=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(ot||{}),un=class{constructor(e,n){this.id=e,this.url=n}},No=class extends un{constructor(e,n,r="imperative",i=null){super(e,n),this.type=ot.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qn=class extends un{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r,this.type=ot.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Jt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Jt||{}),gh=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(gh||{}),ii=class extends un{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ot.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},si=class extends un{constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i,this.type=ot.NavigationSkipped}},Ac=class extends un{constructor(e,n,r,i){super(e,n),this.error=r,this.target=i,this.type=ot.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},yh=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ot.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uy=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ot.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jy=class extends un{constructor(e,n,r,i,s){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=ot.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},By=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ot.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$y=class extends un{constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i,this.type=ot.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qy=class{constructor(e){this.route=e,this.type=ot.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Hy=class{constructor(e){this.route=e,this.type=ot.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gy=class{constructor(e){this.snapshot=e,this.type=ot.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},zy=class{constructor(e){this.snapshot=e,this.type=ot.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wy=class{constructor(e){this.snapshot=e,this.type=ot.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ky=class{constructor(e){this.snapshot=e,this.type=ot.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},vh=class{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r,this.type=ot.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Rc=class{},Nc=class{constructor(e){this.url=e}};var Qy=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Lc,this.attachRef=null}},Lc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(r,i){let s=this.getOrCreateContext(r);s.outlet=i,this.contexts.set(r,s)}onChildOutletDestroyed(r){let i=this.getContext(r);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let i=this.getContext(r);return i||(i=new Qy,this.contexts.set(r,i)),i}getContext(r){return this.contexts.get(r)||null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_h=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Yy(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Yy(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Jy(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Jy(e,this._root).map(n=>n.value)}};function Yy(t,e){if(t===e.value)return e;for(let n of e.children){let r=Yy(t,n);if(r)return r}return null}function Jy(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Jy(t,n);if(r.length)return r.unshift(e),r}return[]}var Yt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Do(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var wh=class extends _h{constructor(e,n){super(e),this.snapshot=n,av(this,e)}toString(){return this.snapshot.toString()}};function lS(t){let e=yj(t),n=new ht([new Qi("",{})]),r=new ht({}),i=new ht({}),s=new ht({}),o=new ht(""),a=new oi(n,r,s,o,i,oe,t,e.root);return a.snapshot=e.root,new wh(new Yt(a,[]),e)}function yj(t){let e={},n={},r={},i="",s=new Mc([],e,r,i,n,oe,t,null,{});return new Ih("",new Yt(s,[]))}var oi=class{constructor(e,n,r,i,s,o,a,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(te(l=>l[kc]))??Y(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(te(e=>Ao(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(te(e=>Ao(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ov(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:L(L({},e.params),t.params),data:L(L({},e.data),t.data),resolve:L(L(L(L({},t.data),e.data),i?.data),t._resolvedData)}:r={params:L({},t.params),data:L({},t.data),resolve:L(L({},t.data),t._resolvedData??{})},i&&hS(i)&&(r.resolve[kc]=i.title),r}var Mc=class{get title(){return this.data?.[kc]}constructor(e,n,r,i,s,o,a,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ao(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ao(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Ih=class extends _h{constructor(e,n){super(n),this.url=e,av(this,n)}toString(){return dS(this._root)}};function av(t,e){e.value._routerState=t,e.children.forEach(n=>av(t,n))}function dS(t){let e=t.children.length>0?` { ${t.children.map(dS).join(", ")} } `:"";return`${t.value}${e}`}function xy(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,$n(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),$n(e.params,n.params)||t.paramsSubject.next(n.params),zU(e.url,n.url)||t.urlSubject.next(n.url),$n(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Xy(t,e){let n=$n(t.params,e.params)&&YU(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||Xy(t.parent,e.parent))}function hS(t){return typeof t.title=="string"||t.title===null}var cv=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=oe,this.activateEvents=new Xe,this.deactivateEvents=new Xe,this.attachEvents=new Xe,this.detachEvents=new Xe,this.parentContexts=M(Lc),this.location=M(mo),this.changeDetector=M(_o),this.environmentInjector=M(Ct),this.inputBinder=M(Dh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(r){if(r.name){let{firstChange:i,previousValue:s}=r.name;if(i)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(r){return this.parentContexts.getContext(r)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let r=this.parentContexts.getContext(this.name);r?.route&&(r.attachRef?this.attach(r.attachRef,r.route):this.activateWith(r.route,r.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let r=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(r.instance),r}attach(r,i){this.activated=r,this._activatedRoute=i,this.location.insert(r.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(r.instance)}deactivate(){if(this.activated){let r=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(r)}}activateWith(r,i){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=r;let s=this.location,a=r.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Zy(r,u,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:i??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ft({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Xr]});let t=e;return t})(),Zy=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===oi?this.route:e===Lc?this.childContexts:this.parent.get(e,n)}},Dh=new B(""),z0=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(r){this.unsubscribeFromRouteData(r),this.subscribeToRouteData(r)}unsubscribeFromRouteData(r){this.outletDataSubscriptions.get(r)?.unsubscribe(),this.outletDataSubscriptions.delete(r)}subscribeToRouteData(r){let{activatedRoute:i}=r,s=Ya([i.queryParams,i.params,i.data]).pipe(Ut(([o,a,u],l)=>(u=L(L(L({},o),a),u),l===0?Y(u):Promise.resolve(u)))).subscribe(o=>{if(!r.isActivated||!r.activatedComponentRef||r.activatedRoute!==i||i.component===null){this.unsubscribeFromRouteData(r);return}let a=f0(i.component);if(!a){this.unsubscribeFromRouteData(r);return}for(let{templateName:u}of a.inputs)r.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(r,s)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function vj(t,e,n){let r=xc(t,e._root,n?n._root:void 0);return new wh(r,e)}function xc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=_j(t,e,n);return new Yt(r,i)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>xc(t,a)),o}}let r=wj(e.value),i=e.children.map(s=>xc(t,s));return new Yt(r,i)}}function _j(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return xc(t,r,i);return xc(t,r)})}function wj(t){return new oi(new ht(t.url),new ht(t.params),new ht(t.queryParams),new ht(t.fragment),new ht(t.data),t.outlet,t.component,t)}var fS="ngNavigationCancelingError";function pS(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Ro(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=mS(!1,Jt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function mS(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[fS]=!0,n.cancellationCode=e,n}function Ij(t){return gS(t)&&Ro(t.url)}function gS(t){return!!t&&t[fS]}var Ej=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["ng-component"]],standalone:!0,features:[et],decls:1,vars:0,template:function(i,s){i&1&&Ve(0,"router-outlet")},dependencies:[cv],encapsulation:2});let t=e;return t})();function Cj(t,e){return t.providers&&!t._injector&&(t._injector=Bd(t.providers,e,`Route: ${t.path}`)),t._injector??e}function uv(t){let e=t.children&&t.children.map(uv),n=e?Ee(L({},t),{children:e}):L({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==oe&&(n.component=Ej),n}function Hn(t){return t.outlet||oe}function Tj(t,e){let n=t.filter(r=>Hn(r)===e);return n.push(...t.filter(r=>Hn(r)!==e)),n}function Vc(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Dj=(t,e,n,r)=>te(i=>(new ev(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),ev=class{constructor(e,n,r,i,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),xy(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Do(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],r),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(i===s)if(i.component){let o=r.getContext(i.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,r);else s&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Do(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(r&&r.outlet){let o=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,s=Do(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Do(n);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new Ky(s.value.snapshot))}),e.children.length&&this.forwardEvent(new zy(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,s=n?n.value:null;if(xy(i),i===s)if(i.component){let o=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let o=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),xy(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Vc(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,r)}},Eh=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},So=class{constructor(e,n){this.component=e,this.route=n}};function bj(t,e,n){let r=t._root,i=e?e._root:null;return Ic(r,i,n,[r.value])}function Sj(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function xo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!vD(t)?t:e.get(t):r}function Ic(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=Do(e);return t.children.forEach(o=>{Aj(o,s[o.value.outlet],n,r.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Dc(a,n.getContext(o),i)),i}function Aj(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let u=Rj(o,s,s.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Eh(r)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ic(t,e,a?a.children:null,r,i):Ic(t,e,n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new So(a.outlet.component,o))}else o&&Dc(e,a,i),i.canActivateChecks.push(new Eh(r)),s.component?Ic(t,null,a?a.children:null,r,i):Ic(t,null,n,r,i);return i}function Rj(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!Yi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Yi(t.url,e.url)||!$n(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xy(t,e)||!$n(t.queryParams,e.queryParams);case"paramsChange":default:return!Xy(t,e)}}function Dc(t,e,n){let r=Do(t),i=t.value;Object.entries(r).forEach(([s,o])=>{i.component?e?Dc(o,e.children.getContext(s),n):Dc(o,null,n):Dc(o,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new So(e.outlet.component,i)):n.canDeactivateChecks.push(new So(null,i)):n.canDeactivateChecks.push(new So(null,i))}function Uc(t){return typeof t=="function"}function Nj(t){return typeof t=="boolean"}function Mj(t){return t&&Uc(t.canLoad)}function xj(t){return t&&Uc(t.canActivate)}function Pj(t){return t&&Uc(t.canActivateChild)}function Oj(t){return t&&Uc(t.canDeactivate)}function kj(t){return t&&Uc(t.canMatch)}function yS(t){return t instanceof lr||t?.name==="EmptyError"}var lh=Symbol("INITIAL_VALUE");function Mo(){return Ut(t=>Ya(t.map(e=>e.pipe(hr(1),jl(lh)))).pipe(te(e=>{for(let n of e)if(n!==!0){if(n===lh)return lh;if(n===!1||n instanceof ri)return n}return!0}),Pt(e=>e!==lh),hr(1)))}function Fj(t,e){return Ye(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?Y(Ee(L({},n),{guardsResult:!0})):Lj(o,r,i,t).pipe(Ye(a=>a&&Nj(a)?Vj(r,s,t,e):Y(a)),te(a=>Ee(L({},n),{guardsResult:a})))})}function Lj(t,e,n,r){return Pe(t).pipe(Ye(i=>qj(i.component,i.route,n,e,r)),Mn(i=>i!==!0,!0))}function Vj(t,e,n,r){return Pe(e).pipe(dr(i=>Ws(jj(i.route.parent,r),Uj(i.route,r),$j(t,i.path,n),Bj(t,i.route,n))),Mn(i=>i!==!0,!0))}function Uj(t,e){return t!==null&&e&&e(new Wy(t)),Y(!0)}function jj(t,e){return t!==null&&e&&e(new Gy(t)),Y(!0)}function Bj(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return Y(!0);let i=r.map(s=>Ll(()=>{let o=Vc(e)??n,a=xo(s,o),u=xj(a)?a.canActivate(e,t):In(o,()=>a(e,t));return ai(u).pipe(Mn())}));return Y(i).pipe(Mo())}function $j(t,e,n){let r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Sj(o)).filter(o=>o!==null).map(o=>Ll(()=>{let a=o.guards.map(u=>{let l=Vc(o.node)??n,h=xo(u,l),p=Pj(h)?h.canActivateChild(r,t):In(l,()=>h(r,t));return ai(p).pipe(Mn())});return Y(a).pipe(Mo())}));return Y(s).pipe(Mo())}function qj(t,e,n,r,i){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Y(!0);let o=s.map(a=>{let u=Vc(e)??i,l=xo(a,u),h=Oj(l)?l.canDeactivate(t,e,n,r):In(u,()=>l(t,e,n,r));return ai(h).pipe(Mn())});return Y(o).pipe(Mo())}function Hj(t,e,n,r){let i=e.canLoad;if(i===void 0||i.length===0)return Y(!0);let s=i.map(o=>{let a=xo(o,t),u=Mj(a)?a.canLoad(e,n):In(t,()=>a(e,n));return ai(u)});return Y(s).pipe(Mo(),vS(r))}function vS(t){return vl(Je(e=>{if(Ro(e))throw pS(t,e)}),te(e=>e===!0))}function Gj(t,e,n,r){let i=e.canMatch;if(!i||i.length===0)return Y(!0);let s=i.map(o=>{let a=xo(o,t),u=kj(a)?a.canMatch(e,n):In(t,()=>a(e,n));return ai(u)});return Y(s).pipe(Mo(),vS(r))}var Pc=class{constructor(e){this.segmentGroup=e||null}},Ch=class extends Error{constructor(e){super(),this.urlTree=e}};function To(t){return Gs(new Pc(t))}function zj(t){return Gs(new G(4e3,!1))}function Wj(t){return Gs(mS(!1,Jt.GuardRejected))}var tv=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return Y(r);if(i.numberOfChildren>1||!i.children[oe])return zj(e.redirectTo);i=i.children[oe]}}applyRedirectCommands(e,n,r){let i=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,r);if(n.startsWith("/"))throw new Ch(i);return i}applyRedirectCreateUrlTree(e,n,r,i){let s=this.createSegmentGroup(e,n.root,r,i);return new ri(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);r[i]=n[a]}else r[i]=s}),r}createSegmentGroup(e,n,r,i){let s=this.createSegments(e,n.segments,r,i),o={};return Object.entries(n.children).forEach(([a,u])=>{o[a]=this.createSegmentGroup(e,u,r,i)}),new Se(s,o)}createSegments(e,n,r,i){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new G(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}},nv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Kj(t,e,n,r,i){let s=lv(t,e,n);return s.matched?(r=Cj(e,r),Gj(r,e,n,i).pipe(te(o=>o===!0?s:L({},nv)))):Y(s)}function lv(t,e,n){if(e.path==="**")return Qj(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?L({},nv):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||GU)(n,t,e);if(!i)return L({},nv);let s={};Object.entries(i.posParams??{}).forEach(([a,u])=>{s[a]=u.path});let o=i.consumed.length>0?L(L({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Qj(t){return{matched:!0,parameters:t.length>0?J0(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function W0(t,e,n,r){return n.length>0&&Xj(t,n,r)?{segmentGroup:new Se(e,Jj(r,new Se(n,t.children))),slicedSegments:[]}:n.length===0&&Zj(t,n,r)?{segmentGroup:new Se(t.segments,Yj(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new Se(t.segments,t.children),slicedSegments:n}}function Yj(t,e,n,r){let i={};for(let s of n)if(bh(t,e,s)&&!r[Hn(s)]){let o=new Se([],{});i[Hn(s)]=o}return L(L({},r),i)}function Jj(t,e){let n={};n[oe]=e;for(let r of t)if(r.path===""&&Hn(r)!==oe){let i=new Se([],{});n[Hn(r)]=i}return n}function Xj(t,e,n){return n.some(r=>bh(t,e,r)&&Hn(r)!==oe)}function Zj(t,e,n){return n.some(r=>bh(t,e,r))}function bh(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function e2(t,e,n,r){return Hn(t)!==r&&(r===oe||!bh(e,n,t))?!1:lv(e,t,n).matched}function t2(t,e,n){return e.length===0&&!t.children[n]}var rv=class{};function n2(t,e,n,r,i,s,o="emptyOnly"){return new iv(t,e,n,r,i,o,s).recognize()}var r2=31,iv=class{constructor(e,n,r,i,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new tv(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=W0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(te(n=>{let r=new Mc([],Object.freeze({}),Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,{},oe,this.rootComponentType,null,{}),i=new Yt(r,n),s=new Ih("",i),o=lj(r,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,oe).pipe(qr(r=>{if(r instanceof Ch)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Pc?this.noMatchError(r):r}))}inheritParamsAndData(e,n){let r=e.value,i=ov(r,n,this.paramsInheritanceStrategy);r.params=Object.freeze(i.params),r.data=Object.freeze(i.data),e.children.forEach(s=>this.inheritParamsAndData(s,r))}processSegmentGroup(e,n,r,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,n,r):this.processSegment(e,n,r,r.segments,i,!0).pipe(te(s=>s instanceof Yt?[s]:[]))}processChildren(e,n,r){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return Pe(i).pipe(dr(s=>{let o=r.children[s],a=Tj(n,s);return this.processSegmentGroup(e,a,o,s)}),Ul((s,o)=>(s.push(...o),s)),Hr(null),Tm(),Ye(s=>{if(s===null)return To(r);let o=_S(s);return i2(o),Y(o)}))}processSegment(e,n,r,i,s,o){return Pe(n).pipe(dr(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,r,i,s,o).pipe(qr(u=>{if(u instanceof Pc)return Y(null);throw u}))),Mn(a=>!!a),qr(a=>{if(yS(a))return t2(r,i,s)?Y(new rv):To(r);throw a}))}processSegmentAgainstRoute(e,n,r,i,s,o,a){return e2(r,i,s,o)?r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,s,o):To(i):To(i)}expandSegmentAgainstRouteUsingRedirect(e,n,r,i,s,o){let{matched:a,consumedSegments:u,positionalParamSegments:l,remainingSegments:h}=lv(n,i,s);if(!a)return To(n);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>r2&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(u,i.redirectTo,l);return this.applyRedirects.lineralizeSegments(i,p).pipe(Ye(m=>this.processSegment(e,r,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,r,i,s){let o=Kj(n,r,i,e,this.urlSerializer);return r.path==="**"&&(n.children={}),o.pipe(Ut(a=>a.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(Ut(({routes:u})=>{let l=r._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,v=new Mc(h,m,Object.freeze(L({},this.urlTree.queryParams)),this.urlTree.fragment,o2(r),Hn(r),r.component??r._loadedComponent??null,r,a2(r)),{segmentGroup:b,slicedSegments:N}=W0(n,h,p,u);if(N.length===0&&b.hasChildren())return this.processChildren(l,u,b).pipe(te(P=>P===null?null:new Yt(v,P)));if(u.length===0&&N.length===0)return Y(new Yt(v,[]));let R=Hn(r)===s;return this.processSegment(l,u,b,N,R?oe:s,!0).pipe(te(P=>new Yt(v,P instanceof Yt?[P]:[])))}))):To(n)))}getChildConfig(e,n,r){return n.children?Y({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?Y({routes:n._loadedRoutes,injector:n._loadedInjector}):Hj(e,n,r,this.urlSerializer).pipe(Ye(i=>i?this.configLoader.loadChildren(e,n).pipe(Je(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):Wj(n))):Y({routes:[],injector:e})}};function i2(t){t.sort((e,n)=>e.value.outlet===oe?-1:n.value.outlet===oe?1:e.value.outlet.localeCompare(n.value.outlet))}function s2(t){let e=t.value.routeConfig;return e&&e.path===""}function _S(t){let e=[],n=new Set;for(let r of t){if(!s2(r)){e.push(r);continue}let i=e.find(s=>r.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=_S(r.children);e.push(new Yt(r.value,i))}return e.filter(r=>!n.has(r))}function o2(t){return t.data||{}}function a2(t){return t.resolve||{}}function c2(t,e,n,r,i,s){return Ye(o=>n2(t,e,n,r,o.extractedUrl,i,s).pipe(te(({state:a,tree:u})=>Ee(L({},o),{targetSnapshot:a,urlAfterRedirects:u}))))}function u2(t,e){return Ye(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return Y(n);let s=new Set(i.map(u=>u.route)),o=new Set;for(let u of s)if(!o.has(u))for(let l of wS(u))o.add(l);let a=0;return Pe(o).pipe(dr(u=>s.has(u)?l2(u,r,t,e):(u.data=ov(u,u.parent,t).resolve,Y(void 0))),Je(()=>a++),Ks(1),Ye(u=>a===o.size?Y(n):zt))})}function wS(t){let e=t.children.map(n=>wS(n)).flat();return[t,...e]}function l2(t,e,n,r){let i=t.routeConfig,s=t._resolve;return i?.title!==void 0&&!hS(i)&&(s[kc]=i.title),d2(s,t,e,r).pipe(te(o=>(t._resolvedData=o,t.data=ov(t,t.parent,n).resolve,null)))}function d2(t,e,n,r){let i=ky(t);if(i.length===0)return Y({});let s={};return Pe(i).pipe(Ye(o=>h2(t[o],e,n,r).pipe(Mn(),Je(a=>{s[o]=a}))),Ks(1),Cm(s),qr(o=>yS(o)?zt:Gs(o)))}function h2(t,e,n,r){let i=Vc(e)??r,s=xo(t,i),o=s.resolve?s.resolve(e,n):In(i,()=>s(e,n));return ai(o)}function Py(t){return Ut(e=>{let n=t(e);return n?Pe(n).pipe(te(()=>e)):Y(e)})}var IS=(()=>{let e=class e{buildTitle(r){let i,s=r.root;for(;s!==void 0;)i=this.getResolvedTitleForRoute(s)??i,s=s.children.find(o=>o.outlet===oe);return i}getResolvedTitleForRoute(r){return r.data[kc]}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>M(f2),providedIn:"root"});let t=e;return t})(),f2=(()=>{let e=class e extends IS{constructor(r){super(),this.title=r}updateTitle(r){let i=this.buildTitle(r);i!==void 0&&this.title.setTitle(i)}};e.\u0275fac=function(i){return new(i||e)(K(B0))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),jc=new B("",{providedIn:"root",factory:()=>({})}),Oc=new B(""),dv=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=M(Yd)}loadComponent(r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Y(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=ai(r.loadComponent()).pipe(te(ES),Je(o=>{this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=o}),xi(()=>{this.componentLoaders.delete(r)})),s=new Bs(i,()=>new It).pipe(js());return this.componentLoaders.set(r,s),s}loadChildren(r,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return Y({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=p2(i,this.compiler,r,this.onLoadEndListener).pipe(xi(()=>{this.childrenLoaders.delete(i)})),a=new Bs(o,()=>new It).pipe(js());return this.childrenLoaders.set(i,a),a}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function p2(t,e,n,r){return ai(t.loadChildren()).pipe(te(ES),Ye(i=>i instanceof oc||Array.isArray(i)?Y(i):Pe(e.compileModuleAsync(i))),te(i=>{r&&r(t);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(n).injector,o=s.get(Oc,[],{optional:!0,self:!0}).flat()),{routes:o.map(uv),injector:s}}))}function m2(t){return t&&typeof t=="object"&&"default"in t}function ES(t){return m2(t)?t.default:t}var hv=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>M(g2),providedIn:"root"});let t=e;return t})(),g2=(()=>{let e=class e{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,i){return r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),CS=new B(""),TS=new B("");function y2(t,e,n){let r=t.get(TS),i=t.get(Dt);return t.get(ye).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let s,o=new Promise(l=>{s=l}),a=i.startViewTransition(()=>(s(),v2(t))),{onViewTransitionCreated:u}=r;return u&&In(t,()=>u({transition:a,from:e,to:n})),o})}function v2(t){return new Promise(e=>{jd(e,{injector:t})})}var fv=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new It,this.transitionAbortSubject=new It,this.configLoader=M(dv),this.environmentInjector=M(Ct),this.urlSerializer=M(Fc),this.rootContexts=M(Lc),this.location=M(Eo),this.inputBindingEnabled=M(Dh,{optional:!0})!==null,this.titleStrategy=M(IS),this.options=M(jc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=M(hv),this.createViewTransition=M(CS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Y(void 0),this.rootComponentType=null;let r=s=>this.events.next(new qy(s)),i=s=>this.events.next(new Hy(s));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=r}complete(){this.transitions?.complete()}handleNavigationRequest(r){let i=++this.navigationId;this.transitions?.next(Ee(L(L({},this.transitions.value),r),{id:i}))}setupNavigations(r,i,s){return this.transitions=new ht({id:0,currentUrlTree:i,currentRawUrl:i,extractedUrl:this.urlHandlingStrategy.extract(i),urlAfterRedirects:this.urlHandlingStrategy.extract(i),rawUrl:i,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Tc,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pt(o=>o.id!==0),te(o=>Ee(L({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Ut(o=>{let a=!1,u=!1;return Y(o).pipe(Ut(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),zt;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Ee(L({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!r.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=l.extras.onSameUrlNavigation??r.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new si(l.id,this.urlSerializer.serialize(l.rawUrl),m,gh.IgnoredSameUrlNavigation)),l.resolve(null),zt}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Y(l).pipe(Ut(m=>{let v=this.transitions?.getValue();return this.events.next(new No(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),v!==this.transitions?.getValue()?zt:Promise.resolve(m)}),c2(this.environmentInjector,this.configLoader,this.rootComponentType,r.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Ee(L({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let v=new yh(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(v)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:v,source:b,restoredState:N,extras:R}=l,P=new No(m,this.urlSerializer.serialize(v),b,N);this.events.next(P);let q=lS(this.rootComponentType).snapshot;return this.currentTransition=o=Ee(L({},l),{targetSnapshot:q,urlAfterRedirects:v,extras:Ee(L({},R),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=v,Y(o)}else{let m="";return this.events.next(new si(l.id,this.urlSerializer.serialize(l.extractedUrl),m,gh.IgnoredByUrlHandlingStrategy)),l.resolve(null),zt}}),Je(l=>{let h=new Uy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),te(l=>(this.currentTransition=o=Ee(L({},l),{guards:bj(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),Fj(this.environmentInjector,l=>this.events.next(l)),Je(l=>{if(o.guardsResult=l.guardsResult,Ro(l.guardsResult))throw pS(this.urlSerializer,l.guardsResult);let h=new jy(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),Pt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Jt.GuardRejected),!1)),Py(l=>{if(l.guards.canActivateChecks.length)return Y(l).pipe(Je(h=>{let p=new By(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),Ut(h=>{let p=!1;return Y(h).pipe(u2(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Jt.NoDataFromResolver)}}))}),Je(h=>{let p=new $y(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Py(l=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Je(v=>{p.component=v}),te(()=>{})));for(let v of p.children)m.push(...h(v));return m};return Ya(h(l.targetSnapshot.root)).pipe(Hr(null),hr(1))}),Py(()=>this.afterPreactivation()),Ut(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return p?Pe(p).pipe(te(()=>o)):Y(o)}),te(l=>{let h=vj(r.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Ee(L({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Je(()=>{this.events.next(new Rc)}),Dj(this.rootContexts,r.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),hr(1),Je({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qn(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Dm(this.transitionAbortSubject.pipe(Je(l=>{throw l}))),xi(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",Jt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),qr(l=>{if(u=!0,gS(l))this.events.next(new ii(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Ij(l)?this.events.next(new Nc(l.url)):o.resolve(!1);else{this.events.next(new Ac(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(r.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return zt}))}))}cancelNavigationTransition(r,i,s){let o=new ii(r.id,this.urlSerializer.serialize(r.extractedUrl),i,s);this.events.next(o),r.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function _2(t){return t!==Tc}var w2=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>M(I2),providedIn:"root"});let t=e;return t})(),sv=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},I2=(()=>{let e=class e extends sv{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qi(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),DS=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:()=>M(E2),providedIn:"root"});let t=e;return t})(),E2=(()=>{let e=class e extends DS{constructor(){super(...arguments),this.location=M(Eo),this.urlSerializer=M(Fc),this.options=M(jc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=M(hv),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ri,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=lS(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(r){return this.location.subscribe(i=>{i.type==="popstate"&&r(i.url,i.state)})}handleRouterEvent(r,i){if(r instanceof No)this.stateMemento=this.createStateMemento();else if(r instanceof si)this.rawUrlTree=i.initialUrl;else if(r instanceof yh){if(this.urlUpdateStrategy==="eager"&&!i.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl);this.setBrowserUrl(s,i)}}else r instanceof Rc?(this.currentUrlTree=i.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(i.finalUrl,i.initialUrl),this.routerState=i.targetRouterState,this.urlUpdateStrategy==="deferred"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,i))):r instanceof ii&&(r.code===Jt.GuardRejected||r.code===Jt.NoDataFromResolver)?this.restoreHistory(i):r instanceof Ac?this.restoreHistory(i,!0):r instanceof qn&&(this.lastSuccessfulId=r.id,this.currentPageId=this.browserPageId)}setBrowserUrl(r,i){let s=this.urlSerializer.serialize(r);if(this.location.isCurrentPathEqualTo(s)||i.extras.replaceUrl){let o=this.browserPageId,a=L(L({},i.extras.state),this.generateNgRouterState(i.id,o));this.location.replaceState(s,"",a)}else{let o=L(L({},i.extras.state),this.generateNgRouterState(i.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(r,i=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===r.finalUrl&&o===0&&(this.resetState(r),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetState(r),this.resetUrlToCurrentUrlTree())}resetState(r){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,r.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(r,i){return this.canceledNavigationResolution==="computed"?{navigationId:r,\u0275routerPageId:i}:{navigationId:r}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qi(e)))(s||e)}})(),e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Ec=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(Ec||{});function bS(t,e){t.events.pipe(Pt(n=>n instanceof qn||n instanceof ii||n instanceof Ac||n instanceof si),te(n=>n instanceof qn||n instanceof si?Ec.COMPLETE:(n instanceof ii?n.code===Jt.Redirect||n.code===Jt.SupersededByNewNavigation:!1)?Ec.REDIRECTING:Ec.FAILED),Pt(n=>n!==Ec.REDIRECTING),hr(1)).subscribe(()=>{e()})}function C2(t){throw t}var T2={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},D2={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xt=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=M(Kd),this.stateManager=M(DS),this.options=M(jc,{optional:!0})||{},this.pendingTasks=M(go),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=M(fv),this.urlSerializer=M(Fc),this.location=M(Eo),this.urlHandlingStrategy=M(hv),this._events=new It,this.errorHandler=this.options.errorHandler||C2,this.navigated=!1,this.routeReuseStrategy=M(w2),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=M(Oc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!M(Dh,{optional:!0}),this.eventsSubscription=new ze,this.isNgZoneEnabled=M(ye)instanceof ye&&ye.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:r=>{this.console.warn(r)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let r=this.navigationTransitions.events.subscribe(i=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof ii&&i.code!==Jt.Redirect&&i.code!==Jt.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof qn)this.navigated=!0;else if(i instanceof Nc){let a=this.urlHandlingStrategy.merge(i.url,s.currentRawUrl),u={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||_2(s.source)};this.scheduleNavigation(a,Tc,null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}S2(i)&&this._events.next(i)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(r)}resetRootComponentType(r){this.routerState.root.component=r,this.navigationTransitions.rootComponentType=r}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Tc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((r,i)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(r,"popstate",i)},0)})}navigateToSyncWithBrowser(r,i,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=L({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(r);this.scheduleNavigation(u,i,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(r){this.config=r.map(uv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(r,i={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=i,h=l?this.currentUrlTree.fragment:a,p=null;switch(u){case"merge":p=L(L({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let v=s?s.snapshot:this.routerState.snapshot.root;m=oS(v)}catch{(typeof r[0]!="string"||!r[0].startsWith("/"))&&(r=[]),m=this.currentUrlTree.root}return aS(m,r,p,h??null)}navigateByUrl(r,i={skipLocationChange:!1}){let s=Ro(r)?r:this.parseUrl(r),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Tc,null,i)}navigate(r,i={skipLocationChange:!1}){return b2(r),this.navigateByUrl(this.createUrlTree(r,i),i)}serializeUrl(r){return this.urlSerializer.serialize(r)}parseUrl(r){try{return this.urlSerializer.parse(r)}catch{return this.urlSerializer.parse("/")}}isActive(r,i){let s;if(i===!0?s=L({},T2):i===!1?s=L({},D2):s=i,Ro(r))return $0(this.currentUrlTree,r,s);let o=this.parseUrl(r);return $0(this.currentUrlTree,o,s)}removeEmptyProps(r){return Object.entries(r).reduce((i,[s,o])=>(o!=null&&(i[s]=o),i),{})}scheduleNavigation(r,i,s,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,h;a?(u=a.resolve,l=a.reject,h=a.promise):h=new Promise((m,v)=>{u=m,l=v});let p=this.pendingTasks.add();return bS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:r,extras:o,resolve:u,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function b2(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new G(4008,!1)}function S2(t){return!(t instanceof Rc)&&!(t instanceof Nc)}var Sh=(()=>{let e=class e{constructor(r,i,s,o,a,u){this.router=r,this.route=i,this.tabIndexAttribute=s,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.commands=null,this.onChanges=new It,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=r.events.subscribe(h=>{h instanceof qn&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(r){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",r)}ngOnChanges(r){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(r){r!=null?(this.commands=Array.isArray(r)?r:[r],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(r,i,s,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(r!==0||i||s||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let r=this.urlTree;this.href=r!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(r)):null;let i=this.href===null?null:Rb(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",i)}applyAttributeValue(r,i){let s=this.renderer,o=this.el.nativeElement;i!==null?s.setAttribute(o,r,i):s.removeAttribute(o,r)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(i){return new(i||e)(Te(Xt),Te(oi),$g("tabindex"),Te(Gi),Te(ei),Te(Ir))},e.\u0275dir=ft({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(i,s){i&1&&Ke("click",function(a){return s.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),i&2&&qd("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[Et.HasDecoratorInputTransform,"preserveFragment","preserveFragment",wo],skipLocationChange:[Et.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",wo],replaceUrl:[Et.HasDecoratorInputTransform,"replaceUrl","replaceUrl",wo],routerLink:"routerLink"},standalone:!0,features:[cy,Xr]});let t=e;return t})();var Th=class{};var A2=(()=>{let e=class e{constructor(r,i,s,o,a){this.router=r,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Pt(r=>r instanceof qn),dr(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(r,i){let s=[];for(let o of i){o.providers&&!o._injector&&(o._injector=Bd(o.providers,r,`Route: ${o.path}`));let a=o._injector??r,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(u,o.children??o._loadedRoutes))}return Pe(s).pipe(zs())}preloadConfig(r,i){return this.preloadingStrategy.preload(i,()=>{let s;i.loadChildren&&i.canLoad===void 0?s=this.loader.loadChildren(r,i):s=Y(null);let o=s.pipe(Ye(a=>a===null?Y(void 0):(i._loadedRoutes=a.routes,i._loadedInjector=a.injector,this.processRoutes(a.injector??r,a.routes))));if(i.loadComponent&&!i._loadedComponent){let a=this.loader.loadComponent(i);return Pe([o,a]).pipe(zs())}else return o})}};e.\u0275fac=function(i){return new(i||e)(K(Xt),K(Yd),K(Ct),K(Th),K(dv))},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),SS=new B(""),R2=(()=>{let e=class e{constructor(r,i,s,o,a={}){this.urlSerializer=r,this.transitions=i,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=M(Ct),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof No?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=r.navigationTrigger,this.restoredId=r.restoredState?r.restoredState.navigationId:0):r instanceof qn?(this.lastId=r.id,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.urlAfterRedirects).fragment)):r instanceof si&&r.code===gh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(r,this.urlSerializer.parse(r.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(r=>{r instanceof vh&&(r.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(r.position):r.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(r.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(r,i){this.zone.runOutsideAngular(()=>I(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),jd(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new vh(r,this.lastSource==="popstate"?this.store[this.restoredId]:null,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(i){Bb()},e.\u0275prov=$({token:e,factory:e.\u0275fac});let t=e;return t})();function AS(t,...e){return jt([{provide:Oc,multi:!0,useValue:t},[],{provide:oi,useFactory:RS,deps:[Xt]},{provide:hc,multi:!0,useFactory:NS},e.map(n=>n.\u0275providers)])}function RS(t){return t.routerState.root}function Bc(t,e){return{\u0275kind:t,\u0275providers:e}}function NS(){let t=M(pt);return e=>{let n=t.get(vo);if(e!==n.components[0])return;let r=t.get(Xt),i=t.get(MS);t.get(pv)===1&&r.initialNavigation(),t.get(xS,null,ce.Optional)?.setUpPreloading(),t.get(SS,null,ce.Optional)?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var MS=new B("",{factory:()=>new It}),pv=new B("",{providedIn:"root",factory:()=>1});function N2(){return Bc(2,[{provide:pv,useValue:0},{provide:Qd,multi:!0,deps:[pt],useFactory:e=>{let n=e.get(w0,Promise.resolve());return()=>n.then(()=>new Promise(r=>{let i=e.get(Xt),s=e.get(MS);bS(i,()=>{r(!0)}),e.get(fv).afterPreactivation=()=>(r(!0),s.closed?Y(void 0):s),i.initialNavigation()}))}}])}function M2(){return Bc(3,[{provide:Qd,multi:!0,useFactory:()=>{let e=M(Xt);return()=>{e.setUpLocationChangeListener()}}},{provide:pv,useValue:2}])}var xS=new B("");function x2(t){return Bc(0,[{provide:xS,useExisting:A2},{provide:Th,useExisting:t}])}function P2(){return Bc(8,[z0,{provide:Dh,useExisting:z0}])}function O2(t){let e=[{provide:CS,useValue:y2},{provide:TS,useValue:L({skipNextTransition:!!t?.skipInitialTransition},t)}];return Bc(9,e)}var K0=new B("ROUTER_FORROOT_GUARD"),k2=[Eo,{provide:Fc,useClass:bc},Xt,Lc,{provide:oi,useFactory:RS,deps:[Xt]},dv,[]],Ah=(()=>{let e=class e{constructor(r){}static forRoot(r,i){return{ngModule:e,providers:[k2,[],{provide:Oc,multi:!0,useValue:r},{provide:K0,useFactory:U2,deps:[[Xt,new We,new Ag]]},{provide:jc,useValue:i||{}},i?.useHash?L2():V2(),F2(),i?.preloadingStrategy?x2(i.preloadingStrategy).\u0275providers:[],i?.initialNavigation?j2(i):[],i?.bindToComponentInputs?P2().\u0275providers:[],i?.enableViewTransitions?O2().\u0275providers:[],B2()]}}static forChild(r){return{ngModule:e,providers:[{provide:Oc,multi:!0,useValue:r}]}}};e.\u0275fac=function(i){return new(i||e)(K(K0,8))},e.\u0275mod=jn({type:e}),e.\u0275inj=Un({});let t=e;return t})();function F2(){return{provide:SS,useFactory:()=>{let t=M(C0),e=M(ye),n=M(jc),r=M(fv),i=M(Fc);return n.scrollOffset&&t.setOffset(n.scrollOffset),new R2(i,r,t,e,n)}}}function L2(){return{provide:Ir,useClass:E0}}function V2(){return{provide:Ir,useClass:yy}}function U2(t){return"guarded"}function j2(t){return[t.initialNavigation==="disabled"?M2().\u0275providers:[],t.initialNavigation==="enabledBlocking"?N2().\u0275providers:[]]}var Q0=new B("");function B2(){return[{provide:Q0,useFactory:NS},{provide:hc,multi:!0,useExisting:Q0}]}var $S=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(Te(Gi),Te(ei))},e.\u0275dir=ft({type:e});let t=e;return t})(),vv=(()=>{let e=class e extends $S{};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qi(e)))(s||e)}})(),e.\u0275dir=ft({type:e,features:[Bn]});let t=e;return t})(),Lh=new B(""),$2={provide:Lh,useExisting:Jr(()=>_v),multi:!0},_v=(()=>{let e=class e extends vv{writeValue(r){this.setProperty("checked",r)}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qi(e)))(s||e)}})(),e.\u0275dir=ft({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,s){i&1&&Ke("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[yo([$2]),Bn]});let t=e;return t})(),q2={provide:Lh,useExisting:Jr(()=>Fo),multi:!0};function H2(){let t=wr()?wr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var G2=new B(""),Fo=(()=>{let e=class e extends $S{constructor(r,i,s){super(r,i),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!H2())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(Te(Gi),Te(ei),Te(G2,8))},e.\u0275dir=ft({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,s){i&1&&Ke("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[yo([q2]),Bn]});let t=e;return t})();function ci(t){return t==null||(typeof t=="string"||Array.isArray(t))&&t.length===0}function qS(t){return t!=null&&typeof t.length=="number"}var HS=new B(""),GS=new B(""),z2=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Ft=class{static min(e){return W2(e)}static max(e){return K2(e)}static required(e){return Q2(e)}static requiredTrue(e){return Y2(e)}static email(e){return J2(e)}static minLength(e){return X2(e)}static maxLength(e){return Z2(e)}static pattern(e){return eB(e)}static nullValidator(e){return zS(e)}static compose(e){return XS(e)}static composeAsync(e){return eA(e)}};function W2(t){return e=>{if(ci(e.value)||ci(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}function K2(t){return e=>{if(ci(e.value)||ci(t))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}function Q2(t){return ci(t.value)?{required:!0}:null}function Y2(t){return t.value===!0?null:{required:!0}}function J2(t){return ci(t.value)||z2.test(t.value)?null:{email:!0}}function X2(t){return e=>ci(e.value)||!qS(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}function Z2(t){return e=>qS(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}function eB(t){if(!t)return zS;let e,n;return typeof t=="string"?(n="",t.charAt(0)!=="^"&&(n+="^"),n+=t,t.charAt(t.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),r=>{if(ci(r.value))return null;let i=r.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}function zS(t){return null}function WS(t){return t!=null}function KS(t){return Wi(t)?Pe(t):t}function QS(t){let e={};return t.forEach(n=>{e=n!=null?L(L({},e),n):e}),Object.keys(e).length===0?null:e}function YS(t,e){return e.map(n=>n(t))}function tB(t){return!t.validate}function JS(t){return t.map(e=>tB(e)?e:n=>e.validate(n))}function XS(t){if(!t)return null;let e=t.filter(WS);return e.length==0?null:function(n){return QS(YS(n,e))}}function ZS(t){return t!=null?XS(JS(t)):null}function eA(t){if(!t)return null;let e=t.filter(WS);return e.length==0?null:function(n){let r=YS(n,e).map(KS);return Em(r).pipe(te(QS))}}function tA(t){return t!=null?eA(JS(t)):null}function OS(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function nA(t){return t._rawValidators}function rA(t){return t._rawAsyncValidators}function mv(t){return t?Array.isArray(t)?t:[t]:[]}function Mh(t,e){return Array.isArray(t)?t.includes(e):t===e}function kS(t,e){let n=mv(e);return mv(t).forEach(i=>{Mh(n,i)||n.push(i)}),n}function FS(t,e){return mv(e).filter(n=>!Mh(t,n))}var xh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ZS(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Oo=class extends xh{get formDirective(){return null}get path(){return null}},Hc=class extends xh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ph=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},nB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},bJ=Ee(L({},nB),{"[class.ng-submitted]":"isSubmitted"}),Vh=(()=>{let e=class e extends Ph{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Te(Hc,2))},e.\u0275dir=ft({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,s){i&2&&Hd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Bn]});let t=e;return t})(),Uh=(()=>{let e=class e extends Ph{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(Te(Oo,10))},e.\u0275dir=ft({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,s){i&2&&Hd("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[Bn]});let t=e;return t})();var $c="VALID",Rh="INVALID",Po="PENDING",qc="DISABLED";function wv(t){return(jh(t)?t.validators:t)||null}function rB(t){return Array.isArray(t)?ZS(t):t||null}function Iv(t,e){return(jh(e)?e.asyncValidators:t)||null}function iB(t){return Array.isArray(t)?tA(t):t||null}function jh(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function iA(t,e,n){let r=t.controls;if(!(e?Object.keys(r):r).length)throw new G(1e3,"");if(!r[n])throw new G(1001,"")}function sA(t,e,n){t._forEachChild((r,i)=>{if(n[i]===void 0)throw new G(1002,"")})}var ko=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===$c}get invalid(){return this.status===Rh}get pending(){return this.status==Po}get disabled(){return this.status===qc}get enabled(){return this.status!==qc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(kS(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(kS(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(FS(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(FS(e,this._rawAsyncValidators))}hasValidator(e){return Mh(this._rawValidators,e)}hasAsyncValidator(e){return Mh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Po,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=qc,this.errors=null,this._forEachChild(r=>{r.disable(Ee(L({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Ee(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=$c,this._forEachChild(r=>{r.enable(Ee(L({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Ee(L({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===$c||this.status===Po)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?qc:$c}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Po,this._hasOwnPendingAsyncValidator=!0;let n=KS(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((r,i)=>r&&r._find(i),this)}getError(e,n){let r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Xe,this.statusChanges=new Xe}_calculateStatus(){return this._allControlsDisabled()?qc:this.errors?Rh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Po)?Po:this._anyControlsHaveStatus(Rh)?Rh:$c}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=rB(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=iB(this._rawAsyncValidators)}},Oh=class extends ko{constructor(e,n,r){super(wv(n),Iv(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){sA(this,!0,e),Object.keys(e).forEach(r=>{iA(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>r._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,r,i)=>((r.enabled||this.disabled)&&(n[i]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((i,s)=>{r=n(r,i,s)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var gv=class extends Oh{};var Ev=new B("CallSetDisabledState",{providedIn:"root",factory:()=>Bh}),Bh="always";function sB(t,e){return[...e.path,t]}function LS(t,e,n=Bh){Cv(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),aB(t,e),uB(t,e),cB(t,e),oB(t,e)}function VS(t,e,n=!0){let r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),Fh(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function kh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function oB(t,e){if(e.valueAccessor.setDisabledState){let n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function Cv(t,e){let n=nA(t);e.validator!==null?t.setValidators(OS(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let r=rA(t);e.asyncValidator!==null?t.setAsyncValidators(OS(r,e.asyncValidator)):typeof r=="function"&&t.setAsyncValidators([r]);let i=()=>t.updateValueAndValidity();kh(e._rawValidators,i),kh(e._rawAsyncValidators,i)}function Fh(t,e){let n=!1;if(t!==null){if(e.validator!==null){let i=nA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.validator);s.length!==i.length&&(n=!0,t.setValidators(s))}}if(e.asyncValidator!==null){let i=rA(t);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==e.asyncValidator);s.length!==i.length&&(n=!0,t.setAsyncValidators(s))}}}let r=()=>{};return kh(e._rawValidators,r),kh(e._rawAsyncValidators,r),n}function aB(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&oA(t,e)})}function cB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&oA(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function oA(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function uB(t,e){let n=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function lB(t,e){t==null,Cv(t,e)}function dB(t,e){return Fh(t,e)}function hB(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function fB(t){return Object.getPrototypeOf(t.constructor)===vv}function pB(t,e){t._syncPendingControls(),e.forEach(n=>{let r=n.control;r.updateOn==="submit"&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function mB(t,e){if(!e)return null;Array.isArray(e);let n,r,i;return e.forEach(s=>{s.constructor===Fo?n=s:fB(s)?r=s:i=s}),i||r||n||null}function gB(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function US(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function jS(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Nh=class extends ko{constructor(e=null,n,r){super(wv(n),Iv(r,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jh(n)&&(n.nonNullable||n.initialValueIsDefault)&&(jS(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){US(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){US(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){jS(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var yB=t=>t instanceof Nh;var $h=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=ft({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let t=e;return t})(),vB={provide:Lh,useExisting:Jr(()=>Tv),multi:!0},Tv=(()=>{let e=class e extends vv{writeValue(r){let i=r??"";this.setProperty("value",i)}registerOnChange(r){this.onChange=i=>{r(i==""?null:parseFloat(i))}}};e.\u0275fac=(()=>{let r;return function(s){return(r||(r=qi(e)))(s||e)}})(),e.\u0275dir=ft({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(i,s){i&1&&Ke("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[yo([vB]),Bn]});let t=e;return t})();var aA=new B("");var _B={provide:Oo,useExisting:Jr(()=>Gc)},Gc=(()=>{let e=class e extends Oo{constructor(r,i,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Xe,this._setValidators(r),this._setAsyncValidators(i)}ngOnChanges(r){this._checkFormPresent(),r.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Fh(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(r){let i=this.form.get(r.path);return LS(i,r,this.callSetDisabledState),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(r),i}getControl(r){return this.form.get(r.path)}removeControl(r){VS(r.control||null,r,!1),gB(this.directives,r)}addFormGroup(r){this._setUpFormContainer(r)}removeFormGroup(r){this._cleanUpFormContainer(r)}getFormGroup(r){return this.form.get(r.path)}addFormArray(r){this._setUpFormContainer(r)}removeFormArray(r){this._cleanUpFormContainer(r)}getFormArray(r){return this.form.get(r.path)}updateModel(r,i){this.form.get(r.path).setValue(i)}onSubmit(r){return this.submitted=!0,pB(this.form,this.directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submitted=!1}_updateDomValue(){this.directives.forEach(r=>{let i=r.control,s=this.form.get(r.path);i!==s&&(VS(i||null,r),yB(s)&&(LS(s,r,this.callSetDisabledState),r.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(r){let i=this.form.get(r.path);lB(i,r),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(r){if(this.form){let i=this.form.get(r.path);i&&dB(i,r)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Cv(this.form,this),this._oldForm&&Fh(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(i){return new(i||e)(Te(HS,10),Te(GS,10),Te(Ev,8))},e.\u0275dir=ft({type:e,selectors:[["","formGroup",""]],hostBindings:function(i,s){i&1&&Ke("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{form:[Et.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[yo([_B]),Bn,Xr]});let t=e;return t})();var wB={provide:Hc,useExisting:Jr(()=>zc)},zc=(()=>{let e=class e extends Hc{set isDisabled(r){}constructor(r,i,s,o,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new Xe,this._ngModelWarningSent=!1,this._parent=r,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=mB(this,o)}ngOnChanges(r){this._added||this._setUpControl(),hB(r,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}get path(){return sB(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(i){return new(i||e)(Te(Oo,13),Te(HS,10),Te(GS,10),Te(Lh,10),Te(aA,8))},e.\u0275dir=ft({type:e,selectors:[["","formControlName",""]],inputs:{name:[Et.None,"formControlName","name"],isDisabled:[Et.None,"disabled","isDisabled"],model:[Et.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[yo([wB]),Bn,Xr]});let t=e;return t})();var cA=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Un({});let t=e;return t})(),yv=class extends ko{constructor(e,n,r){super(wv(n),Iv(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,r={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,n={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),n&&(this.controls.splice(i,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){sA(this,!1,e),e.forEach((r,i)=>{iA(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,r)=>r._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,r)=>{e(n,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function BS(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var qh=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let r=new e;return r.useNonNullable=!0,r}group(r,i=null){let s=this._reduceControls(r),o={};return BS(i)?o=i:i!==null&&(o.validators=i.validator,o.asyncValidators=i.asyncValidator),new Oh(s,o)}record(r,i=null){let s=this._reduceControls(r);return new gv(s,i)}control(r,i,s){let o={};return this.useNonNullable?(BS(i)?o=i:(o.validators=i,o.asyncValidators=s),new Nh(r,Ee(L({},o),{nonNullable:!0}))):new Nh(r,i,s)}array(r,i,s){let o=r.map(a=>this._createControl(a));return new yv(o,i,s)}_reduceControls(r){let i={};return Object.keys(r).forEach(s=>{i[s]=this._createControl(r[s])}),i}_createControl(r){if(r instanceof Nh)return r;if(r instanceof ko)return r;if(Array.isArray(r)){let i=r[0],s=r.length>1?r[1]:null,o=r.length>2?r[2]:null;return this.control(i,s,o)}else return this.control(r)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var uA=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Ev,useValue:r.callSetDisabledState??Bh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Un({imports:[cA]});let t=e;return t})(),Hh=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:aA,useValue:r.warnOnNgModelWithFormControl??"always"},{provide:Ev,useValue:r.callSetDisabledState??Bh}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=jn({type:e}),e.\u0275inj=Un({imports:[cA]});let t=e;return t})();var bv={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};var F=function(t,e){if(!t)throw Xi(e)},Xi=function(t){return new Error("Firebase Database ("+bv.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};var hA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},IB=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){let s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},zh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,h=s>>2,p=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,v=l&63;u||(v=64,o||(m=64)),r.push(n[h],n[p],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(hA(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):IB(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||l==null||p==null)throw new Sv;let m=s<<2|a>>4;if(r.push(m),l!==64){let v=a<<4&240|l>>2;if(r.push(v),p!==64){let b=l<<6&192|p;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Sv=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Rv=function(t){let e=hA(t);return zh.encodeByteArray(e,!0)},Wc=function(t){return Rv(t).replace(/\./g,"")},Kc=function(t){try{return zh.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function fA(t){return pA(void 0,t)}function pA(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:let n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(let n in e)!e.hasOwnProperty(n)||!EB(n)||(t[n]=pA(t[n],e[n]));return t}function EB(t){return t!=="__proto__"}function CB(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var TB=()=>CB().__FIREBASE_DEFAULTS__,DB=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},bB=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&Kc(t[1]);return e&&JSON.parse(e)},Wh=()=>{try{return TB()||DB()||bB()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Nv=t=>{var e,n;return(n=(e=Wh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kh=t=>{let e=Nv(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Mv=()=>{var t;return(t=Wh())===null||t===void 0?void 0:t.config},xv=t=>{var e;return(e=Wh())===null||e===void 0?void 0:e[`_${t}`]};var Ji=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function Qh(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Wc(JSON.stringify(n)),Wc(JSON.stringify(o)),""].join(".")}function rt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Qc(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(rt())}function SB(){var t;let e=(t=Wh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function mA(){let t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Yh(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gA(){let t=rt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Gn(){return bv.NODE_CLIENT===!0||bv.NODE_ADMIN===!0}function yA(){return!SB()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Pv(){try{return typeof indexedDB=="object"}catch{return!1}}function vA(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}var AB="FirebaseError",Zt=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=AB,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Er.prototype.create)}},Er=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?RB(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Zt(i,a,r)}};function RB(t,e){return t.replace(NB,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var NB=/\{\$([^}]+)}/g;function Lo(t){return JSON.parse(t)}function at(t){return JSON.stringify(t)}var _A=function(t){let e={},n={},r={},i="";try{let s=t.split(".");e=Lo(Kc(s[0])||""),n=Lo(Kc(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}};var wA=function(t){let e=_A(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},IA=function(t){let e=_A(t).claims;return typeof e=="object"&&e.admin===!0};function zn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Zi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function Yc(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Jc(t,e,n){let r={};for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function es(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let s=t[i],o=e[i];if(dA(s)&&dA(o)){if(!es(s,o))return!1}else if(s!==o)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function dA(t){return t!==null&&typeof t=="object"}function ts(t){let e=[];for(let[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Vo(t){let e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Uo(t){let e=t.indexOf("?");if(!e)return"";let n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}var Gh=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);let r=this.W_;if(typeof e=="string")for(let p=0;p<16;p++)r[p]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let p=0;p<16;p++)r[p]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let p=16;p<80;p++){let m=r[p-3]^r[p-8]^r[p-14]^r[p-16];r[p]=(m<<1|m>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],a=this.chain_[3],u=this.chain_[4],l,h;for(let p=0;p<80;p++){p<40?p<20?(l=a^s&(o^a),h=1518500249):(l=s^o^a,h=1859775393):p<60?(l=s&o|a&(s|o),h=2400959708):(l=s^o^a,h=3395469782);let m=(i<<5|i>>>27)+l+u+h+r[p]&4294967295;u=a,a=o,o=(s<<30|s>>>2)&4294967295,s=i,i=m}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+a&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);let r=n-this.blockSize,i=0,s=this.buf_,o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){let e=[],n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}};function EA(t,e){let n=new Av(t,e);return n.subscribe.bind(n)}var Av=class{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");MB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dv),i.error===void 0&&(i.error=Dv),i.complete===void 0&&(i.complete=Dv);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function MB(t,e){if(typeof t!="object"||t===null)return!1;for(let n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dv(){}function CA(t,e){return`${t} failed: ${e} argument `}var TA=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){let s=i-55296;r++,F(r<t.length,"Surrogate pair missing trail surrogate.");let o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Xc=function(t){let e=0;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};var RJ=4*60*60*1e3;function ct(t){return t&&t._delegate?t._delegate:t}var $t=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ns="[DEFAULT]";var Jh=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new Ji;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PB(e))try{this.getOrInitializeService({instanceIdentifier:ns})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=ns){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return I(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ns){return this.instances.has(e)}getOptions(e=ns){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){var r;let i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);let o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ns){return this.component?this.component.multipleInstances?e:ns:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function xB(t){return t===ns?void 0:t}function PB(t){return t.instantiationMode==="EAGER"}var Zc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new Jh(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var OB=[],le=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}(le||{}),kB={debug:le.DEBUG,verbose:le.VERBOSE,info:le.INFO,warn:le.WARN,error:le.ERROR,silent:le.SILENT},FB=le.INFO,LB={[le.DEBUG]:"log",[le.VERBOSE]:"log",[le.INFO]:"info",[le.WARN]:"warn",[le.ERROR]:"error"},VB=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=LB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Wn=class{constructor(e){this.name=e,this._logLevel=FB,this._logHandler=VB,this._userLogHandler=null,OB.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?kB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,le.DEBUG,...e),this._logHandler(this,le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,le.VERBOSE,...e),this._logHandler(this,le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,le.INFO,...e),this._logHandler(this,le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,le.WARN,...e),this._logHandler(this,le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,le.ERROR,...e),this._logHandler(this,le.ERROR,...e)}};var UB=(t,e)=>e.some(n=>t instanceof n),DA,bA;function jB(){return DA||(DA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function BB(){return bA||(bA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var SA=new WeakMap,kv=new WeakMap,AA=new WeakMap,Ov=new WeakMap,Lv=new WeakMap;function $B(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Kn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&SA.set(n,t)}).catch(()=>{}),Lv.set(e,t),e}function qB(t){if(kv.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kv.set(t,e)}var Fv={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kv.get(t);if(e==="objectStoreNames")return t.objectStoreNames||AA.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Kn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function RA(t){Fv=t(Fv)}function HB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(Xh(this),e,...n);return AA.set(r,e.sort?e.sort():[e]),Kn(r)}:BB().includes(t)?function(...e){return t.apply(Xh(this),e),Kn(SA.get(this))}:function(...e){return Kn(t.apply(Xh(this),e))}}function GB(t){return typeof t=="function"?HB(t):(t instanceof IDBTransaction&&qB(t),UB(t,jB())?new Proxy(t,Fv):t)}function Kn(t){if(t instanceof IDBRequest)return $B(t);if(Ov.has(t))return Ov.get(t);let e=GB(t);return e!==t&&(Ov.set(t,e),Lv.set(e,t)),e}var Xh=t=>Lv.get(t);function MA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){let o=indexedDB.open(t,e),a=Kn(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Kn(o.result),u.oldVersion,u.newVersion,Kn(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var zB=["get","getKey","getAll","getAllKeys","count"],WB=["put","add","delete","clear"],Vv=new Map;function NA(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vv.get(e))return Vv.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=WB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||zB.includes(n)))return;let s=function(o,...a){return I(this,null,function*(){let u=this.transaction(o,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(a.shift())),(yield Promise.all([l[n](...a),i&&u.done]))[0]})};return Vv.set(e,s),s}RA(t=>Ee(L({},t),{get:(e,n,r)=>NA(e,n)||t.get(e,n,r),has:(e,n)=>!!NA(e,n)||t.has(e,n)}));var jv=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(KB(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function KB(t){let e=t.getComponent();return e?.type==="VERSION"}var Bv="@firebase/app",xA="0.10.5";var rs=new Wn("@firebase/app"),QB="@firebase/app-compat",YB="@firebase/analytics-compat",JB="@firebase/analytics",XB="@firebase/app-check-compat",ZB="@firebase/app-check",e$="@firebase/auth",t$="@firebase/auth-compat",n$="@firebase/database",r$="@firebase/database-compat",i$="@firebase/functions",s$="@firebase/functions-compat",o$="@firebase/installations",a$="@firebase/installations-compat",c$="@firebase/messaging",u$="@firebase/messaging-compat",l$="@firebase/performance",d$="@firebase/performance-compat",h$="@firebase/remote-config",f$="@firebase/remote-config-compat",p$="@firebase/storage",m$="@firebase/storage-compat",g$="@firebase/firestore",y$="@firebase/vertexai-preview",v$="@firebase/firestore-compat",_$="firebase",w$="10.12.2";var $v="[DEFAULT]",I$={[Bv]:"fire-core",[QB]:"fire-core-compat",[JB]:"fire-analytics",[YB]:"fire-analytics-compat",[ZB]:"fire-app-check",[XB]:"fire-app-check-compat",[e$]:"fire-auth",[t$]:"fire-auth-compat",[n$]:"fire-rtdb",[r$]:"fire-rtdb-compat",[i$]:"fire-fn",[s$]:"fire-fn-compat",[o$]:"fire-iid",[a$]:"fire-iid-compat",[c$]:"fire-fcm",[u$]:"fire-fcm-compat",[l$]:"fire-perf",[d$]:"fire-perf-compat",[h$]:"fire-rc",[f$]:"fire-rc-compat",[p$]:"fire-gcs",[m$]:"fire-gcs-compat",[g$]:"fire-fst",[v$]:"fire-fst-compat",[y$]:"fire-vertex","fire-js":"fire-js",[_$]:"fire-js-all"};var eu=new Map,E$=new Map,qv=new Map;function PA(t,e){try{t.container.addComponent(e)}catch(n){rs.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qn(t){let e=t.name;if(qv.has(e))return rs.debug(`There were multiple attempts to register component ${e}.`),!1;qv.set(e,t);for(let n of eu.values())PA(n,t);for(let n of E$.values())PA(n,t);return!0}function is(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Yn(t){return t.settings!==void 0}var C$={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ui=new Er("app","Firebase",C$);var Hv=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $t("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ui.create("app-deleted",{appName:this._name})}};var Jn=w$;function Wv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=Object.assign({name:$v,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ui.create("bad-app-name",{appName:String(i)});if(n||(n=Mv()),!n)throw ui.create("no-options");let s=eu.get(i);if(s){if(es(n,s.options)&&es(r,s.config))return s;throw ui.create("duplicate-app",{appName:i})}let o=new Zc(i);for(let u of qv.values())o.addComponent(u);let a=new Hv(n,r,o);return eu.set(i,a),a}function li(t=$v){let e=eu.get(t);if(!e&&t===$v&&Mv())return Wv();if(!e)throw ui.create("no-app",{appName:t});return e}function Zh(){return Array.from(eu.values())}function Ue(t,e,n){var r;let i=(r=I$[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);let s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${i}" with version "${e}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rs.warn(a.join(" "));return}Qn(new $t(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var T$="firebase-heartbeat-database",D$=1,tu="firebase-heartbeat-store",Uv=null;function LA(){return Uv||(Uv=MA(T$,D$,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(tu)}catch(n){console.warn(n)}}}}).catch(t=>{throw ui.create("idb-open",{originalErrorMessage:t.message})})),Uv}function b$(t){return I(this,null,function*(){try{let n=(yield LA()).transaction(tu),r=yield n.objectStore(tu).get(VA(t));return yield n.done,r}catch(e){if(e instanceof Zt)rs.warn(e.message);else{let n=ui.create("idb-get",{originalErrorMessage:e?.message});rs.warn(n.message)}}})}function OA(t,e){return I(this,null,function*(){try{let r=(yield LA()).transaction(tu,"readwrite");yield r.objectStore(tu).put(e,VA(t)),yield r.done}catch(n){if(n instanceof Zt)rs.warn(n.message);else{let r=ui.create("idb-set",{originalErrorMessage:n?.message});rs.warn(r.message)}}})}function VA(t){return`${t.name}!${t.options.appId}`}var S$=1024,A$=30*24*60*60*1e3,Gv=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new zv(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return I(this,null,function*(){var e,n;let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=kA();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=A$}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return I(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let n=kA(),{heartbeatsToSend:r,unsentEntries:i}=R$(this._heartbeatsCache.heartbeats),s=Wc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function kA(){return new Date().toISOString().substring(0,10)}function R$(t,e=S$){let n=[],r=t.slice();for(let i of t){let s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),FA(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),FA(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var zv=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return I(this,null,function*(){return Pv()?vA().then(()=>!0).catch(()=>!1):!1})}read(){return I(this,null,function*(){if(yield this._canUseIndexedDBPromise){let n=yield b$(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return I(this,null,function*(){var n;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return OA(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function FA(t){return Wc(JSON.stringify({version:2,heartbeats:t})).length}function N$(t){Qn(new $t("platform-logger",e=>new jv(e),"PRIVATE")),Qn(new $t("heartbeat",e=>new Gv(e),"PRIVATE")),Ue(Bv,xA,t),Ue(Bv,xA,"esm2017"),Ue("fire-js","")}N$("");var M$="firebase",x$="10.12.2";Ue(M$,x$,"app");var Cr=new pr("ANGULARFIRE2_VERSION");function Bo(t,e,n){if(e){if(e.length===1)return e[0];let s=e.filter(o=>o.app===n);if(s.length===1)return s[0]}return n.container.getProvider(t).getImmediate({optional:!0})}var os=(t,e)=>{let n=e?[e]:Zh(),r=[];return n.forEach(i=>{i.container.getProvider(t).instances.forEach(o=>{r.includes(o)||r.push(o)})}),r},di=class{constructor(){return os(P$)}},P$="app-check";function jo(){}var ef=class{zone;delegate;constructor(e,n=_m){this.zone=e,this.delegate=n}now(){return this.delegate.now()}schedule(e,n,r){let i=this.zone,s=function(o){i.runGuarded(()=>{e.apply(this,[o])})};return this.delegate.schedule(s,n,r)}},Kv=class{zone;task=null;constructor(e){this.zone=e}call(e,n){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jo,{},jo,jo)),n.pipe(Je({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},hi=(()=>{class t{ngZone;outsideAngular;insideAngular;constructor(n){this.ngZone=n,this.outsideAngular=n.runOutsideAngular(()=>new ef(Zone.current)),this.insideAngular=n.run(()=>new ef(Zone.current,vm)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||t)(K(ye))};static \u0275prov=$({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function tf(){let t=globalThis.\u0275AngularFireScheduler;if(!t)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return t}function O$(t){return tf().ngZone.runOutsideAngular(()=>t())}function ss(t){return tf().ngZone.run(()=>t())}function k$(t){return F$(tf())(t)}function F$(t){return function(n){return n=n.lift(new Kv(t.ngZone)),n.pipe($r(t.outsideAngular),Br(t.insideAngular))}}var L$=(t,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),ss(()=>t.apply(void 0,r))},ln=(t,e)=>function(){let n,r=arguments;for(let s=0;s<arguments.length;s++)typeof r[s]=="function"&&(e&&(n||=ss(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",jo,{},jo,jo))),r[s]=L$(r[s],n));let i=O$(()=>t.apply(this,r));if(!e)if(i instanceof ae){let s=tf();return i.pipe($r(s.outsideAngular),Br(s.insideAngular))}else return ss(()=>i);return i instanceof ae?i.pipe(k$):i instanceof Promise?ss(()=>new Promise((s,o)=>i.then(a=>ss(()=>s(a)),a=>ss(()=>o(a))))):typeof i=="function"&&n?function(){return setTimeout(()=>{n&&n.state==="scheduled"&&n.invoke()},10),i.apply(this,arguments)}:ss(()=>i)};var Tn=class{constructor(e){return e}},Tr=class{constructor(){return Zh()}};function V$(t){return t&&t.length===1?t[0]:new Tn(li())}var Qv=new B("angularfire2._apps"),U$={provide:Tn,useFactory:V$,deps:[[new We,Qv]]},j$={provide:Tr,deps:[[new We,Qv]]};function B$(t){return(e,n)=>{let r=n.get(an);Ue("angularfire",Cr.full,"core"),Ue("angularfire",Cr.full,"app"),Ue("angular",a0.full,r.toString());let i=e.runOutsideAngular(()=>t(n));return new Tn(i)}}function UA(t,...e){return jt([U$,j$,{provide:Qv,useFactory:B$(t),multi:!0,deps:[ye,pt,hi,...e]}])}var jA=ln(Wv,!0);function iR(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var sR=iR,oR=new Er("auth","Firebase",iR());var cf=new Wn("@firebase/auth");function $$(t,...e){cf.logLevel<=le.WARN&&cf.warn(`Auth (${Jn}): ${t}`,...e)}function rf(t,...e){cf.logLevel<=le.ERROR&&cf.error(`Auth (${Jn}): ${t}`,...e)}function Zn(t,...e){throw y_(t,...e)}function as(t,...e){return y_(t,...e)}function aR(t,e,n){let r=Object.assign(Object.assign({},sR()),{[e]:n});return new Er("auth","Firebase",r).create(e,{appName:t.name})}function pi(t){return aR(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function y_(t,...e){if(typeof t!="string"){let n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return oR.create(t,...e)}function X(t,e,...n){if(!t)throw y_(e,...n)}function Dr(t){let e="INTERNAL ASSERTION FAILED: "+t;throw rf(e),new Error(e)}function mi(t,e){t||Dr(e)}function Zv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function q$(){return BA()==="http:"||BA()==="https:"}function BA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function H$(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(q$()||mA()||"connection"in navigator)?navigator.onLine:!0}function G$(){if(typeof navigator>"u")return null;let t=navigator;return t.languages&&t.languages[0]||t.language||null}var cs=class{constructor(e,n){this.shortDelay=e,this.longDelay=n,mi(n>e,"Short delay should be less than long delay!"),this.isMobile=Qc()||Yh()}get(){return H$()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function v_(t,e){mi(t.emulator,"Emulator should always be set here");let{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}var uf=class{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Dr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Dr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Dr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var z$={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var W$=new cs(3e4,6e4);function ls(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}function gi(s,o,a,u){return I(this,arguments,function*(t,e,n,r,i={}){return cR(t,i,()=>I(this,null,function*(){let l={},h={};r&&(e==="GET"?h=r:l={body:JSON.stringify(r)});let p=ts(Object.assign({key:t.config.apiKey},h)).slice(1),m=yield t._getAdditionalHeaders();return m["Content-Type"]="application/json",t.languageCode&&(m["X-Firebase-Locale"]=t.languageCode),uf.fetch()(uR(t,t.config.apiHost,n,p),Object.assign({method:e,headers:m,referrerPolicy:"no-referrer"},l))}))})}function cR(t,e,n){return I(this,null,function*(){t._canInitEmulator=!1;let r=Object.assign(Object.assign({},z$),e);try{let i=new e_(t),s=yield Promise.race([n(),i.promise]);i.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw nf(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw nf(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw nf(t,"user-disabled",o);let h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw aR(t,h,l);Zn(t,h)}}catch(i){if(i instanceof Zt)throw i;Zn(t,"network-request-failed",{message:String(i)})}})}function _f(s,o,a,u){return I(this,arguments,function*(t,e,n,r,i={}){let l=yield gi(t,e,n,r,i);return"mfaPendingCredential"in l&&Zn(t,"multi-factor-auth-required",{_serverResponse:l}),l})}function uR(t,e,n,r){let i=`${e}${n}?${r}`;return t.config.emulator?v_(t.config,i):`${t.config.apiScheme}://${i}`}function K$(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var e_=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(as(this.auth,"network-request-failed")),W$.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function nf(t,e,n){let r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);let i=as(t,e,r);return i.customData._tokenResponse=n,i}function $A(t){return t!==void 0&&t.enterprise!==void 0}var t_=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return K$(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Q$(t,e){return I(this,null,function*(){return gi(t,"GET","/v2/recaptchaConfig",ls(t,e))})}function Y$(t,e){return I(this,null,function*(){return gi(t,"POST","/v1/accounts:delete",e)})}function lR(t,e){return I(this,null,function*(){return gi(t,"POST","/v1/accounts:lookup",e)})}function nu(t){if(t)try{let e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function __(t,e=!1){return I(this,null,function*(){let n=ct(t),r=yield n.getIdToken(e),i=w_(r);X(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");let s=typeof i.firebase=="object"?i.firebase:void 0,o=s?.sign_in_provider;return{claims:i,token:r,authTime:nu(Yv(i.auth_time)),issuedAtTime:nu(Yv(i.iat)),expirationTime:nu(Yv(i.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Yv(t){return Number(t)*1e3}function w_(t){let[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return rf("JWT malformed, contained fewer than 3 sections"),null;try{let i=Kc(n);return i?JSON.parse(i):(rf("Failed to decode base64 JWT payload"),null)}catch(i){return rf("Caught error parsing JWT payload as JSON",i?.toString()),null}}function qA(t){let e=w_(t);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function iu(t,e,n=!1){return I(this,null,function*(){if(n)return e;try{return yield e}catch(r){throw r instanceof Zt&&J$(r)&&t.auth.currentUser===t&&(yield t.auth.signOut()),r}})}function J$({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}var n_=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let n=this.getInterval(e);this.timerId=setTimeout(()=>I(this,null,function*(){yield this.iteration()}),n)}iteration(){return I(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var su=class{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nu(this.lastLoginAt),this.creationTime=nu(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function lf(t){return I(this,null,function*(){var e;let n=t.auth,r=yield t.getIdToken(),i=yield iu(t,lR(n,{idToken:r}));X(i?.users.length,n,"internal-error");let s=i.users[0];t._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?dR(s.providerUserInfo):[],a=X$(t.providerData,o),u=t.isAnonymous,l=!(t.email&&s.passwordHash)&&!a?.length,h=u?l:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new su(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(t,p)})}function I_(t){return I(this,null,function*(){let e=ct(t);yield lf(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function X$(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function dR(t){return t.map(e=>{var{providerId:n}=e,r=wm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Z$(t,e){return I(this,null,function*(){let n=yield cR(t,{},()=>I(this,null,function*(){let r=ts({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=uR(t,i,"/v1/token",`key=${s}`),a=yield t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",uf.fetch()(o,{method:"POST",headers:a,body:r})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})}function eq(t,e){return I(this,null,function*(){return gi(t,"POST","/v2/accounts:revokeToken",ls(t,e))})}var ru=class t{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qA(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){X(e.length!==0,"internal-error");let n=qA(e);this.updateTokensAndExpiration(e,null,n)}getToken(e,n=!1){return I(this,null,function*(){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,n){return I(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:s}=yield Z$(e,n);this.updateTokensAndExpiration(r,i,Number(s))})}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){let{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new t;return r&&(X(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(X(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new t,this.toJSON())}_performRefresh(){return Dr("not implemented")}};function fi(t,e){X(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}var $o=class t{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=wm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new n_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new su(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return I(this,null,function*(){let n=yield iu(this,this.stsTokenManager.getToken(this.auth,e));return X(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n})}getIdTokenResult(e){return __(this,e)}reload(){return I_(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let n=new t(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,n=!1){return I(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&(yield lf(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return I(this,null,function*(){if(Yn(this.auth.app))return Promise.reject(pi(this.auth));let e=yield this.getIdToken();return yield iu(this,Y$(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,a,u,l,h;let p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(i=n.email)!==null&&i!==void 0?i:void 0,v=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(a=n.tenantId)!==null&&a!==void 0?a:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,P=(l=n.createdAt)!==null&&l!==void 0?l:void 0,q=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:H,emailVerified:W,isAnonymous:xe,providerData:ne,stsTokenManager:C}=n;X(H&&C,e,"internal-error");let y=ru.fromJSON(this.name,C);X(typeof H=="string",e,"internal-error"),fi(p,e.name),fi(m,e.name),X(typeof W=="boolean",e,"internal-error"),X(typeof xe=="boolean",e,"internal-error"),fi(v,e.name),fi(b,e.name),fi(N,e.name),fi(R,e.name),fi(P,e.name),fi(q,e.name);let _=new t({uid:H,auth:e,email:m,emailVerified:W,displayName:p,isAnonymous:xe,photoURL:b,phoneNumber:v,tenantId:N,stsTokenManager:y,createdAt:P,lastLoginAt:q});return ne&&Array.isArray(ne)&&(_.providerData=ne.map(E=>Object.assign({},E))),R&&(_._redirectEventId=R),_}static _fromIdTokenResponse(e,n,r=!1){return I(this,null,function*(){let i=new ru;i.updateFromServerResponse(n);let s=new t({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield lf(s),s})}static _fromGetAccountInfoResponse(e,n,r){return I(this,null,function*(){let i=n.users[0];X(i.localId!==void 0,"internal-error");let s=i.providerUserInfo!==void 0?dR(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!s?.length,a=new ru;a.updateFromIdToken(r);let u=new t({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new su(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!s?.length};return Object.assign(u,l),u})}};var HA=new Map;function br(t){mi(t instanceof Function,"Expected a class definition");let e=HA.get(t);return e?(mi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,HA.set(t,e),e)}var tq=(()=>{class t{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return I(this,null,function*(){return!0})}_set(n,r){return I(this,null,function*(){this.storage[n]=r})}_get(n){return I(this,null,function*(){let r=this.storage[n];return r===void 0?null:r})}_remove(n){return I(this,null,function*(){delete this.storage[n]})}_addListener(n,r){}_removeListener(n,r){}}return t.type="NONE",t})(),r_=tq;function sf(t,e,n){return`firebase:${t}:${e}:${n}`}var df=class t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;let{config:i,name:s}=this.auth;this.fullUserKey=sf(this.userKey,i.apiKey,s),this.fullPersistenceKey=sf("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return I(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?$o._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return I(this,null,function*(){if(this.persistence===e)return;let n=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,n,r="authUser"){return I(this,null,function*(){if(!n.length)return new t(br(r_),e,r);let i=(yield Promise.all(n.map(l=>I(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=i[0]||br(r_),o=sf(r,e.config.apiKey,e.name),a=null;for(let l of n)try{let h=yield l._get(o);if(h){let p=$o._fromJSON(e,h);l!==s&&(a=p),s=l;break}}catch{}let u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new t(s,e,r):(s=u[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(n.map(l=>I(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new t(s,e,r))})}};function GA(t){let e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(pR(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hR(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gR(e))return"Blackberry";if(yR(e))return"Webos";if(E_(e))return"Safari";if((e.includes("chrome/")||fR(e))&&!e.includes("edge/"))return"Chrome";if(mR(e))return"Android";{let n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function hR(t=rt()){return/firefox\//i.test(t)}function E_(t=rt()){let e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fR(t=rt()){return/crios\//i.test(t)}function pR(t=rt()){return/iemobile/i.test(t)}function mR(t=rt()){return/android/i.test(t)}function gR(t=rt()){return/blackberry/i.test(t)}function yR(t=rt()){return/webos/i.test(t)}function wf(t=rt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nq(t=rt()){var e;return wf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rq(){return gA()&&document.documentMode===10}function vR(t=rt()){return wf(t)||mR(t)||yR(t)||gR(t)||/windows phone/i.test(t)||pR(t)}function iq(){try{return!!(window&&window!==window.top)}catch{return!1}}function _R(t,e=[]){let n;switch(t){case"Browser":n=GA(rt());break;case"Worker":n=`${GA(rt())}-${t}`;break;default:n=t}let r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Jn}/${r}`}var i_=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){let r=s=>new Promise((o,a)=>{try{let u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return I(this,null,function*(){if(this.auth.currentUser===e)return;let n=[];try{for(let r of this.queue)yield r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(let i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function sq(n){return I(this,arguments,function*(t,e={}){return gi(t,"GET","/v2/passwordPolicy",ls(t,e))})}var oq=6,s_=class{constructor(e){var n,r,i,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:oq,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,a;let u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var o_=class{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hf(this),this.idTokenSubscription=new hf(this),this.beforeStateQueue=new i_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=oR,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(()=>I(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield df.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return I(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return I(this,null,function*(){try{let n=yield lR(this,{idToken:e}),r=yield $o._fromGetAccountInfoResponse(this,n,e);yield this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return I(this,null,function*(){var n;if(Yn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i?._redirectEventId,u=yield this.tryRedirectSignIn(e);(!o||o===a)&&u?.user&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return I(this,null,function*(){let n=null;try{n=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return n})}reloadAndSetCurrentUserOrClear(e){return I(this,null,function*(){try{yield lf(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=G$()}_delete(){return I(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return I(this,null,function*(){if(Yn(this.app))return Promise.reject(pi(this));let n=e?ct(e):null;return n&&X(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))})}_updateCurrentUser(e,n=!1){return I(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>I(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return I(this,null,function*(){return Yn(this.app)?Promise.reject(pi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Yn(this.app)?Promise.reject(pi(this)):this.queue(()=>I(this,null,function*(){yield this.assertedPersistence.setPersistence(br(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return I(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return I(this,null,function*(){let e=yield sq(this),n=new s_(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Er("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},n)}})}revokeAccessToken(e){return I(this,null,function*(){if(this.currentUser){let n=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),yield eq(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,n){return I(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return I(this,null,function*(){if(!this.redirectPersistenceManager){let n=e&&br(e)||this._popupRedirectResolver;X(n,this,"argument-error"),this.redirectPersistenceManager=yield df.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return I(this,null,function*(){var n,r;return this._isInitialized&&(yield this.queue(()=>I(this,null,function*(){}))),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return I(this,null,function*(){if(e===this.currentUser)return this.queue(()=>I(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};let s=typeof n=="function"?n:n.next.bind(n),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){let u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{let u=e.addObserver(n);return()=>{o=!0,u()}}}directlySetCurrentUser(e){return I(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_R(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return I(this,null,function*(){var e;let n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(n["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n})}_getAppCheckToken(){return I(this,null,function*(){var e;let n=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return n?.error&&$$(`Error while retrieving App Check token: ${n.error}`),n?.token})}};function qo(t){return ct(t)}var hf=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=EA(n=>this.observer=n)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var If={loadJS(){return I(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function aq(t){If=t}function wR(t){return If.loadJS(t)}function cq(){return If.recaptchaEnterpriseScript}function uq(){return If.gapiScript}function IR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}var lq="recaptcha-enterprise",dq="NO_RECAPTCHA",a_=class{constructor(e){this.type=lq,this.auth=qo(e)}verify(e="verify",n=!1){return I(this,null,function*(){function r(s){return I(this,null,function*(){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise((o,a)=>I(this,null,function*(){Q$(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{let l=new t_(u);return s.tenantId==null?s._agentRecaptchaConfig=l:s._tenantRecaptchaConfigs[s.tenantId]=l,o(l.siteKey)}}).catch(u=>{a(u)})}))})}function i(s,o,a){let u=window.grecaptcha;$A(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(l=>{o(l)}).catch(()=>{o(dq)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&$A(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=cq();u.length!==0&&(u+=a),wR(u).then(()=>{i(a,s,o)}).catch(l=>{o(l)})}}).catch(a=>{o(a)})})})}};function zA(t,e,n,r=!1){return I(this,null,function*(){let i=new a_(t),s;try{s=yield i.verify(n)}catch{s=yield i.verify(n,!0)}let o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o})}function WA(t,e,n,r){return I(this,null,function*(){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let s=yield zA(t,e,n,n==="getOobCode");return r(t,s)}else return r(t,e).catch(s=>I(this,null,function*(){if(s.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let o=yield zA(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(s)}))})}function C_(t,e){let n=is(t,"auth");if(n.isInitialized()){let i=n.getImmediate(),s=n.getOptions();if(es(s,e??{}))return i;Zn(i,"already-initialized")}return n.initialize({options:e})}function hq(t,e){let n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(br);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function T_(t,e,n){let r=qo(t);X(r._canInitEmulator,r,"emulator-config-failed"),X(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!n?.disableWarnings,s=ER(e),{host:o,port:a}=fq(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||pq()}function ER(t){let e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fq(t){let e=ER(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};let r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let s=i[1];return{host:s,port:KA(r.substr(s.length+1))}}else{let[s,o]=r.split(":");return{host:s,port:KA(o)}}}function KA(t){if(!t)return null;let e=Number(t);return isNaN(e)?null:e}function pq(){function t(){let e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}var ou=class{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Dr("not implemented")}_getIdTokenResponse(e){return Dr("not implemented")}_linkToIdToken(e,n){return Dr("not implemented")}_getReauthenticationResolver(e){return Dr("not implemented")}};function mq(t,e){return I(this,null,function*(){return gi(t,"POST","/v1/accounts:signUp",e)})}function gq(t,e){return I(this,null,function*(){return _f(t,"POST","/v1/accounts:signInWithPassword",ls(t,e))})}function yq(t,e){return I(this,null,function*(){return _f(t,"POST","/v1/accounts:signInWithEmailLink",ls(t,e))})}function vq(t,e){return I(this,null,function*(){return _f(t,"POST","/v1/accounts:signInWithEmailLink",ls(t,e))})}var au=class t extends ou{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new t(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new t(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}_getIdTokenResponse(e){return I(this,null,function*(){switch(this.signInMethod){case"password":let n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WA(e,n,"signInWithPassword",gq);case"emailLink":return yq(e,{email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}})}_linkToIdToken(e,n){return I(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return WA(e,r,"signUpPassword",mq);case"emailLink":return vq(e,{idToken:n,email:this._email,oobCode:this._password});default:Zn(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function Jv(t,e){return I(this,null,function*(){return _f(t,"POST","/v1/accounts:signInWithIdp",ls(t,e))})}function _q(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function wq(t){let e=Vo(Uo(t)).link,n=e?Vo(Uo(e)).deep_link_id:null,r=Vo(Uo(t)).deep_link_id;return(r?Vo(Uo(r)).link:null)||r||n||e||t}var ff=class t{constructor(e){var n,r,i,s,o,a;let u=Vo(Uo(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,p=_q((i=u.mode)!==null&&i!==void 0?i:null);X(l&&h&&p,"argument-error"),this.apiKey=l,this.operation=p,this.code=h,this.continueUrl=(s=u.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){let n=wq(e);try{return new t(n)}catch{return null}}};var CR=(()=>{class t{constructor(){this.providerId=t.PROVIDER_ID}static credential(n,r){return au._fromEmailAndPassword(n,r)}static credentialWithLink(n,r){let i=ff.parseLink(r);return X(i,"argument-error"),au._fromEmailAndCode(n,i.code,i.tenantId)}}t.PROVIDER_ID="password",t.EMAIL_PASSWORD_SIGN_IN_METHOD="password",t.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return t})(),pf=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var c_=class extends pf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var cu=class t{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,n,r,i=!1){return I(this,null,function*(){let s=yield $o._fromIdTokenResponse(e,r,i),o=QA(r);return new t({user:s,providerId:o,_tokenResponse:r,operationType:n})})}static _forOperation(e,n,r){return I(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=QA(r);return new t({user:e,providerId:i,_tokenResponse:r,operationType:n})})}};function QA(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}var u_=class t extends Zt{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,t.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new t(e,n,r,i)}};function TR(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?u_._fromErrorAndOperation(t,s,e,r):s})}function Iq(t,e,n=!1){return I(this,null,function*(){let r=yield iu(t,e._linkToIdToken(t.auth,yield t.getIdToken()),n);return cu._forOperation(t,"link",r)})}function Eq(t,e,n=!1){return I(this,null,function*(){let{auth:r}=t;if(Yn(r.app))return Promise.reject(pi(r));let i="reauthenticate";try{let s=yield iu(t,TR(r,i,e,t),n);X(s.idToken,r,"internal-error");let o=w_(s.idToken);X(o,r,"internal-error");let{sub:a}=o;return X(t.uid===a,r,"user-mismatch"),cu._forOperation(t,i,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zn(r,"user-mismatch"),s}})}function DR(t,e,n=!1){return I(this,null,function*(){if(Yn(t.app))return Promise.reject(pi(t));let r="signIn",i=yield TR(t,r,e),s=yield cu._fromIdTokenResponse(t,r,i);return n||(yield t._updateCurrentUser(s.user)),s})}function D_(t,e){return I(this,null,function*(){return DR(qo(t),e)})}function Cq(t){return I(this,null,function*(){let e=qo(t);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function b_(t,e,n){return Yn(t.app)?Promise.reject(pi(t)):D_(ct(t),CR.credential(e,n)).catch(r=>I(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Cq(t),r}))}function S_(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function A_(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}var mf="__sak";var gf=class{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(mf,"1"),this.storage.removeItem(mf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){let n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function Tq(){let t=rt();return E_(t)||wf(t)}var Dq=1e3,bq=10,Sq=(()=>{class t extends gf{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(n,r)=>this.onStorageEvent(n,r),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Tq()&&iq(),this.fallbackToPolling=vR(),this._shouldAllowMigration=!0}forAllChangedKeys(n){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),s=this.localCache[r];i!==s&&n(r,s,i)}}onStorageEvent(n,r=!1){if(!n.key){this.forAllChangedKeys((a,u,l)=>{this.notifyListeners(a,l)});return}let i=n.key;if(r?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(i);if(n.newValue!==a)n.newValue!==null?this.storage.setItem(i,n.newValue):this.storage.removeItem(i);else if(this.localCache[i]===n.newValue&&!r)return}let s=()=>{let a=this.storage.getItem(i);!r&&this.localCache[i]===a||this.notifyListeners(i,a)},o=this.storage.getItem(i);rq()&&o!==n.newValue&&n.newValue!==n.oldValue?setTimeout(s,bq):s()}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((n,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:n,oldValue:r,newValue:i}),!0)})},Dq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(n,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[n]||(this.listeners[n]=new Set,this.localCache[n]=this.storage.getItem(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(n,r){return I(this,null,function*(){yield Ur(t.prototype,this,"_set").call(this,n,r),this.localCache[n]=JSON.stringify(r)})}_get(n){return I(this,null,function*(){let r=yield Ur(t.prototype,this,"_get").call(this,n);return this.localCache[n]=JSON.stringify(r),r})}_remove(n){return I(this,null,function*(){yield Ur(t.prototype,this,"_remove").call(this,n),delete this.localCache[n]})}}return t.type="LOCAL",t})(),bR=Sq;var Aq=(()=>{class t extends gf{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(n,r){}_removeListener(n,r){}}return t.type="SESSION",t})(),R_=Aq;function Rq(t){return Promise.all(t.map(e=>I(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(n){return{fulfilled:!1,reason:n}}})))}var Nq=(()=>{class t{constructor(n){this.eventTarget=n,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(n){let r=this.receivers.find(s=>s.isListeningto(n));if(r)return r;let i=new t(n);return this.receivers.push(i),i}isListeningto(n){return this.eventTarget===n}handleEvent(n){return I(this,null,function*(){let r=n,{eventId:i,eventType:s,data:o}=r.data,a=this.handlersMap[s];if(!a?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:s});let u=Array.from(a).map(h=>I(this,null,function*(){return h(r.origin,o)})),l=yield Rq(u);r.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})})}_subscribe(n,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[n]||(this.handlersMap[n]=new Set),this.handlersMap[n].add(r)}_unsubscribe(n,r){this.handlersMap[n]&&r&&this.handlersMap[n].delete(r),(!r||this.handlersMap[n].size===0)&&delete this.handlersMap[n],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}t.receivers=[];return t})();function SR(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}var l_=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,n,r=50){return I(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{let l=SR("",20);i.port1.start();let h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(p){let m=p;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(h),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Xn(){return window}function Mq(t){Xn().location.href=t}function AR(){return typeof Xn().WorkerGlobalScope<"u"&&typeof Xn().importScripts=="function"}function xq(){return I(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function Pq(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Oq(){return AR()?self:null}var RR="firebaseLocalStorageDb",kq=1,yf="firebaseLocalStorage",NR="fbase_key",us=class{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function Ef(t,e){return t.transaction([yf],e?"readwrite":"readonly").objectStore(yf)}function Fq(){let t=indexedDB.deleteDatabase(RR);return new us(t).toPromise()}function d_(){let t=indexedDB.open(RR,kq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{let r=t.result;try{r.createObjectStore(yf,{keyPath:NR})}catch(i){n(i)}}),t.addEventListener("success",()=>I(this,null,function*(){let r=t.result;r.objectStoreNames.contains(yf)?e(r):(r.close(),yield Fq(),e(yield d_()))}))})}function YA(t,e,n){return I(this,null,function*(){let r=Ef(t,!0).put({[NR]:e,value:n});return new us(r).toPromise()})}function Lq(t,e){return I(this,null,function*(){let n=Ef(t,!1).get(e),r=yield new us(n).toPromise();return r===void 0?null:r.value})}function JA(t,e){let n=Ef(t,!0).delete(e);return new us(n).toPromise()}var Vq=800,Uq=3,jq=(()=>{class t{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return I(this,null,function*(){return this.db?this.db:(this.db=yield d_(),this.db)})}_withRetries(n){return I(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield n(i)}catch(i){if(r++>Uq)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return I(this,null,function*(){return AR()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return I(this,null,function*(){this.receiver=Nq._getInstance(Oq()),this.receiver._subscribe("keyChanged",(n,r)=>I(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(n,r)=>I(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return I(this,null,function*(){var n,r;if(this.activeServiceWorker=yield xq(),!this.activeServiceWorker)return;this.sender=new l_(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((n=i[0])===null||n===void 0)&&n.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(n){return I(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||Pq()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:n},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return I(this,null,function*(){try{if(!indexedDB)return!1;let n=yield d_();return yield YA(n,mf,"1"),yield JA(n,mf),!0}catch{}return!1})}_withPendingWrite(n){return I(this,null,function*(){this.pendingWrites++;try{yield n()}finally{this.pendingWrites--}})}_set(n,r){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(i=>YA(i,n,r)),this.localCache[n]=r,this.notifyServiceWorker(n)}))})}_get(n){return I(this,null,function*(){let r=yield this._withRetries(i=>Lq(i,n));return this.localCache[n]=r,r})}_remove(n){return I(this,null,function*(){return this._withPendingWrite(()=>I(this,null,function*(){return yield this._withRetries(r=>JA(r,n)),delete this.localCache[n],this.notifyServiceWorker(n)}))})}_poll(){return I(this,null,function*(){let n=yield this._withRetries(s=>{let o=Ef(s,!1).getAll();return new us(o).toPromise()});if(!n)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(n.length!==0)for(let{fbase_key:s,value:o}of n)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),r.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),r.push(s));return r})}notifyListeners(n,r){this.localCache[n]=r;let i=this.listeners[n];if(i)for(let s of Array.from(i))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>I(this,null,function*(){return this._poll()}),Vq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(n,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[n]||(this.listeners[n]=new Set,this._get(n)),this.listeners[n].add(r)}_removeListener(n,r){this.listeners[n]&&(this.listeners[n].delete(r),this.listeners[n].size===0&&delete this.listeners[n]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return t.type="LOCAL",t})(),MR=jq;var IX=IR("rcb"),EX=new cs(3e4,6e4);function Bq(t,e){return e?br(e):(X(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}var uu=class extends ou{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jv(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jv(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jv(e,this._buildIdpRequest())}_buildIdpRequest(e){let n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}};function $q(t){return DR(t.auth,new uu(t),t.bypassAuthState)}function qq(t){let{auth:e,user:n}=t;return X(n,e,"internal-error"),Eq(n,new uu(t),t.bypassAuthState)}function Hq(t){return I(this,null,function*(){let{auth:e,user:n}=t;return X(n,e,"internal-error"),Iq(n,new uu(t),t.bypassAuthState)})}var h_=class{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise((e,n)=>I(this,null,function*(){this.pendingPromise={resolve:e,reject:n};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return I(this,null,function*(){let{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(u))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $q;case"linkViaPopup":case"linkViaRedirect":return Hq;case"reauthViaPopup":case"reauthViaRedirect":return qq;default:Zn(this.auth,"internal-error")}}resolve(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var CX=new cs(2e3,1e4);var Gq="pendingRedirect",of=new Map,f_=class t extends h_{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}execute(){return I(this,null,function*(){let e=of.get(this.auth._key());if(!e){try{let r=(yield zq(this.resolver,this.auth))?yield Ur(t.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}of.set(this.auth._key(),e)}return this.bypassAuthState||of.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return I(this,null,function*(){if(e.type==="signInViaRedirect")return Ur(t.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let n=yield this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,Ur(t.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return I(this,null,function*(){})}cleanUp(){}};function zq(t,e){return I(this,null,function*(){let n=Qq(e),r=Kq(t);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(n))==="true";return yield r._remove(n),i})}function Wq(t,e){of.set(t._key(),e)}function Kq(t){return br(t._redirectPersistence)}function Qq(t){return sf(Gq,t.config.apiKey,t.name)}function Yq(t,e,n=!1){return I(this,null,function*(){if(Yn(t.app))return Promise.reject(pi(t));let r=qo(t),i=Bq(r,e),o=yield new f_(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,yield r._persistUserIfCurrent(o.user),yield r._setRedirectUser(null,e)),o})}var Jq=10*60*1e3,p_=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xR(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(as(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){let r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Jq&&this.cachedEventUids.clear(),this.cachedEventUids.has(XA(e))}saveEventToCache(e){this.cachedEventUids.add(XA(e)),this.lastProcessedEventTime=Date.now()}};function XA(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xR({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Xq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xR(t);default:return!1}}function Zq(n){return I(this,arguments,function*(t,e={}){return gi(t,"GET","/v1/projects",e)})}var eH=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tH=/^https?/;function nH(t){return I(this,null,function*(){if(t.config.emulator)return;let{authorizedDomains:e}=yield Zq(t);for(let n of e)try{if(rH(n))return}catch{}Zn(t,"unauthorized-domain")})}function rH(t){let e=Zv(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){let o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!tH.test(n))return!1;if(eH.test(t))return r===t;let i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var iH=new cs(3e4,6e4);function ZA(){let t=Xn().___jsl;if(t?.H){for(let e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sH(t){return new Promise((e,n)=>{var r,i,s;function o(){ZA(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ZA(),n(as(t,"network-request-failed"))},timeout:iH.get()})}if(!((i=(r=Xn().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Xn().gapi)===null||s===void 0)&&s.load)o();else{let a=IR("iframefcb");return Xn()[a]=()=>{gapi.load?o():n(as(t,"network-request-failed"))},wR(`${uq()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw af=null,e})}var af=null;function oH(t){return af=af||sH(t),af}var aH=new cs(5e3,15e3),cH="__/auth/iframe",uH="emulator/auth/iframe",lH={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dH=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hH(t){let e=t.config;X(e.authDomain,t,"auth-domain-config-required");let n=e.emulator?v_(e,uH):`https://${t.config.authDomain}/${cH}`,r={apiKey:e.apiKey,appName:t.name,v:Jn},i=dH.get(t.config.apiHost);i&&(r.eid=i);let s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ts(r).slice(1)}`}function fH(t){return I(this,null,function*(){let e=yield oH(t),n=Xn().gapi;return X(n,t,"internal-error"),e.open({where:document.body,url:hH(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lH,dontclear:!0},r=>new Promise((i,s)=>I(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let o=as(t,"network-request-failed"),a=Xn().setTimeout(()=>{s(o)},aH.get());function u(){Xn().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})})))})}var pH={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},mH=500,gH=600,yH="_blank",vH="http://localhost",vf=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function _H(t,e,n,r=mH,i=gH){let s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),a="",u=Object.assign(Object.assign({},pH),{width:r.toString(),height:i.toString(),top:s,left:o}),l=rt().toLowerCase();n&&(a=fR(l)?yH:n),hR(l)&&(e=e||vH,u.scrollbars="yes");let h=Object.entries(u).reduce((m,[v,b])=>`${m}${v}=${b},`,"");if(nq(l)&&a!=="_self")return wH(e||"",a),new vf(null);let p=window.open(e||"",a,h);X(p,t,"popup-blocked");try{p.focus()}catch{}return new vf(p)}function wH(t,e){let n=document.createElement("a");n.href=t,n.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var IH="__/auth/handler",EH="emulator/auth/handler",CH=encodeURIComponent("fac");function eR(t,e,n,r,i,s){return I(this,null,function*(){X(t.config.authDomain,t,"auth-domain-config-required"),X(t.config.apiKey,t,"invalid-api-key");let o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Jn,eventId:i};if(e instanceof pf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Yc(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,p]of Object.entries(s||{}))o[h]=p}if(e instanceof c_){let h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let u=yield t._getAppCheckToken(),l=u?`#${CH}=${encodeURIComponent(u)}`:"";return`${TH(t)}?${ts(a).slice(1)}${l}`})}function TH({config:t}){return t.emulator?v_(t,EH):`https://${t.authDomain}/${IH}`}var Xv="webStorageSupport",m_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=R_,this._completeRedirectFn=Yq,this._overrideRedirectResult=Wq}_openPopup(e,n,r,i){return I(this,null,function*(){var s;mi((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield eR(e,n,r,Zv(),i);return _H(e,o,SR())})}_openRedirect(e,n,r,i){return I(this,null,function*(){yield this._originValidation(e);let s=yield eR(e,n,r,Zv(),i);return Mq(s),new Promise(()=>{})})}_initialize(e){let n=e._key();if(this.eventManagers[n]){let{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(mi(s,"If manager is not set, promise should be"),s)}let r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}initAndGetManager(e){return I(this,null,function*(){let n=yield fH(e),r=new p_(e);return n.register("authEvent",i=>(X(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r})}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Xv,{type:Xv},i=>{var s;let o=(s=i?.[0])===null||s===void 0?void 0:s[Xv];o!==void 0&&n(!!o),Zn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nH(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return vR()||E_()||wf()}},PR=m_;var tR="@firebase/auth",nR="1.7.4";var g_=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return I(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function DH(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bH(t){Qn(new $t("auth",(e,{options:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});let u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_R(t)},l=new o_(r,i,s,u);return hq(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qn(new $t("auth-internal",e=>{let n=qo(e.getProvider("auth").getImmediate());return(r=>new g_(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(tR,nR,DH(t)),Ue(tR,nR,"esm2017")}var SH=5*60,AH=xv("authIdTokenMaxAge")||SH,rR=null,RH=t=>e=>I(void 0,null,function*(){let n=e&&(yield e.getIdTokenResult()),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AH)return;let i=n?.token;rR!==i&&(rR=i,yield fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function N_(t=li()){let e=is(t,"auth");if(e.isInitialized())return e.getImmediate();let n=C_(t,{popupRedirectResolver:PR,persistence:[MR,bR,R_]}),r=xv("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(r,location.origin);if(location.origin===s.origin){let o=RH(s.toString());A_(n,o,()=>o(n.currentUser)),S_(n,a=>o(a))}}let i=Nv("auth");return i&&T_(n,`http://${i}`),n}function NH(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}aq({loadJS(t){return new Promise((e,n)=>{let r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{let s=as("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",NH().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bH("Browser");var OR="auth",ds=class{constructor(e){return e}},hs=class{constructor(){return os(OR)}};var M_=new B("angularfire2.auth-instances");function EG(t,e){let n=Bo(OR,t,e);return n&&new ds(n)}function CG(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new ds(r)}}var TG={provide:hs,deps:[[new We,M_]]},DG={provide:ds,useFactory:EG,deps:[[new We,M_],Tn]};function kR(t,...e){return Ue("angularfire",Cr.full,"auth"),jt([DG,TG,{provide:M_,useFactory:CG(t),multi:!0,deps:[ye,pt,hi,Tr,[new We,di],...e]}])}var FR=ln(N_,!0);var LR=ln(b_,!0);var VR=(()=>{let e=class e{constructor(){this._auth=M(ds)}login(r,i,s){return LR(this._auth,r,i).then(o=>{localStorage.setItem("loggedUser",JSON.stringify(Ee(L({},o.user),{role:s})))}).catch(o=>{console.log(o);let a="";switch(o.code){case"auth/invalid-email":a="El correo ingresado no es valido.";break;case"auth/email-already-in-use":a="El correo ingresado ya fue registrado.";break;case"auth/weak-password":a="La contrase\xF1a debe tener por lo menos 6 caracteres.";break;default:a="Ocurrio un error.";break}return alert(a),!1}),!0}logout(){localStorage.removeItem("loggedUser")}getLoggedUser(){return JSON.parse(localStorage.getItem("loggedUser")||JSON.stringify({}))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Cf=function(t){return t[t.Administrator=1]="Administrator",t[t.User=2]="User",t}(Cf||{});function bG(t,e){t&1&&(U(0,"div",10),J(1,"El nombre de usuario es requerido."),V())}function SG(t,e){if(t&1&&(U(0,"div"),je(1,bG,2,0,"div",9),V()),t&2){let n=Kt();ue(),De("ngIf",n.userControl.errors==null?null:n.userControl.errors.required)}}function AG(t,e){t&1&&(U(0,"div",10),J(1,"La contrase\xF1a es requerida."),V())}function RG(t,e){if(t&1&&(U(0,"div"),je(1,AG,2,0,"div",9),V()),t&2){let n=Kt();ue(),De("ngIf",n.passwordControl.errors==null?null:n.passwordControl.errors.required)}}var UR=(()=>{let e=class e{constructor(){this.authService=M(VR),this.formBuilder=M(qh),this.router=M(Xt)}ngOnInit(){this.loginForm=this.formBuilder.group({username:["",Ft.required],password:["",Ft.required]})}login(){if(this.loginForm.valid){let r=this.formControls.username.value,i=this.formControls.password.value;this.authService.login(r,i,this.currentRole)&&this.router.navigateByUrl("home")}else this.loginForm.markAllAsTouched()}setAdminCredentials(){this.userControl.setValue("admin@mail.com"),this.passwordControl.setValue("admin123"),this.currentRole=Cf.Administrator}setRegularCredentials(){this.userControl.setValue("user@mail.com"),this.passwordControl.setValue("user123"),this.currentRole=Cf.User}get userControl(){return this.loginForm.controls.username}get passwordControl(){return this.loginForm.controls.password}get formControls(){return this.loginForm.controls}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-login"]],standalone:!0,features:[et],decls:20,vars:3,consts:[[1,"screen"],[3,"submit","formGroup"],[2,"display","flex","flex-direction","column"],["type","text","formControlName","username","placeholder","Usuario"],[4,"ngIf"],["type","password","formControlName","password","placeholder","Contrase\xF1a"],["type","submit"],[2,"display","flex","gap","8px"],[3,"click"],["class","error",4,"ngIf"],[1,"error"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"div")(2,"h1"),J(3,"Inicia sesion"),V()(),U(4,"form",1),Ke("submit",function(){return s.login()}),U(5,"div",2),Ve(6,"input",3),je(7,SG,2,1,"div",4),V(),U(8,"div",2),Ve(9,"input",5),je(10,RG,2,1,"div",4),V(),U(11,"button",6),J(12,"Iniciar sesi\xF3n"),V()(),U(13,"h3"),J(14,"Credenciales"),V(),U(15,"div",7)(16,"button",8),Ke("click",function(){return s.setAdminCredentials()}),J(17,"Usuario admin"),V(),U(18,"button",8),Ke("click",function(){return s.setRegularCredentials()}),J(19,"Usuario comun"),V()()()),i&2&&(ue(4),De("formGroup",s.loginForm),ue(3),De("ngIf",s.userControl.touched&&s.userControl.invalid),ue(3),De("ngIf",s.passwordControl.touched&&s.passwordControl.invalid))},dependencies:[uA,$h,Fo,Vh,Uh,Hh,Gc,zc,Qt,cn]});let t=e;return t})();function NG(t,e){if(t&1&&(yr(0),U(1,"h1"),J(2),V(),Ve(3,"img",3),U(4,"h3"),J(5),V(),U(6,"button",4),J(7,"Iniciar sesion"),V(),vr()),t&2){let n=Kt();ue(2),zi(n.aboutData.name),ue(),De("src",n.aboutData.avatar_url,Hi),ue(2),Cn("Seguidores: ",n.aboutData.followers,"")}}function MG(t,e){t&1&&(U(0,"h1"),J(1,"Cargando..."),V())}var jR=(()=>{let e=class e{constructor(){this.aboutData=null,this.httpClient=M(gc)}ngOnInit(){this.httpClient.get("https://api.github.com/users/julianschmidt1").subscribe({next:r=>{console.log(r),this.aboutData=r}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-welcome"]],standalone:!0,features:[et],decls:4,vars:2,consts:[["loading",""],[1,"screen"],[4,"ngIf","ngIfElse"],["alt","",2,"height","250px","width","250px",3,"src"],["routerLink","/login"]],template:function(i,s){if(i&1&&(U(0,"div",1),je(1,NG,8,3,"ng-container",2)(2,MG,2,0,"ng-template",null,0,Wd),V()),i&2){let o=zd(3);ue(),De("ngIf",s.aboutData)("ngIfElse",o)}},dependencies:[Qt,cn,Ah,Sh]});let t=e;return t})();var BR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$R={};var yi,x_;(function(){var t;function e(C,y){function _(){}_.prototype=y.prototype,C.D=y.prototype,C.prototype=new _,C.prototype.constructor=C,C.C=function(E,T,S){for(var w=Array(arguments.length-2),ar=2;ar<arguments.length;ar++)w[ar-2]=arguments[ar];return y.prototype[T].apply(E,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(C,y,_){_||(_=0);var E=Array(16);if(typeof y=="string")for(var T=0;16>T;++T)E[T]=y.charCodeAt(_++)|y.charCodeAt(_++)<<8|y.charCodeAt(_++)<<16|y.charCodeAt(_++)<<24;else for(T=0;16>T;++T)E[T]=y[_++]|y[_++]<<8|y[_++]<<16|y[_++]<<24;y=C.g[0],_=C.g[1],T=C.g[2];var S=C.g[3],w=y+(S^_&(T^S))+E[0]+3614090360&4294967295;y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[1]+3905402710&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[2]+606105819&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[3]+3250441966&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(S^_&(T^S))+E[4]+4118548399&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[5]+1200080426&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[6]+2821735955&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[7]+4249261313&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(S^_&(T^S))+E[8]+1770035416&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[9]+2336552879&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[10]+4294925233&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[11]+2304563134&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(S^_&(T^S))+E[12]+1804603682&4294967295,y=_+(w<<7&4294967295|w>>>25),w=S+(T^y&(_^T))+E[13]+4254626195&4294967295,S=y+(w<<12&4294967295|w>>>20),w=T+(_^S&(y^_))+E[14]+2792965006&4294967295,T=S+(w<<17&4294967295|w>>>15),w=_+(y^T&(S^y))+E[15]+1236535329&4294967295,_=T+(w<<22&4294967295|w>>>10),w=y+(T^S&(_^T))+E[1]+4129170786&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[6]+3225465664&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[11]+643717713&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[0]+3921069994&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(T^S&(_^T))+E[5]+3593408605&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[10]+38016083&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[15]+3634488961&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[4]+3889429448&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(T^S&(_^T))+E[9]+568446438&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[14]+3275163606&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[3]+4107603335&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[8]+1163531501&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(T^S&(_^T))+E[13]+2850285829&4294967295,y=_+(w<<5&4294967295|w>>>27),w=S+(_^T&(y^_))+E[2]+4243563512&4294967295,S=y+(w<<9&4294967295|w>>>23),w=T+(y^_&(S^y))+E[7]+1735328473&4294967295,T=S+(w<<14&4294967295|w>>>18),w=_+(S^y&(T^S))+E[12]+2368359562&4294967295,_=T+(w<<20&4294967295|w>>>12),w=y+(_^T^S)+E[5]+4294588738&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[8]+2272392833&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[11]+1839030562&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[14]+4259657740&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(_^T^S)+E[1]+2763975236&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[4]+1272893353&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[7]+4139469664&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[10]+3200236656&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(_^T^S)+E[13]+681279174&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[0]+3936430074&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[3]+3572445317&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[6]+76029189&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(_^T^S)+E[9]+3654602809&4294967295,y=_+(w<<4&4294967295|w>>>28),w=S+(y^_^T)+E[12]+3873151461&4294967295,S=y+(w<<11&4294967295|w>>>21),w=T+(S^y^_)+E[15]+530742520&4294967295,T=S+(w<<16&4294967295|w>>>16),w=_+(T^S^y)+E[2]+3299628645&4294967295,_=T+(w<<23&4294967295|w>>>9),w=y+(T^(_|~S))+E[0]+4096336452&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[7]+1126891415&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[14]+2878612391&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[5]+4237533241&4294967295,_=T+(w<<21&4294967295|w>>>11),w=y+(T^(_|~S))+E[12]+1700485571&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[3]+2399980690&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[10]+4293915773&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[1]+2240044497&4294967295,_=T+(w<<21&4294967295|w>>>11),w=y+(T^(_|~S))+E[8]+1873313359&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[15]+4264355552&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[6]+2734768916&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[13]+1309151649&4294967295,_=T+(w<<21&4294967295|w>>>11),w=y+(T^(_|~S))+E[4]+4149444226&4294967295,y=_+(w<<6&4294967295|w>>>26),w=S+(_^(y|~T))+E[11]+3174756917&4294967295,S=y+(w<<10&4294967295|w>>>22),w=T+(y^(S|~_))+E[2]+718787259&4294967295,T=S+(w<<15&4294967295|w>>>17),w=_+(S^(T|~y))+E[9]+3951481745&4294967295,C.g[0]=C.g[0]+y&4294967295,C.g[1]=C.g[1]+(T+(w<<21&4294967295|w>>>11))&4294967295,C.g[2]=C.g[2]+T&4294967295,C.g[3]=C.g[3]+S&4294967295}r.prototype.u=function(C,y){y===void 0&&(y=C.length);for(var _=y-this.blockSize,E=this.B,T=this.h,S=0;S<y;){if(T==0)for(;S<=_;)i(this,C,S),S+=this.blockSize;if(typeof C=="string"){for(;S<y;)if(E[T++]=C.charCodeAt(S++),T==this.blockSize){i(this,E),T=0;break}}else for(;S<y;)if(E[T++]=C[S++],T==this.blockSize){i(this,E),T=0;break}}this.h=T,this.o+=y},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var y=1;y<C.length-8;++y)C[y]=0;var _=8*this.o;for(y=C.length-8;y<C.length;++y)C[y]=_&255,_/=256;for(this.u(C),C=Array(16),y=_=0;4>y;++y)for(var E=0;32>E;E+=8)C[_++]=this.g[y]>>>E&255;return C};function s(C,y){var _=a;return Object.prototype.hasOwnProperty.call(_,C)?_[C]:_[C]=y(C)}function o(C,y){this.h=y;for(var _=[],E=!0,T=C.length-1;0<=T;T--){var S=C[T]|0;E&&S==y||(_[T]=S,E=!1)}this.g=_}var a={};function u(C){return-128<=C&&128>C?s(C,function(y){return new o([y|0],0>y?-1:0)}):new o([C|0],0>C?-1:0)}function l(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return R(l(-C));for(var y=[],_=1,E=0;C>=_;E++)y[E]=C/_|0,_*=4294967296;return new o(y,0)}function h(C,y){if(C.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(C.charAt(0)=="-")return R(h(C.substring(1),y));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=l(Math.pow(y,8)),E=p,T=0;T<C.length;T+=8){var S=Math.min(8,C.length-T),w=parseInt(C.substring(T,T+S),y);8>S?(S=l(Math.pow(y,S)),E=E.j(S).add(l(w))):(E=E.j(_),E=E.add(l(w)))}return E}var p=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(N(this))return-R(this).m();for(var C=0,y=1,_=0;_<this.g.length;_++){var E=this.i(_);C+=(0<=E?E:4294967296+E)*y,y*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(b(this))return"0";if(N(this))return"-"+R(this).toString(C);for(var y=l(Math.pow(C,6)),_=this,E="";;){var T=W(_,y).g;_=P(_,T.j(y));var S=((0<_.g.length?_.g[0]:_.h)>>>0).toString(C);if(_=T,b(_))return S+E;for(;6>S.length;)S="0"+S;E=S+E}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function b(C){if(C.h!=0)return!1;for(var y=0;y<C.g.length;y++)if(C.g[y]!=0)return!1;return!0}function N(C){return C.h==-1}t.l=function(C){return C=P(this,C),N(C)?-1:b(C)?0:1};function R(C){for(var y=C.g.length,_=[],E=0;E<y;E++)_[E]=~C.g[E];return new o(_,~C.h).add(m)}t.abs=function(){return N(this)?R(this):this},t.add=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0,T=0;T<=y;T++){var S=E+(this.i(T)&65535)+(C.i(T)&65535),w=(S>>>16)+(this.i(T)>>>16)+(C.i(T)>>>16);E=w>>>16,S&=65535,w&=65535,_[T]=w<<16|S}return new o(_,_[_.length-1]&-2147483648?-1:0)};function P(C,y){return C.add(R(y))}t.j=function(C){if(b(this)||b(C))return p;if(N(this))return N(C)?R(this).j(R(C)):R(R(this).j(C));if(N(C))return R(this.j(R(C)));if(0>this.l(v)&&0>C.l(v))return l(this.m()*C.m());for(var y=this.g.length+C.g.length,_=[],E=0;E<2*y;E++)_[E]=0;for(E=0;E<this.g.length;E++)for(var T=0;T<C.g.length;T++){var S=this.i(E)>>>16,w=this.i(E)&65535,ar=C.i(T)>>>16,Ra=C.i(T)&65535;_[2*E+2*T]+=w*Ra,q(_,2*E+2*T),_[2*E+2*T+1]+=S*Ra,q(_,2*E+2*T+1),_[2*E+2*T+1]+=w*ar,q(_,2*E+2*T+1),_[2*E+2*T+2]+=S*ar,q(_,2*E+2*T+2)}for(E=0;E<y;E++)_[E]=_[2*E+1]<<16|_[2*E];for(E=y;E<2*y;E++)_[E]=0;return new o(_,0)};function q(C,y){for(;(C[y]&65535)!=C[y];)C[y+1]+=C[y]>>>16,C[y]&=65535,y++}function H(C,y){this.g=C,this.h=y}function W(C,y){if(b(y))throw Error("division by zero");if(b(C))return new H(p,p);if(N(C))return y=W(R(C),y),new H(R(y.g),R(y.h));if(N(y))return y=W(C,R(y)),new H(R(y.g),y.h);if(30<C.g.length){if(N(C)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var _=m,E=y;0>=E.l(C);)_=xe(_),E=xe(E);var T=ne(_,1),S=ne(E,1);for(E=ne(E,2),_=ne(_,2);!b(E);){var w=S.add(E);0>=w.l(C)&&(T=T.add(_),S=w),E=ne(E,1),_=ne(_,1)}return y=P(C,T.j(y)),new H(T,y)}for(T=p;0<=C.l(y);){for(_=Math.max(1,Math.floor(C.m()/y.m())),E=Math.ceil(Math.log(_)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),S=l(_),w=S.j(y);N(w)||0<w.l(C);)_-=E,S=l(_),w=S.j(y);b(S)&&(S=m),T=T.add(S),C=P(C,w)}return new H(T,C)}t.A=function(C){return W(this,C).h},t.and=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)&C.i(E);return new o(_,this.h&C.h)},t.or=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)|C.i(E);return new o(_,this.h|C.h)},t.xor=function(C){for(var y=Math.max(this.g.length,C.g.length),_=[],E=0;E<y;E++)_[E]=this.i(E)^C.i(E);return new o(_,this.h^C.h)};function xe(C){for(var y=C.g.length+1,_=[],E=0;E<y;E++)_[E]=C.i(E)<<1|C.i(E-1)>>>31;return new o(_,C.h)}function ne(C,y){var _=y>>5;y%=32;for(var E=C.g.length-_,T=[],S=0;S<E;S++)T[S]=0<y?C.i(S+_)>>>y|C.i(S+_+1)<<32-y:C.i(S+_);return new o(T,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,x_=$R.Md5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,yi=$R.Integer=o}).apply(typeof BR<"u"?BR:typeof self<"u"?self:typeof window<"u"?window:{});var Tf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sr={};var P_,O_,Ho,k_,lu,Df,F_,L_,V_;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(c,d,f){return c==Array.prototype||c==Object.prototype||(c[d]=f.value),c};function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tf=="object"&&Tf];for(var d=0;d<c.length;++d){var f=c[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(c,d){if(d)e:{var f=r;c=c.split(".");for(var g=0;g<c.length-1;g++){var D=c[g];if(!(D in f))break e;f=f[D]}c=c[c.length-1],g=f[c],d=d(g),d!=g&&d!=null&&e(f,c,{configurable:!0,writable:!0,value:d})}}function s(c,d){c instanceof String&&(c+="");var f=0,g=!1,D={next:function(){if(!g&&f<c.length){var A=f++;return{value:d(A,c[A]),done:!1}}return g=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}i("Array.prototype.values",function(c){return c||function(){return s(this,function(d,f){return f})}});var o=o||{},a=this||self;function u(c){var d=typeof c;return d=d!="object"?d:c?Array.isArray(c)?"array":d:"null",d=="array"||d=="object"&&typeof c.length=="number"}function l(c){var d=typeof c;return d=="object"&&c!=null||d=="function"}function h(c,d,f){return c.call.apply(c.bind,arguments)}function p(c,d,f){if(!c)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,g),c.apply(d,D)}}return function(){return c.apply(d,arguments)}}function m(c,d,f){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:p,m.apply(null,arguments)}function v(c,d){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),c.apply(this,g)}}function b(c,d){function f(){}f.prototype=d.prototype,c.aa=d.prototype,c.prototype=new f,c.prototype.constructor=c,c.Qb=function(g,D,A){for(var k=Array(arguments.length-2),Re=2;Re<arguments.length;Re++)k[Re-2]=arguments[Re];return d.prototype[D].apply(g,k)}}function N(c){let d=c.length;if(0<d){let f=Array(d);for(let g=0;g<d;g++)f[g]=c[g];return f}return[]}function R(c,d){for(let f=1;f<arguments.length;f++){let g=arguments[f];if(u(g)){let D=c.length||0,A=g.length||0;c.length=D+A;for(let k=0;k<A;k++)c[D+k]=g[k]}else c.push(g)}}class P{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function q(c){return/^[\s\xa0]*$/.test(c)}function H(){var c=a.navigator;return c&&(c=c.userAgent)?c:""}function W(c){return W[" "](c),c}W[" "]=function(){};var xe=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function ne(c,d,f){for(let g in c)d.call(f,c[g],g,c)}function C(c,d){for(let f in c)d.call(void 0,c[f],f,c)}function y(c){let d={};for(let f in c)d[f]=c[f];return d}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(c,d){let f,g;for(let D=1;D<arguments.length;D++){g=arguments[D];for(f in g)c[f]=g[f];for(let A=0;A<_.length;A++)f=_[A],Object.prototype.hasOwnProperty.call(g,f)&&(c[f]=g[f])}}function T(c){var d=1;c=c.split(":");let f=[];for(;0<d&&c.length;)f.push(c.shift()),d--;return c.length&&f.push(c.join(":")),f}function S(c){a.setTimeout(()=>{throw c},0)}function w(){var c=Op;let d=null;return c.g&&(d=c.g,c.g=c.g.next,c.g||(c.h=null),d.next=null),d}class ar{constructor(){this.h=this.g=null}add(d,f){let g=Ra.get();g.set(d,f),this.h?this.h.next=g:this.g=g,this.h=g}}var Ra=new P(()=>new kP,c=>c.reset());class kP{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Na,Ma=!1,Op=new ar,JE=()=>{let c=a.Promise.resolve(void 0);Na=()=>{c.then(FP)}};var FP=()=>{for(var c;c=w();){try{c.h.call(c.g)}catch(f){S(f)}var d=Ra;d.j(c),100>d.h&&(d.h++,c.next=d.g,d.g=c)}Ma=!1};function kr(){this.s=this.s,this.C=this.C}kr.prototype.s=!1,kr.prototype.ma=function(){this.s||(this.s=!0,this.N())},kr.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function yt(c,d){this.type=c,this.g=this.target=d,this.defaultPrevented=!1}yt.prototype.h=function(){this.defaultPrevented=!0};var LP=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,d=Object.defineProperty({},"passive",{get:function(){c=!0}});try{let f=()=>{};a.addEventListener("test",f,d),a.removeEventListener("test",f,d)}catch{}return c}();function xa(c,d){if(yt.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c){var f=this.type=c.type,g=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;if(this.target=c.target||c.srcElement,this.g=d,d=c.relatedTarget){if(xe){e:{try{W(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=c.fromElement:f=="mouseout"&&(d=c.toElement);this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=typeof c.pointerType=="string"?c.pointerType:VP[c.pointerType]||"",this.state=c.state,this.i=c,c.defaultPrevented&&xa.aa.h.call(this)}}b(xa,yt);var VP={2:"touch",3:"pen",4:"mouse"};xa.prototype.h=function(){xa.aa.h.call(this);var c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Pa="closure_listenable_"+(1e6*Math.random()|0),UP=0;function jP(c,d,f,g,D){this.listener=c,this.proxy=null,this.src=d,this.type=f,this.capture=!!g,this.ha=D,this.key=++UP,this.da=this.fa=!1}function Yu(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Ju(c){this.src=c,this.g={},this.h=0}Ju.prototype.add=function(c,d,f,g,D){var A=c.toString();c=this.g[A],c||(c=this.g[A]=[],this.h++);var k=Fp(c,d,g,D);return-1<k?(d=c[k],f||(d.fa=!1)):(d=new jP(d,this.src,A,!!g,D),d.fa=f,c.push(d)),d};function kp(c,d){var f=d.type;if(f in c.g){var g=c.g[f],D=Array.prototype.indexOf.call(g,d,void 0),A;(A=0<=D)&&Array.prototype.splice.call(g,D,1),A&&(Yu(d),c.g[f].length==0&&(delete c.g[f],c.h--))}}function Fp(c,d,f,g){for(var D=0;D<c.length;++D){var A=c[D];if(!A.da&&A.listener==d&&A.capture==!!f&&A.ha==g)return D}return-1}var Lp="closure_lm_"+(1e6*Math.random()|0),Vp={};function XE(c,d,f,g,D){if(g&&g.once)return eC(c,d,f,g,D);if(Array.isArray(d)){for(var A=0;A<d.length;A++)XE(c,d[A],f,g,D);return null}return f=$p(f),c&&c[Pa]?c.K(d,f,l(g)?!!g.capture:!!g,D):ZE(c,d,f,!1,g,D)}function ZE(c,d,f,g,D,A){if(!d)throw Error("Invalid event type");var k=l(D)?!!D.capture:!!D,Re=jp(c);if(Re||(c[Lp]=Re=new Ju(c)),f=Re.add(d,f,g,k,A),f.proxy)return f;if(g=BP(),f.proxy=g,g.src=c,g.listener=f,c.addEventListener)LP||(D=k),D===void 0&&(D=!1),c.addEventListener(d.toString(),g,D);else if(c.attachEvent)c.attachEvent(nC(d.toString()),g);else if(c.addListener&&c.removeListener)c.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function BP(){function c(f){return d.call(c.src,c.listener,f)}let d=$P;return c}function eC(c,d,f,g,D){if(Array.isArray(d)){for(var A=0;A<d.length;A++)eC(c,d[A],f,g,D);return null}return f=$p(f),c&&c[Pa]?c.L(d,f,l(g)?!!g.capture:!!g,D):ZE(c,d,f,!0,g,D)}function tC(c,d,f,g,D){if(Array.isArray(d))for(var A=0;A<d.length;A++)tC(c,d[A],f,g,D);else g=l(g)?!!g.capture:!!g,f=$p(f),c&&c[Pa]?(c=c.i,d=String(d).toString(),d in c.g&&(A=c.g[d],f=Fp(A,f,g,D),-1<f&&(Yu(A[f]),Array.prototype.splice.call(A,f,1),A.length==0&&(delete c.g[d],c.h--)))):c&&(c=jp(c))&&(d=c.g[d.toString()],c=-1,d&&(c=Fp(d,f,g,D)),(f=-1<c?d[c]:null)&&Up(f))}function Up(c){if(typeof c!="number"&&c&&!c.da){var d=c.src;if(d&&d[Pa])kp(d.i,c);else{var f=c.type,g=c.proxy;d.removeEventListener?d.removeEventListener(f,g,c.capture):d.detachEvent?d.detachEvent(nC(f),g):d.addListener&&d.removeListener&&d.removeListener(g),(f=jp(d))?(kp(f,c),f.h==0&&(f.src=null,d[Lp]=null)):Yu(c)}}}function nC(c){return c in Vp?Vp[c]:Vp[c]="on"+c}function $P(c,d){if(c.da)c=!0;else{d=new xa(d,this);var f=c.listener,g=c.ha||c.src;c.fa&&Up(c),c=f.call(g,d)}return c}function jp(c){return c=c[Lp],c instanceof Ju?c:null}var Bp="__closure_events_fn_"+(1e9*Math.random()>>>0);function $p(c){return typeof c=="function"?c:(c[Bp]||(c[Bp]=function(d){return c.handleEvent(d)}),c[Bp])}function vt(){kr.call(this),this.i=new Ju(this),this.M=this,this.F=null}b(vt,kr),vt.prototype[Pa]=!0,vt.prototype.removeEventListener=function(c,d,f,g){tC(this,c,d,f,g)};function Mt(c,d){var f,g=c.F;if(g)for(f=[];g;g=g.F)f.push(g);if(c=c.M,g=d.type||d,typeof d=="string")d=new yt(d,c);else if(d instanceof yt)d.target=d.target||c;else{var D=d;d=new yt(g,c),E(d,D)}if(D=!0,f)for(var A=f.length-1;0<=A;A--){var k=d.g=f[A];D=Xu(k,g,!0,d)&&D}if(k=d.g=c,D=Xu(k,g,!0,d)&&D,D=Xu(k,g,!1,d)&&D,f)for(A=0;A<f.length;A++)k=d.g=f[A],D=Xu(k,g,!1,d)&&D}vt.prototype.N=function(){if(vt.aa.N.call(this),this.i){var c=this.i,d;for(d in c.g){for(var f=c.g[d],g=0;g<f.length;g++)Yu(f[g]);delete c.g[d],c.h--}}this.F=null},vt.prototype.K=function(c,d,f,g){return this.i.add(String(c),d,!1,f,g)},vt.prototype.L=function(c,d,f,g){return this.i.add(String(c),d,!0,f,g)};function Xu(c,d,f,g){if(d=c.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,A=0;A<d.length;++A){var k=d[A];if(k&&!k.da&&k.capture==f){var Re=k.listener,dt=k.ha||k.src;k.fa&&kp(c.i,k),D=Re.call(dt,g)!==!1&&D}}return D&&!g.defaultPrevented}function rC(c,d,f){if(typeof c=="function")f&&(c=m(c,f));else if(c&&typeof c.handleEvent=="function")c=m(c.handleEvent,c);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(c,d||0)}function iC(c){c.g=rC(()=>{c.g=null,c.i&&(c.i=!1,iC(c))},c.l);let d=c.h;c.h=null,c.m.apply(null,d)}class qP extends kr{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:iC(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Oa(c){kr.call(this),this.h=c,this.g={}}b(Oa,kr);var sC=[];function oC(c){ne(c.g,function(d,f){this.g.hasOwnProperty(f)&&Up(d)},c),c.g={}}Oa.prototype.N=function(){Oa.aa.N.call(this),oC(this)},Oa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var qp=a.JSON.stringify,HP=a.JSON.parse,GP=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function Hp(){}Hp.prototype.h=null;function aC(c){return c.h||(c.h=c.i())}function cC(){}var ka={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gp(){yt.call(this,"d")}b(Gp,yt);function zp(){yt.call(this,"c")}b(zp,yt);var Ti={},uC=null;function Zu(){return uC=uC||new vt}Ti.La="serverreachability";function lC(c){yt.call(this,Ti.La,c)}b(lC,yt);function Fa(c){let d=Zu();Mt(d,new lC(d))}Ti.STAT_EVENT="statevent";function dC(c,d){yt.call(this,Ti.STAT_EVENT,c),this.stat=d}b(dC,yt);function xt(c){let d=Zu();Mt(d,new dC(d,c))}Ti.Ma="timingevent";function hC(c,d){yt.call(this,Ti.Ma,c),this.size=d}b(hC,yt);function La(c,d){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},d)}function Va(){this.g=!0}Va.prototype.xa=function(){this.g=!1};function zP(c,d,f,g,D,A){c.info(function(){if(c.g)if(A)for(var k="",Re=A.split("&"),dt=0;dt<Re.length;dt++){var Ie=Re[dt].split("=");if(1<Ie.length){var _t=Ie[0];Ie=Ie[1];var wt=_t.split("_");k=2<=wt.length&&wt[1]=="type"?k+(_t+"="+Ie+"&"):k+(_t+"=redacted&")}}else k=null;else k=A;return"XMLHTTP REQ ("+g+") [attempt "+D+"]: "+d+`
`+f+`
`+k})}function WP(c,d,f,g,D,A,k){c.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+D+"]: "+d+`
`+f+`
`+A+" "+k})}function Ms(c,d,f,g){c.info(function(){return"XMLHTTP TEXT ("+d+"): "+QP(c,f)+(g?" "+g:"")})}function KP(c,d){c.info(function(){return"TIMEOUT: "+d})}Va.prototype.info=function(){};function QP(c,d){if(!c.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(c=0;c<f.length;c++)if(Array.isArray(f[c])){var g=f[c];if(!(2>g.length)){var D=g[1];if(Array.isArray(D)&&!(1>D.length)){var A=D[0];if(A!="noop"&&A!="stop"&&A!="close")for(var k=1;k<D.length;k++)D[k]=""}}}}return qp(f)}catch{return d}}var el={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},fC={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Wp;function tl(){}b(tl,Hp),tl.prototype.g=function(){return new XMLHttpRequest},tl.prototype.i=function(){return{}},Wp=new tl;function Fr(c,d,f,g){this.j=c,this.i=d,this.l=f,this.R=g||1,this.U=new Oa(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pC}function pC(){this.i=null,this.g="",this.h=!1}var mC={},Kp={};function Qp(c,d,f){c.L=1,c.v=sl(cr(d)),c.m=f,c.P=!0,gC(c,null)}function gC(c,d){c.F=Date.now(),nl(c),c.A=cr(c.v);var f=c.A,g=c.R;Array.isArray(g)||(g=[String(g)]),NC(f.i,"t",g),c.C=0,f=c.j.J,c.h=new pC,c.g=KC(c.j,f?d:null,!c.m),0<c.O&&(c.M=new qP(m(c.Y,c,c.g),c.O)),d=c.U,f=c.g,g=c.ca;var D="readystatechange";Array.isArray(D)||(D&&(sC[0]=D.toString()),D=sC);for(var A=0;A<D.length;A++){var k=XE(f,D[A],g||d.handleEvent,!1,d.h||d);if(!k)break;d.g[k.key]=k}d=c.H?y(c.H):{},c.m?(c.u||(c.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.A,c.u,c.m,d)):(c.u="GET",c.g.ea(c.A,c.u,null,d)),Fa(),zP(c.i,c.u,c.A,c.l,c.R,c.m)}Fr.prototype.ca=function(c){c=c.target;let d=this.M;d&&ur(c)==3?d.j():this.Y(c)},Fr.prototype.Y=function(c){try{if(c==this.g)e:{let wt=ur(this.g);var d=this.g.Ba();let Os=this.g.Z();if(!(3>wt)&&(wt!=3||this.g&&(this.h.h||this.g.oa()||LC(this.g)))){this.J||wt!=4||d==7||(d==8||0>=Os?Fa(3):Fa(2)),Yp(this);var f=this.g.Z();this.X=f;t:if(yC(this)){var g=LC(this.g);c="";var D=g.length,A=ur(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Di(this),Ua(this);var k="";break t}this.h.i=new a.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,c+=this.h.i.decode(g[d],{stream:!(A&&d==D-1)});g.length=0,this.h.g+=c,this.C=0,k=this.h.g}else k=this.g.oa();if(this.o=f==200,WP(this.i,this.u,this.A,this.l,this.R,wt,f),this.o){if(this.T&&!this.K){t:{if(this.g){var Re,dt=this.g;if((Re=dt.g?dt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!q(Re)){var Ie=Re;break t}}Ie=null}if(f=Ie)Ms(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jp(this,f);else{this.o=!1,this.s=3,xt(12),Di(this),Ua(this);break e}}if(this.P){f=!0;let mn;for(;!this.J&&this.C<k.length;)if(mn=YP(this,k),mn==Kp){wt==4&&(this.s=4,xt(14),f=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(mn==mC){this.s=4,xt(15),Ms(this.i,this.l,k,"[Invalid Chunk]"),f=!1;break}else Ms(this.i,this.l,mn,null),Jp(this,mn);if(yC(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),wt!=4||k.length!=0||this.h.h||(this.s=1,xt(16),f=!1),this.o=this.o&&f,!f)Ms(this.i,this.l,k,"[Invalid Chunked Response]"),Di(this),Ua(this);else if(0<k.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+k.length),rm(_t),_t.M=!0,xt(11))}}else Ms(this.i,this.l,k,null),Jp(this,k);wt==4&&Di(this),this.o&&!this.J&&(wt==4?HC(this.j,this):(this.o=!1,nl(this)))}else fO(this.g),f==400&&0<k.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Di(this),Ua(this)}}}catch{}finally{}};function yC(c){return c.g?c.u=="GET"&&c.L!=2&&c.j.Ca:!1}function YP(c,d){var f=c.C,g=d.indexOf(`
`,f);return g==-1?Kp:(f=Number(d.substring(f,g)),isNaN(f)?mC:(g+=1,g+f>d.length?Kp:(d=d.slice(g,g+f),c.C=g+f,d)))}Fr.prototype.cancel=function(){this.J=!0,Di(this)};function nl(c){c.S=Date.now()+c.I,vC(c,c.I)}function vC(c,d){if(c.B!=null)throw Error("WatchDog timer not null");c.B=La(m(c.ba,c),d)}function Yp(c){c.B&&(a.clearTimeout(c.B),c.B=null)}Fr.prototype.ba=function(){this.B=null;let c=Date.now();0<=c-this.S?(KP(this.i,this.A),this.L!=2&&(Fa(),xt(17)),Di(this),this.s=2,Ua(this)):vC(this,this.S-c)};function Ua(c){c.j.G==0||c.J||HC(c.j,c)}function Di(c){Yp(c);var d=c.M;d&&typeof d.ma=="function"&&d.ma(),c.M=null,oC(c.U),c.g&&(d=c.g,c.g=null,d.abort(),d.ma())}function Jp(c,d){try{var f=c.j;if(f.G!=0&&(f.g==c||Xp(f.h,c))){if(!c.K&&Xp(f.h,c)&&f.G==3){try{var g=f.Da.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var D=g;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<c.F)ll(f),cl(f);else break e;nm(f),xt(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=La(m(f.Za,f),6e3));if(1>=IC(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Si(f,11)}else if((c.K||f.g==c)&&ll(f),!q(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let Ie=D[d];if(f.T=Ie[0],Ie=Ie[1],f.G==2)if(Ie[0]=="c"){f.K=Ie[1],f.ia=Ie[2];let _t=Ie[3];_t!=null&&(f.la=_t,f.j.info("VER="+f.la));let wt=Ie[4];wt!=null&&(f.Aa=wt,f.j.info("SVER="+f.Aa));let Os=Ie[5];Os!=null&&typeof Os=="number"&&0<Os&&(g=1.5*Os,f.L=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;let mn=c.g;if(mn){let hl=mn.g?mn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var A=g.h;A.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Zp(A,A.h),A.h=null))}if(g.D){let im=mn.g?mn.g.getResponseHeader("X-HTTP-Session-Id"):null;im&&(g.ya=im,ke(g.I,g.D,im))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-c.F,f.j.info("Handshake RTT: "+f.R+"ms")),g=f;var k=c;if(g.qa=WC(g,g.J?g.ia:null,g.W),k.K){EC(g.h,k);var Re=k,dt=g.L;dt&&(Re.I=dt),Re.B&&(Yp(Re),nl(Re)),g.g=k}else $C(g);0<f.i.length&&ul(f)}else Ie[0]!="stop"&&Ie[0]!="close"||Si(f,7);else f.G==3&&(Ie[0]=="stop"||Ie[0]=="close"?Ie[0]=="stop"?Si(f,7):tm(f):Ie[0]!="noop"&&f.l&&f.l.ta(Ie),f.v=0)}}Fa(4)}catch{}}var JP=class{constructor(c,d){this.g=c,this.map=d}};function _C(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=0<c.length&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function wC(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function IC(c){return c.h?1:c.g?c.g.size:0}function Xp(c,d){return c.h?c.h==d:c.g?c.g.has(d):!1}function Zp(c,d){c.g?c.g.add(d):c.h=d}function EC(c,d){c.h&&c.h==d?c.h=null:c.g&&c.g.has(d)&&c.g.delete(d)}_C.prototype.cancel=function(){if(this.i=CC(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let c of this.g.values())c.cancel();this.g.clear()}};function CC(c){if(c.h!=null)return c.i.concat(c.h.D);if(c.g!=null&&c.g.size!==0){let d=c.i;for(let f of c.g.values())d=d.concat(f.D);return d}return N(c.i)}function XP(c){if(c.V&&typeof c.V=="function")return c.V();if(typeof Map<"u"&&c instanceof Map||typeof Set<"u"&&c instanceof Set)return Array.from(c.values());if(typeof c=="string")return c.split("");if(u(c)){for(var d=[],f=c.length,g=0;g<f;g++)d.push(c[g]);return d}d=[],f=0;for(g in c)d[f++]=c[g];return d}function ZP(c){if(c.na&&typeof c.na=="function")return c.na();if(!c.V||typeof c.V!="function"){if(typeof Map<"u"&&c instanceof Map)return Array.from(c.keys());if(!(typeof Set<"u"&&c instanceof Set)){if(u(c)||typeof c=="string"){var d=[];c=c.length;for(var f=0;f<c;f++)d.push(f);return d}d=[],f=0;for(let g in c)d[f++]=g;return d}}}function TC(c,d){if(c.forEach&&typeof c.forEach=="function")c.forEach(d,void 0);else if(u(c)||typeof c=="string")Array.prototype.forEach.call(c,d,void 0);else for(var f=ZP(c),g=XP(c),D=g.length,A=0;A<D;A++)d.call(void 0,g[A],f&&f[A],c)}var DC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eO(c,d){if(c){c=c.split("&");for(var f=0;f<c.length;f++){var g=c[f].indexOf("="),D=null;if(0<=g){var A=c[f].substring(0,g);D=c[f].substring(g+1)}else A=c[f];d(A,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function bi(c){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,c instanceof bi){this.h=c.h,rl(this,c.j),this.o=c.o,this.g=c.g,il(this,c.s),this.l=c.l;var d=c.i,f=new $a;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),bC(this,f),this.m=c.m}else c&&(d=String(c).match(DC))?(this.h=!1,rl(this,d[1]||"",!0),this.o=ja(d[2]||""),this.g=ja(d[3]||"",!0),il(this,d[4]),this.l=ja(d[5]||"",!0),bC(this,d[6]||"",!0),this.m=ja(d[7]||"")):(this.h=!1,this.i=new $a(null,this.h))}bi.prototype.toString=function(){var c=[],d=this.j;d&&c.push(Ba(d,SC,!0),":");var f=this.g;return(f||d=="file")&&(c.push("//"),(d=this.o)&&c.push(Ba(d,SC,!0),"@"),c.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&c.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&c.push("/"),c.push(Ba(f,f.charAt(0)=="/"?rO:nO,!0))),(f=this.i.toString())&&c.push("?",f),(f=this.m)&&c.push("#",Ba(f,sO)),c.join("")};function cr(c){return new bi(c)}function rl(c,d,f){c.j=f?ja(d,!0):d,c.j&&(c.j=c.j.replace(/:$/,""))}function il(c,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);c.s=d}else c.s=null}function bC(c,d,f){d instanceof $a?(c.i=d,oO(c.i,c.h)):(f||(d=Ba(d,iO)),c.i=new $a(d,c.h))}function ke(c,d,f){c.i.set(d,f)}function sl(c){return ke(c,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),c}function ja(c,d){return c?d?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Ba(c,d,f){return typeof c=="string"?(c=encodeURI(c).replace(d,tO),f&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function tO(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var SC=/[#\/\?@]/g,nO=/[#\?:]/g,rO=/[#\?]/g,iO=/[#\?@]/g,sO=/#/g;function $a(c,d){this.h=this.g=null,this.i=c||null,this.j=!!d}function Lr(c){c.g||(c.g=new Map,c.h=0,c.i&&eO(c.i,function(d,f){c.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=$a.prototype,t.add=function(c,d){Lr(this),this.i=null,c=xs(this,c);var f=this.g.get(c);return f||this.g.set(c,f=[]),f.push(d),this.h+=1,this};function AC(c,d){Lr(c),d=xs(c,d),c.g.has(d)&&(c.i=null,c.h-=c.g.get(d).length,c.g.delete(d))}function RC(c,d){return Lr(c),d=xs(c,d),c.g.has(d)}t.forEach=function(c,d){Lr(this),this.g.forEach(function(f,g){f.forEach(function(D){c.call(d,D,g,this)},this)},this)},t.na=function(){Lr(this);let c=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let g=0;g<d.length;g++){let D=c[g];for(let A=0;A<D.length;A++)f.push(d[g])}return f},t.V=function(c){Lr(this);let d=[];if(typeof c=="string")RC(this,c)&&(d=d.concat(this.g.get(xs(this,c))));else{c=Array.from(this.g.values());for(let f=0;f<c.length;f++)d=d.concat(c[f])}return d},t.set=function(c,d){return Lr(this),this.i=null,c=xs(this,c),RC(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[d]),this.h+=1,this},t.get=function(c,d){return c?(c=this.V(c),0<c.length?String(c[0]):d):d};function NC(c,d,f){AC(c,d),0<f.length&&(c.i=null,c.g.set(xs(c,d),N(f)),c.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let c=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var g=d[f];let A=encodeURIComponent(String(g)),k=this.V(g);for(g=0;g<k.length;g++){var D=A;k[g]!==""&&(D+="="+encodeURIComponent(String(k[g]))),c.push(D)}}return this.i=c.join("&")};function xs(c,d){return d=String(d),c.j&&(d=d.toLowerCase()),d}function oO(c,d){d&&!c.j&&(Lr(c),c.i=null,c.g.forEach(function(f,g){var D=g.toLowerCase();g!=D&&(AC(this,g),NC(this,D,f))},c)),c.j=d}function aO(c,d){let f=new Va;if(a.Image){let g=new Image;g.onload=v(Vr,f,"TestLoadImage: loaded",!0,d,g),g.onerror=v(Vr,f,"TestLoadImage: error",!1,d,g),g.onabort=v(Vr,f,"TestLoadImage: abort",!1,d,g),g.ontimeout=v(Vr,f,"TestLoadImage: timeout",!1,d,g),a.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=c}else d(!1)}function cO(c,d){let f=new Va,g=new AbortController,D=setTimeout(()=>{g.abort(),Vr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(c,{signal:g.signal}).then(A=>{clearTimeout(D),A.ok?Vr(f,"TestPingServer: ok",!0,d):Vr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),Vr(f,"TestPingServer: error",!1,d)})}function Vr(c,d,f,g,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),g(f)}catch{}}function uO(){this.g=new GP}function lO(c,d,f){let g=f||"";try{TC(c,function(D,A){let k=D;l(D)&&(k=qp(D)),d.push(g+A+"="+encodeURIComponent(k))})}catch(D){throw d.push(g+"type="+encodeURIComponent("_badmap")),D}}function qa(c){this.l=c.Ub||null,this.j=c.eb||!1}b(qa,Hp),qa.prototype.g=function(){return new ol(this.l,this.j)},qa.prototype.i=function(c){return function(){return c}}({});function ol(c,d){vt.call(this),this.D=c,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ol,vt),t=ol.prototype,t.open=function(c,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=c,this.A=d,this.readyState=1,Ga(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};c&&(d.body=c),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Ha(this)),this.readyState=0},t.Sa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Ga(this)),this.g&&(this.readyState=3,Ga(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;MC(this)}else c.text().then(this.Ra.bind(this),this.ga.bind(this))};function MC(c){c.j.read().then(c.Pa.bind(c)).catch(c.ga.bind(c))}t.Pa=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var d=c.value?c.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!c.done}))&&(this.response=this.responseText+=d)}c.done?Ha(this):Ga(this),this.readyState==3&&MC(this)}},t.Ra=function(c){this.g&&(this.response=this.responseText=c,Ha(this))},t.Qa=function(c){this.g&&(this.response=c,Ha(this))},t.ga=function(){this.g&&Ha(this)};function Ha(c){c.readyState=4,c.l=null,c.j=null,c.v=null,Ga(c)}t.setRequestHeader=function(c,d){this.u.append(c,d)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let c=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,c.push(f[0]+": "+f[1]),f=d.next();return c.join(`\r
`)};function Ga(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xC(c){let d="";return ne(c,function(f,g){d+=g,d+=":",d+=f,d+=`\r
`}),d}function em(c,d,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=xC(f),typeof c=="string"?f!=null&&encodeURIComponent(String(f)):ke(c,d,f))}function $e(c){vt.call(this),this.headers=new Map,this.o=c||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b($e,vt);var dO=/^https?$/i,hO=["POST","PUT"];t=$e.prototype,t.Ha=function(c){this.J=c},t.ea=function(c,d,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);d=d?d.toUpperCase():"GET",this.D=c,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Wp.g(),this.v=this.o?aC(this.o):aC(Wp),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(d,String(c),!0),this.B=!1}catch(A){PC(this,A);return}if(c=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var D in g)f.set(D,g[D]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let A of g.keys())f.set(A,g.get(A));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(A=>A.toLowerCase()=="content-type"),D=a.FormData&&c instanceof a.FormData,!(0<=Array.prototype.indexOf.call(hO,d,void 0))||g||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,k]of f)this.g.setRequestHeader(A,k);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{FC(this),this.u=!0,this.g.send(c),this.u=!1}catch(A){PC(this,A)}};function PC(c,d){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=d,c.m=5,OC(c),al(c)}function OC(c){c.A||(c.A=!0,Mt(c,"complete"),Mt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=c||7,Mt(this,"complete"),Mt(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),$e.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?kC(this):this.bb())},t.bb=function(){kC(this)};function kC(c){if(c.h&&typeof o<"u"&&(!c.v[1]||ur(c)!=4||c.Z()!=2)){if(c.u&&ur(c)==4)rC(c.Ea,0,c);else if(Mt(c,"readystatechange"),ur(c)==4){c.h=!1;try{let k=c.Z();e:switch(k){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var g;if(g=k===0){var D=String(c.D).match(DC)[1]||null;!D&&a.self&&a.self.location&&(D=a.self.location.protocol.slice(0,-1)),g=!dO.test(D?D.toLowerCase():"")}f=g}if(f)Mt(c,"complete"),Mt(c,"success");else{c.m=6;try{var A=2<ur(c)?c.g.statusText:""}catch{A=""}c.l=A+" ["+c.Z()+"]",OC(c)}}finally{al(c)}}}}function al(c,d){if(c.g){FC(c);let f=c.g,g=c.v[0]?()=>{}:null;c.g=null,c.v=null,d||Mt(c,"ready");try{f.onreadystatechange=g}catch{}}}function FC(c){c.I&&(a.clearTimeout(c.I),c.I=null)}t.isActive=function(){return!!this.g};function ur(c){return c.g?c.g.readyState:0}t.Z=function(){try{return 2<ur(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(c){if(this.g){var d=this.g.responseText;return c&&d.indexOf(c)==0&&(d=d.substring(c.length)),HP(d)}};function LC(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.H){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function fO(c){let d={};c=(c.g&&2<=ur(c)&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<c.length;g++){if(q(c[g]))continue;var f=T(c[g]);let D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();let A=d[D]||[];d[D]=A,A.push(f)}C(d,function(g){return g.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function za(c,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[c]||d}function VC(c){this.Aa=0,this.i=[],this.j=new Va,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=za("failFast",!1,c),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=za("baseRetryDelayMs",5e3,c),this.cb=za("retryDelaySeedMs",1e4,c),this.Wa=za("forwardChannelMaxRetries",2,c),this.wa=za("forwardChannelRequestTimeoutMs",2e4,c),this.pa=c&&c.xmlHttpFactory||void 0,this.Xa=c&&c.Tb||void 0,this.Ca=c&&c.useFetchStreams||!1,this.L=void 0,this.J=c&&c.supportsCrossDomainXhr||!1,this.K="",this.h=new _C(c&&c.concurrentRequestLimit),this.Da=new uO,this.P=c&&c.fastHandshake||!1,this.O=c&&c.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=c&&c.Rb||!1,c&&c.xa&&this.j.xa(),c&&c.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&c&&c.detectBufferingProxy||!1,this.ja=void 0,c&&c.longPollingTimeout&&0<c.longPollingTimeout&&(this.ja=c.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=VC.prototype,t.la=8,t.G=1,t.connect=function(c,d,f,g){xt(0),this.W=c,this.H=d||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.I=WC(this,null,this.W),ul(this)};function tm(c){if(UC(c),c.G==3){var d=c.U++,f=cr(c.I);if(ke(f,"SID",c.K),ke(f,"RID",d),ke(f,"TYPE","terminate"),Wa(c,f),d=new Fr(c,c.j,d),d.L=2,d.v=sl(cr(f)),f=!1,a.navigator&&a.navigator.sendBeacon)try{f=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&a.Image&&(new Image().src=d.v,f=!0),f||(d.g=KC(d.j,null),d.g.ea(d.v)),d.F=Date.now(),nl(d)}zC(c)}function cl(c){c.g&&(rm(c),c.g.cancel(),c.g=null)}function UC(c){cl(c),c.u&&(a.clearTimeout(c.u),c.u=null),ll(c),c.h.cancel(),c.s&&(typeof c.s=="number"&&a.clearTimeout(c.s),c.s=null)}function ul(c){if(!wC(c.h)&&!c.s){c.s=!0;var d=c.Ga;Na||JE(),Ma||(Na(),Ma=!0),Op.add(d,c),c.B=0}}function pO(c,d){return IC(c.h)>=c.h.j-(c.s?1:0)?!1:c.s?(c.i=d.D.concat(c.i),!0):c.G==1||c.G==2||c.B>=(c.Va?0:c.Wa)?!1:(c.s=La(m(c.Ga,c,d),GC(c,c.B)),c.B++,!0)}t.Ga=function(c){if(this.s)if(this.s=null,this.G==1){if(!c){this.U=Math.floor(1e5*Math.random()),c=this.U++;let D=new Fr(this,this.j,c),A=this.o;if(this.S&&(A?(A=y(A),E(A,this.S)):A=this.S),this.m!==null||this.O||(D.H=A,A=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=BC(this,D,d),f=cr(this.I),ke(f,"RID",c),ke(f,"CVER",22),this.D&&ke(f,"X-HTTP-Session-Id",this.D),Wa(this,f),A&&(this.O?d="headers="+encodeURIComponent(String(xC(A)))+"&"+d:this.m&&em(f,this.m,A)),Zp(this.h,D),this.Ua&&ke(f,"TYPE","init"),this.P?(ke(f,"$req",d),ke(f,"SID","null"),D.T=!0,Qp(D,f,null)):Qp(D,f,d),this.G=2}}else this.G==3&&(c?jC(this,c):this.i.length==0||wC(this.h)||jC(this))};function jC(c,d){var f;d?f=d.l:f=c.U++;let g=cr(c.I);ke(g,"SID",c.K),ke(g,"RID",f),ke(g,"AID",c.T),Wa(c,g),c.m&&c.o&&em(g,c.m,c.o),f=new Fr(c,c.j,f,c.B+1),c.m===null&&(f.H=c.o),d&&(c.i=d.D.concat(c.i)),d=BC(c,f,1e3),f.I=Math.round(.5*c.wa)+Math.round(.5*c.wa*Math.random()),Zp(c.h,f),Qp(f,g,d)}function Wa(c,d){c.H&&ne(c.H,function(f,g){ke(d,g,f)}),c.l&&TC({},function(f,g){ke(d,g,f)})}function BC(c,d,f){f=Math.min(c.i.length,f);var g=c.l?m(c.l.Na,c.l,c):null;e:{var D=c.i;let A=-1;for(;;){let k=["count="+f];A==-1?0<f?(A=D[0].g,k.push("ofs="+A)):A=0:k.push("ofs="+A);let Re=!0;for(let dt=0;dt<f;dt++){let Ie=D[dt].g,_t=D[dt].map;if(Ie-=A,0>Ie)A=Math.max(0,D[dt].g-100),Re=!1;else try{lO(_t,k,"req"+Ie+"_")}catch{g&&g(_t)}}if(Re){g=k.join("&");break e}}}return c=c.i.splice(0,f),d.D=c,g}function $C(c){if(!c.g&&!c.u){c.Y=1;var d=c.Fa;Na||JE(),Ma||(Na(),Ma=!0),Op.add(d,c),c.v=0}}function nm(c){return c.g||c.u||3<=c.v?!1:(c.Y++,c.u=La(m(c.Fa,c),GC(c,c.v)),c.v++,!0)}t.Fa=function(){if(this.u=null,qC(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var c=2*this.R;this.j.info("BP detection timer enabled: "+c),this.A=La(m(this.ab,this),c)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),cl(this),qC(this))};function rm(c){c.A!=null&&(a.clearTimeout(c.A),c.A=null)}function qC(c){c.g=new Fr(c,c.j,"rpc",c.Y),c.m===null&&(c.g.H=c.o),c.g.O=0;var d=cr(c.qa);ke(d,"RID","rpc"),ke(d,"SID",c.K),ke(d,"AID",c.T),ke(d,"CI",c.F?"0":"1"),!c.F&&c.ja&&ke(d,"TO",c.ja),ke(d,"TYPE","xmlhttp"),Wa(c,d),c.m&&c.o&&em(d,c.m,c.o),c.L&&(c.g.I=c.L);var f=c.g;c=c.ia,f.L=1,f.v=sl(cr(d)),f.m=null,f.P=!0,gC(f,c)}t.Za=function(){this.C!=null&&(this.C=null,cl(this),nm(this),xt(19))};function ll(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function HC(c,d){var f=null;if(c.g==d){ll(c),rm(c),c.g=null;var g=2}else if(Xp(c.h,d))f=d.D,EC(c.h,d),g=1;else return;if(c.G!=0){if(d.o)if(g==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=c.B;g=Zu(),Mt(g,new hC(g,f)),ul(c)}else $C(c);else if(D=d.s,D==3||D==0&&0<d.X||!(g==1&&pO(c,d)||g==2&&nm(c)))switch(f&&0<f.length&&(d=c.h,d.i=d.i.concat(f)),D){case 1:Si(c,5);break;case 4:Si(c,10);break;case 3:Si(c,6);break;default:Si(c,2)}}}function GC(c,d){let f=c.Ta+Math.floor(Math.random()*c.cb);return c.isActive()||(f*=2),f*d}function Si(c,d){if(c.j.info("Error code "+d),d==2){var f=m(c.fb,c),g=c.Xa;let D=!g;g=new bi(g||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||rl(g,"https"),sl(g),D?aO(g.toString(),f):cO(g.toString(),f)}else xt(2);c.G=0,c.l&&c.l.sa(d),zC(c),UC(c)}t.fb=function(c){c?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function zC(c){if(c.G=0,c.ka=[],c.l){let d=CC(c.h);(d.length!=0||c.i.length!=0)&&(R(c.ka,d),R(c.ka,c.i),c.h.i.length=0,N(c.i),c.i.length=0),c.l.ra()}}function WC(c,d,f){var g=f instanceof bi?cr(f):new bi(f);if(g.g!="")d&&(g.g=d+"."+g.g),il(g,g.s);else{var D=a.location;g=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var A=new bi(null);g&&rl(A,g),d&&(A.g=d),D&&il(A,D),f&&(A.l=f),g=A}return f=c.D,d=c.ya,f&&d&&ke(g,f,d),ke(g,"VER",c.la),Wa(c,g),g}function KC(c,d,f){if(d&&!c.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=c.Ca&&!c.pa?new $e(new qa({eb:f})):new $e(c.pa),d.Ha(c.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function QC(){}t=QC.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dl(){}dl.prototype.g=function(c,d){return new Ht(c,d)};function Ht(c,d){vt.call(this),this.g=new VC(d),this.l=c,this.h=d&&d.messageUrlParams||null,c=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(c?c["X-WebChannel-Content-Type"]=d.messageContentType:c={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(c?c["X-WebChannel-Client-Profile"]=d.va:c={"X-WebChannel-Client-Profile":d.va}),this.g.S=c,(c=d&&d.Sb)&&!q(c)&&(this.g.m=c),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!q(d)&&(this.g.D=d,c=this.h,c!==null&&d in c&&(c=this.h,d in c&&delete c[d])),this.j=new Ps(this)}b(Ht,vt),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){tm(this.g)},Ht.prototype.o=function(c){var d=this.g;if(typeof c=="string"){var f={};f.__data__=c,c=f}else this.u&&(f={},f.__data__=qp(c),c=f);d.i.push(new JP(d.Ya++,c)),d.G==3&&ul(d)},Ht.prototype.N=function(){this.g.l=null,delete this.j,tm(this.g),delete this.g,Ht.aa.N.call(this)};function YC(c){Gp.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var d=c.__sm__;if(d){e:{for(let f in d){c=f;break e}c=void 0}(this.i=c)&&(c=this.i,d=d!==null&&c in d?d[c]:void 0),this.data=d}else this.data=c}b(YC,Gp);function JC(){zp.call(this),this.status=1}b(JC,zp);function Ps(c){this.g=c}b(Ps,QC),Ps.prototype.ua=function(){Mt(this.g,"a")},Ps.prototype.ta=function(c){Mt(this.g,new YC(c))},Ps.prototype.sa=function(c){Mt(this.g,new JC)},Ps.prototype.ra=function(){Mt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,V_=Sr.createWebChannelTransport=function(){return new dl},L_=Sr.getStatEventTarget=function(){return Zu()},F_=Sr.Event=Ti,Df=Sr.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},el.NO_ERROR=0,el.TIMEOUT=8,el.HTTP_ERROR=6,lu=Sr.ErrorCode=el,fC.COMPLETE="complete",k_=Sr.EventType=fC,cC.EventType=ka,ka.OPEN="a",ka.CLOSE="b",ka.ERROR="c",ka.MESSAGE="d",vt.prototype.listen=vt.prototype.K,Ho=Sr.WebChannel=cC,O_=Sr.FetchXmlHttpFactory=qa,$e.prototype.listenOnce=$e.prototype.L,$e.prototype.getLastError=$e.prototype.Ka,$e.prototype.getLastErrorCode=$e.prototype.Ba,$e.prototype.getStatus=$e.prototype.Z,$e.prototype.getResponseJson=$e.prototype.Oa,$e.prototype.getResponseText=$e.prototype.oa,$e.prototype.send=$e.prototype.ea,$e.prototype.setWithCredentials=$e.prototype.Ha,P_=Sr.XhrIo=$e}).apply(typeof Tf<"u"?Tf:typeof self<"u"?self:typeof window<"u"?window:{});var qR="@firebase/firestore";var ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");var da="10.12.1";var ys=new Wn("@firebase/firestore");function du(){return ys.logLevel}function j(t,...e){if(ys.logLevel<=le.DEBUG){let n=e.map(wI);ys.debug(`Firestore (${da}): ${t}`,...n)}}function Rr(t,...e){if(ys.logLevel<=le.ERROR){let n=e.map(wI);ys.error(`Firestore (${da}): ${t}`,...n)}}function Jo(t,...e){if(ys.logLevel<=le.WARN){let n=e.map(wI);ys.warn(`Firestore (${da}): ${t}`,...n)}}function wI(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}function Z(t="Unexpected state"){let e=`FIRESTORE (${da}) INTERNAL ASSERTION FAILED: `+t;throw Rr(e),new Error(e)}function Oe(t,e){t||Z()}function ie(t,e){return t}var x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends Zt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Ar=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Nf=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},q_=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}},H_=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},G_=class{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),s=new Ar;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ar,e.enqueueRetryable(()=>i(this.currentUser))};let o=()=>{let u=s;e.enqueueRetryable(()=>I(this,null,function*(){yield u.promise,yield i(this.currentUser)}))},a=u=>{j("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?a(u):(j("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ar)}},0),o()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(j("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Oe(typeof r.accessToken=="string"),new Nf(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new ut(e)}},z_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},W_=class{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new z_(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}},K_=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Q_=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){let r=s=>{s.error!=null&&j("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,j("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};let i=s=>{j("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?i(s):j("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new K_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function xG(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Mf=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=xG(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}};function be(t,e){return t<e?-1:t>e?1:0}function Xo(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var gt=class t{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new t(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?be(this.nanoseconds,e.nanoseconds):be(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var se=class t{constructor(e){this.timestamp=e}static fromTimestamp(e){return new t(e)}static min(){return new t(new gt(0,0))}static max(){return new t(new gt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var xf=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}},He=class t extends xf{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new z(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},PG=/^[_a-zA-Z][_a-zA-Z0-9]*$/,en=class t extends xf{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return PG.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new t(["__name__"])}static fromServerFormat(e){let n=[],r="",i=0,s=()=>{if(r.length===0)throw new z(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},o=!1;for(;i<e.length;){let a=e[i];if(a==="\\"){if(i+1===e.length)throw new z(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new z(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var Q=class t{constructor(e){this.path=e}static fromPath(e){return new t(He.fromString(e))}static fromName(e){return new t(He.fromString(e).popFirst(5))}static empty(){return new t(He.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&He.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return He.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new He(e.slice()))}};var Y_=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};Y_.UNKNOWN_ID=-1;function OG(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=se.fromTimestamp(r===1e9?new gt(n+1,0):new gt(n,r));return new vs(i,Q.empty(),e)}function kG(t){return new vs(t.readTime,t.key,-1)}var vs=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(se.min(),Q.empty(),-1)}static max(){return new t(se.max(),Q.empty(),-1)}};function FG(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Q.comparator(t.documentKey,e.documentKey),n!==0?n:be(t.largestBatchId,e.largestBatchId))}var LG="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",J_=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Au(t){return I(this,null,function*(){if(t.code!==x.FAILED_PRECONDITION||t.message!==LG)throw t;j("LocalStore","Unexpectedly lost primary lease")})}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let s=e.length,o=new Array(s),a=0;for(let u=0;u<s;u++){let l=u;n(e[l]).next(h=>{o[l]=h,++a,a===s&&r(o)},h=>i(h))}})}static doWhile(e,n){return new t((r,i)=>{let s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}};function VG(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ru(t){return t.name==="IndexedDbTransactionError"}var _N=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.se&&this.se(n),n}}return t.oe=-1,t})();function ap(t){return t==null}function vu(t){return t===0&&1/t==-1/0}function UG(t){return typeof t=="number"&&Number.isInteger(t)&&!vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var jG=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],VZ=[...jG,"documentOverlays"],BG=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],$G=BG,UZ=[...$G,"indexConfiguration","indexState","indexEntries"];function HR(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ha(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function wN(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Ge=class t{constructor(e,n){this.comparator=e,this.root=n||nr.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,nr.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nr.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ko(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ko(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ko(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ko(this.root,e,this.comparator,!0)}},Ko=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},nr=class t{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=s??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new t(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();let e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}};nr.EMPTY=null,nr.RED=!0,nr.BLACK=!1;nr.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new nr(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var St=class t{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Pf(this.data.getIterator())}getIteratorFrom(e){return new Pf(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Pf=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var tr=class t{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new t([])}unionWith(e){let n=new St(en.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Xo(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Of=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Lt=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Of("Invalid base64 string: "+s):s}}(e);return new t(n)}static fromUint8Array(e){let n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return be(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Lt.EMPTY_BYTE_STRING=new Lt("");var qG=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nr(t){if(Oe(!!t),typeof t=="string"){let e=0,n=qG.exec(t);if(Oe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:qe(t.seconds),nanos:qe(t.nanos)}}function qe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function _i(t){return typeof t=="string"?Lt.fromBase64String(t):Lt.fromUint8Array(t)}function II(t){var e,n;return((n=(((e=t?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function EI(t){let e=t.mapValue.fields.__previous_value__;return II(e)?EI(e):e}function _u(t){let e=Nr(t.mapValue.fields.__local_write_time__.timestampValue);return new gt(e.seconds,e.nanos)}var X_=class{constructor(e,n,r,i,s,o,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}},kf=class t{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new t("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var bf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?II(t)?4:IN(t)?9007199254740991:10:Z()}function sr(t,e){if(t===e)return!0;let n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return _u(t).isEqual(_u(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;let o=Nr(i.timestampValue),a=Nr(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return _i(i.bytesValue).isEqual(_i(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return qe(i.geoPointValue.latitude)===qe(s.geoPointValue.latitude)&&qe(i.geoPointValue.longitude)===qe(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return qe(i.integerValue)===qe(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){let o=qe(i.doubleValue),a=qe(s.doubleValue);return o===a?vu(o)===vu(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Xo(t.arrayValue.values||[],e.arrayValue.values||[],sr);case 10:return function(i,s){let o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(HR(o)!==HR(a))return!1;for(let u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!sr(o[u],a[u])))return!1;return!0}(t,e);default:return Z()}}function wu(t,e){return(t.values||[]).find(n=>sr(n,e))!==void 0}function Zo(t,e){if(t===e)return 0;let n=_s(t),r=_s(e);if(n!==r)return be(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return be(t.booleanValue,e.booleanValue);case 2:return function(s,o){let a=qe(s.integerValue||s.doubleValue),u=qe(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return GR(t.timestampValue,e.timestampValue);case 4:return GR(_u(t),_u(e));case 5:return be(t.stringValue,e.stringValue);case 6:return function(s,o){let a=_i(s),u=_i(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){let h=be(a[l],u[l]);if(h!==0)return h}return be(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){let a=be(qe(s.latitude),qe(o.latitude));return a!==0?a:be(qe(s.longitude),qe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){let h=Zo(a[l],u[l]);if(h)return h}return be(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===bf.mapValue&&o===bf.mapValue)return 0;if(s===bf.mapValue)return 1;if(o===bf.mapValue)return-1;let a=s.fields||{},u=Object.keys(a),l=o.fields||{},h=Object.keys(l);u.sort(),h.sort();for(let p=0;p<u.length&&p<h.length;++p){let m=be(u[p],h[p]);if(m!==0)return m;let v=Zo(a[u[p]],l[h[p]]);if(v!==0)return v}return be(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function GR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return be(t,e);let n=Nr(t),r=Nr(e),i=be(n.seconds,r.seconds);return i!==0?i:be(n.nanos,r.nanos)}function ea(t){return Z_(t)}function Z_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){let r=Nr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return _i(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(let s of n.values||[])i?i=!1:r+=",",r+=Z_(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){let r=Object.keys(n.fields||{}).sort(),i="{",s=!0;for(let o of r)s?s=!1:i+=",",i+=`${o}:${Z_(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function ew(t){return!!t&&"integerValue"in t}function CI(t){return!!t&&"arrayValue"in t}function zR(t){return!!t&&"nullValue"in t}function WR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Af(t){return!!t&&"mapValue"in t}function fu(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return ha(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=fu(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=fu(t.arrayValue.values[n]);return e}return Object.assign({},t)}function IN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Dn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Af(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=fu(n)}setAll(e){let n=en.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=fu(o):i.push(a.lastSegment())});let s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){let n=this.field(e.popLast());Af(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return sr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Af(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){ha(n,(i,s)=>e[i]=s);for(let i of r)delete e[i]}clone(){return new t(fu(this.value))}};function EN(t){let e=[];return ha(t.fields,(n,r)=>{let i=new en([n]);if(Af(r)){let s=EN(r.mapValue).fields;if(s.length===0)e.push(i);else for(let o of s)e.push(i.child(o))}else e.push(i)}),new tr(e)}var bn=class t{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new t(e,0,se.min(),se.min(),se.min(),Dn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,se.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,se.min(),se.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,se.min(),se.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(se.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=se.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ta=class{constructor(e,n){this.position=e,this.inclusive=n}};function KR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Q.comparator(Q.fromName(o.referenceValue),n.key):r=Zo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function QR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!sr(t.position[n],e.position[n]))return!1;return!0}var na=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function HG(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Ff=class{},it=class t extends Ff{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nw(e,n,r):n==="array-contains"?new sw(e,r):n==="in"?new ow(e,r):n==="not-in"?new aw(e,r):n==="array-contains-any"?new cw(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rw(e,r):new iw(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Zo(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(Zo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},or=class t extends Ff{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new t(e,n)}matches(e){return CN(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function CN(t){return t.op==="and"}function TN(t){return GG(t)&&CN(t)}function GG(t){for(let e of t.filters)if(e instanceof or)return!1;return!0}function tw(t){if(t instanceof it)return t.field.canonicalString()+t.op.toString()+ea(t.value);if(TN(t))return t.filters.map(e=>tw(e)).join(",");{let e=t.filters.map(n=>tw(n)).join(",");return`${t.op}(${e})`}}function DN(t,e){return t instanceof it?function(r,i){return i instanceof it&&r.op===i.op&&r.field.isEqual(i.field)&&sr(r.value,i.value)}(t,e):t instanceof or?function(r,i){return i instanceof or&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&DN(o,i.filters[a]),!0):!1}(t,e):void Z()}function bN(t){return t instanceof it?function(n){return`${n.field.canonicalString()} ${n.op} ${ea(n.value)}`}(t):t instanceof or?function(n){return n.op.toString()+" {"+n.getFilters().map(bN).join(" ,")+"}"}(t):"Filter"}var nw=class extends it{constructor(e,n,r){super(e,n,r),this.key=Q.fromName(r.referenceValue)}matches(e){let n=Q.comparator(e.key,this.key);return this.matchesComparison(n)}},rw=class extends it{constructor(e,n){super(e,"in",n),this.keys=SN("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},iw=class extends it{constructor(e,n){super(e,"not-in",n),this.keys=SN("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function SN(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Q.fromName(r.referenceValue))}var sw=class extends it{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return CI(n)&&wu(n.arrayValue,this.value)}},ow=class extends it{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&wu(this.value.arrayValue,n)}},aw=class extends it{constructor(e,n){super(e,"not-in",n)}matches(e){if(wu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&!wu(this.value.arrayValue,n)}},cw=class extends it{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!CI(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>wu(this.value.arrayValue,r))}};var uw=class{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function YR(t,e=null,n=[],r=[],i=null,s=null,o=null){return new uw(t,e,n,r,i,s,o)}function TI(t){let e=ie(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>tw(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),ap(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ea(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ea(r)).join(",")),e.ue=n}return e.ue}function DI(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!HG(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DN(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!QR(t.startAt,e.startAt)&&QR(t.endAt,e.endAt)}function lw(t){return Q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var ra=class{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function zG(t,e,n,r,i,s,o,a){return new ra(t,e,n,r,i,s,o,a)}function bI(t){return new ra(t)}function JR(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WG(t){return t.collectionGroup!==null}function pu(t){let e=ie(t);if(e.ce===null){e.ce=[];let n=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),n.add(s.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new St(en.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.ce.push(new na(s,r))}),n.has(en.keyField().canonicalString())||e.ce.push(new na(en.keyField(),r))}return e.ce}function rr(t){let e=ie(t);return e.le||(e.le=KG(e,pu(t))),e.le}function KG(t,e){if(t.limitType==="F")return YR(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let s=i.dir==="desc"?"asc":"desc";return new na(i.field,s)});let n=t.endAt?new ta(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ta(t.startAt.position,t.startAt.inclusive):null;return YR(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function dw(t,e,n){return new ra(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function cp(t,e){return DI(rr(t),rr(e))&&t.limitType===e.limitType}function AN(t){return`${TI(rr(t))}|lt:${t.limitType}`}function Go(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>bN(i)).join(", ")}]`),ap(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>ea(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>ea(i)).join(",")),`Target(${r})`}(rr(t))}; limitType=${t.limitType})`}function up(t,e){return e.isFoundDocument()&&function(r,i){let s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(let s of pu(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(let s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){let l=KR(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,pu(r),i)||r.endAt&&!function(o,a,u){let l=KR(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,pu(r),i))}(t,e)}function QG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function RN(t){return(e,n)=>{let r=!1;for(let i of pu(t)){let s=YG(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function YG(t,e,n){let r=t.field.isKeyField()?Q.comparator(e.key,n.key):function(s,o,a){let u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Zo(u,l):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}var wi=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ha(this.inner,(n,r)=>{for(let[i,s]of r)e(i,s)})}isEmpty(){return wN(this.inner)}size(){return this.innerSize}};var JG=new Ge(Q.comparator);function Mr(){return JG}var NN=new Ge(Q.comparator);function hu(...t){let e=NN;for(let n of t)e=e.insert(n.key,n);return e}function MN(t){let e=NN;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fs(){return mu()}function xN(){return mu()}function mu(){return new wi(t=>t.toString(),(t,e)=>t.isEqual(e))}var XG=new Ge(Q.comparator),ZG=new St(Q.comparator);function fe(...t){let e=ZG;for(let n of t)e=e.add(n);return e}var ez=new St(be);function tz(){return ez}function PN(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:vu(e)?"-0":e}}function ON(t){return{integerValue:""+t}}function nz(t,e){return UG(e)?ON(e):PN(t,e)}var ia=class{constructor(){this._=void 0}};function rz(t,e,n){return t instanceof sa?function(i,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&II(s)&&(s=EI(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof ws?FN(t,e):t instanceof Is?LN(t,e):function(i,s){let o=kN(i,s),a=XR(o)+XR(i.Pe);return ew(o)&&ew(i.Pe)?ON(a):PN(i.serializer,a)}(t,e)}function iz(t,e,n){return t instanceof ws?FN(t,e):t instanceof Is?LN(t,e):n}function kN(t,e){return t instanceof oa?function(r){return ew(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}var sa=class extends ia{},ws=class extends ia{constructor(e){super(),this.elements=e}};function FN(t,e){let n=VN(e);for(let r of t.elements)n.some(i=>sr(i,r))||n.push(r);return{arrayValue:{values:n}}}var Is=class extends ia{constructor(e){super(),this.elements=e}};function LN(t,e){let n=VN(e);for(let r of t.elements)n=n.filter(i=>!sr(i,r));return{arrayValue:{values:n}}}var oa=class extends ia{constructor(e,n){super(),this.serializer=e,this.Pe=n}};function XR(t){return qe(t.integerValue||t.doubleValue)}function VN(t){return CI(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function sz(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof ws&&i instanceof ws||r instanceof Is&&i instanceof Is?Xo(r.elements,i.elements,sr):r instanceof oa&&i instanceof oa?sr(r.Pe,i.Pe):r instanceof sa&&i instanceof sa}(t.transform,e.transform)}var hw=class{constructor(e,n){this.version=e,this.transformResults=n}},gs=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Rf(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var aa=class{};function UN(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lf(t.key,gs.none()):new Es(t.key,t.data,gs.none());{let n=t.data,r=Dn.empty(),i=new St(en.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new xr(t.key,r,new tr(i.toArray()),gs.none())}}function oz(t,e,n){t instanceof Es?function(i,s,o){let a=i.value.clone(),u=eN(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof xr?function(i,s,o){if(!Rf(i.precondition,s))return void s.convertToUnknownDocument(o.version);let a=eN(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(jN(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function gu(t,e,n,r){return t instanceof Es?function(s,o,a,u){if(!Rf(s.precondition,o))return a;let l=s.value.clone(),h=tN(s.fieldTransforms,u,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof xr?function(s,o,a,u){if(!Rf(s.precondition,o))return a;let l=tN(s.fieldTransforms,u,o),h=o.data;return h.setAll(jN(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(s,o,a){return Rf(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function az(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),s=kN(r.transform,i||null);s!=null&&(n===null&&(n=Dn.empty()),n.set(r.field,s))}return n||null}function ZR(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Xo(r,i,(s,o)=>sz(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var Es=class extends aa{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},xr=class extends aa{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function jN(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function eN(t,e,n){let r=new Map;Oe(t.length===n.length);for(let i=0;i<n.length;i++){let s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,iz(o,a,n[i]))}return r}function tN(t,e,n){let r=new Map;for(let i of t){let s=i.transform,o=n.data.field(i.field);r.set(i.field,rz(s,o,e))}return r}var Lf=class extends aa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},fw=class extends aa{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var pw=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let s=this.mutations[i];s.key.isEqual(e.key)&&oz(s,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=gu(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=xN();return this.mutations.forEach(i=>{let s=e.get(i.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;let u=UN(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(se.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&Xo(this.mutations,e.mutations,(n,r)=>ZR(n,r))&&Xo(this.baseMutations,e.baseMutations,(n,r)=>ZR(n,r))}},mw=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Oe(e.mutations.length===r.length);let i=function(){return XG}(),s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new t(e,n,r,i)}};var gw=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var yw=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var tt,ve;function cz(t){switch(t){default:return Z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function BN(t){if(t===void 0)return Rr("GRPC error has no .code"),x.UNKNOWN;switch(t){case tt.OK:return x.OK;case tt.CANCELLED:return x.CANCELLED;case tt.UNKNOWN:return x.UNKNOWN;case tt.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case tt.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case tt.INTERNAL:return x.INTERNAL;case tt.UNAVAILABLE:return x.UNAVAILABLE;case tt.UNAUTHENTICATED:return x.UNAUTHENTICATED;case tt.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case tt.NOT_FOUND:return x.NOT_FOUND;case tt.ALREADY_EXISTS:return x.ALREADY_EXISTS;case tt.PERMISSION_DENIED:return x.PERMISSION_DENIED;case tt.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case tt.ABORTED:return x.ABORTED;case tt.OUT_OF_RANGE:return x.OUT_OF_RANGE;case tt.UNIMPLEMENTED:return x.UNIMPLEMENTED;case tt.DATA_LOSS:return x.DATA_LOSS;default:return Z()}}(ve=tt||(tt={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";var nN=null;function uz(){return new TextEncoder}var lz=new yi([4294967295,4294967295],0);function rN(t){let e=uz().encode(t),n=new x_;return n.update(e),new Uint8Array(n.digest())}function iN(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new yi([n,r],0),new yi([i,s],0)]}var vw=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ps(`Invalid padding: ${n}`);if(r<0)throw new ps(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ps(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ps(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=yi.fromNumber(this.Ie)}Ee(e,n,r){let i=e.add(n.multiply(yi.fromNumber(r)));return i.compare(lz)===1&&(i=new yi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let n=rN(e),[r,i]=iN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new t(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let n=rN(e),[r,i]=iN(n);for(let s=0;s<this.hashCount;s++){let o=this.Ee(r,i,s);this.Ae(o)}}Ae(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},ps=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vf=class t{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,Iu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(se.min(),i,new Ge(be),Mr(),fe())}},Iu=class t{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,fe(),fe(),fe())}};var Qo=class{constructor(e,n,r,i){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=i}},Uf=class{constructor(e,n){this.targetId=e,this.me=n}},jf=class{constructor(e,n,r=Lt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},Bf=class{constructor(){this.fe=0,this.ge=oN(),this.pe=Lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=fe(),n=fe(),r=fe();return this.ge.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Iu(this.pe,this.ye,e,n,r)}ve(){this.we=!1,this.ge=oN()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},_w=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Mr(),this.qe=sN(),this.Qe=new Ge(be)}Ke(e){for(let n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(let n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{let r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(e){let n=e.targetId,r=e.me.count,i=this.Je(n);if(i){let s=i.target;if(lw(s))if(r===0){let o=new Q(s.path);this.Ue(n,o,bn.newNoDocument(o,se.min()))}else Oe(r===1);else{let o=this.Ye(n);if(o!==r){let a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}nN?.et(function(h,p,m,v,b){var N,R,P,q,H,W;let xe={localCacheCount:h,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},ne=p.unchangedNames;return ne&&(xe.bloomFilter={applied:b===0,hashCount:(N=ne?.hashCount)!==null&&N!==void 0?N:0,bitmapLength:(q=(P=(R=ne?.bits)===null||R===void 0?void 0:R.bitmap)===null||P===void 0?void 0:P.length)!==null&&q!==void 0?q:0,padding:(W=(H=ne?.bits)===null||H===void 0?void 0:H.padding)!==null&&W!==void 0?W:0,mightContain:C=>{var y;return(y=v?.mightContain(C))!==null&&y!==void 0&&y}}),xe}(o,e.me,this.Le.tt(),a,u))}}}}Ze(e){let n=e.me.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n,o,a;try{o=_i(r).toUint8Array()}catch(u){if(u instanceof Of)return Jo("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new vw(o,i,s)}catch(u){return Jo(u instanceof ps?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){let r=this.Le.getRemoteKeysForTarget(n),i=0;return r.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(e){let n=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&lw(a.target)){let u=new Q(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,bn.newNoDocument(u,e))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=fe();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{let l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let i=new Vf(e,n,this.Qe,this.ke,r);return this.ke=Mr(),this.qe=sN(),this.Qe=new Ge(be),i}$e(e,n){if(!this.ze(e))return;let r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;let i=this.Ge(e);this.it(e,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){let n=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Bf,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new St(be),this.qe=this.qe.insert(e,n)),n}ze(e){let n=this.Je(e)!==null;return n||j("WatchChangeAggregator","Detected inactive target",e),n}Je(e){let n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Bf),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}};function sN(){return new Ge(Q.comparator)}function oN(){return new Ge(Q.comparator)}var dz={asc:"ASCENDING",desc:"DESCENDING"},hz={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},fz={and:"AND",or:"OR"},ww=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function Iw(t,e){return t.useProto3Json||ap(e)?e:{value:e}}function $f(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $N(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function pz(t,e){return $f(t,e.toTimestamp())}function ir(t){return Oe(!!t),se.fromTimestamp(function(n){let r=Nr(n);return new gt(r.seconds,r.nanos)}(t))}function SI(t,e){return Ew(t,e).canonicalString()}function Ew(t,e){let n=function(i){return new He(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qN(t){let e=He.fromString(t);return Oe(KN(e)),e}function Cw(t,e){return SI(t.databaseId,e.path)}function U_(t,e){let n=qN(e);if(n.get(1)!==t.databaseId.projectId)throw new z(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Q(GN(n))}function HN(t,e){return SI(t.databaseId,e)}function mz(t){let e=qN(t);return e.length===4?He.emptyPath():GN(e)}function Tw(t){return new He(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function GN(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function aN(t,e,n){return{name:Cw(t,e),fields:n.value.mapValue.fields}}function gz(t,e){let n;if("targetChange"in e){e.targetChange;let r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Oe(h===void 0||typeof h=="string"),Lt.fromBase64String(h||"")):(Oe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),Lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?x.UNKNOWN:BN(l.code);return new z(h,l.message||"")}(o);n=new jf(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=U_(t,r.document.name),s=ir(r.document.updateTime),o=r.document.createTime?ir(r.document.createTime):se.min(),a=new Dn({mapValue:{fields:r.document.fields}}),u=bn.newFoundDocument(i,s,o,a),l=r.targetIds||[],h=r.removedTargetIds||[];n=new Qo(l,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=U_(t,r.document),s=r.readTime?ir(r.readTime):se.min(),o=bn.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qo([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=U_(t,r.document),s=r.removedTargetIds||[];n=new Qo([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:s}=r,o=new yw(i,s),a=r.targetId;n=new Uf(a,o)}}return n}function yz(t,e){let n;if(e instanceof Es)n={update:aN(t,e.key,e.value)};else if(e instanceof Lf)n={delete:Cw(t,e.key)};else if(e instanceof xr)n={update:aN(t,e.key,e.data),updateMask:bz(e.fieldMask)};else{if(!(e instanceof fw))return Z();n={verify:Cw(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){let a=o.transform;if(a instanceof sa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ws)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Is)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof oa)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:pz(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function vz(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?ir(i.updateTime):ir(s);return o.isEqual(se.min())&&(o=ir(s)),new hw(o,i.transformResults||[])}(n,e))):[]}function _z(t,e){return{documents:[HN(t,e.path)]}}function wz(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HN(t,i);let s=function(l){if(l.length!==0)return WN(or.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(m){return{field:zo(m.field),direction:Cz(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);let a=Iw(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:n,parent:i}}function Iz(t){let e=mz(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Oe(r===1);let h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=function(p){let m=zN(p);return m instanceof or&&TN(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(b){return new na(Wo(b.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,ap(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){let m=!!p.before,v=p.values||[];return new ta(v,m)}(n.startAt));let l=null;return n.endAt&&(l=function(p){let m=!p.before,v=p.values||[];return new ta(v,m)}(n.endAt)),zG(e,i,o,s,a,"F",u,l)}function Ez(t,e){let n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function zN(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Wo(n.unaryFilter.field);return it.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Wo(n.unaryFilter.field);return it.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Wo(n.unaryFilter.field);return it.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Wo(n.unaryFilter.field);return it.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return it.create(Wo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return or.create(n.compositeFilter.filters.map(r=>zN(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function Cz(t){return dz[t]}function Tz(t){return hz[t]}function Dz(t){return fz[t]}function zo(t){return{fieldPath:t.canonicalString()}}function Wo(t){return en.fromServerFormat(t.fieldPath)}function WN(t){return t instanceof it?function(n){if(n.op==="=="){if(WR(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NAN"}};if(zR(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(WR(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NAN"}};if(zR(n.value))return{unaryFilter:{field:zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zo(n.field),op:Tz(n.op),value:n.value}}}(t):t instanceof or?function(n){let r=n.getFilters().map(i=>WN(i));return r.length===1?r[0]:{compositeFilter:{op:Dz(n.op),filters:r}}}(t):Z()}function bz(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function KN(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Eu=class t{constructor(e,n,r,i,s=se.min(),o=se.min(),a=Lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var Dw=class{constructor(e){this.ct=e}};function Sz(t){let e=Iz({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dw(e,e.limit,"L"):e}var qf=class{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(qe(e.integerValue));else if("doubleValue"in e){let r=qe(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),vu(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Et(n,20),typeof r=="string"&&(r=Nr(r)),n.At(`${r.seconds||""}`),n.dt(r.nanos||0)}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(_i(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?IN(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):Z()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){let r=e.fields||{};this.Et(n,55);for(let i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){let r=e.values||[];this.Et(n,50);for(let i of r)this.It(i,n)}gt(e,n){this.Et(n,37),Q.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}};qf.bt=new qf;var bw=class{constructor(){this._n=new Sw}addToCollectionParentIndex(e,n){return this._n.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(vs.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(vs.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},Sw=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new St(He.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new St(He.comparator)).toArray()}};var BZ=new Uint8Array(0);var er=class t{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};er.DEFAULT_COLLECTION_PERCENTILE=10,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,er.DEFAULT=new er(41943040,er.DEFAULT_COLLECTION_PERCENTILE,er.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),er.DISABLED=new er(-1,0,0);var Cu=class t{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new t(0)}static Ln(){return new t(-1)}};var Aw=class{constructor(){this.changes=new wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,bn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Rw=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Nw=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&gu(r.mutation,i,tr.empty(),gt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){let i=fs();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=hu();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){let r=fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){let i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Mr(),o=mu(),a=function(){return mu()}();return n.forEach((u,l)=>{let h=r.get(l.key);i.has(l.key)&&(h===void 0||h.mutation instanceof xr)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),gu(h.mutation,l,h.mutation.getFieldMask(),gt.now())):o.set(l.key,tr.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((l,h)=>o.set(l,h)),n.forEach((l,h)=>{var p;return a.set(l,new Rw(h,(p=o.get(l))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,n){let r=mu(),i=new Ge((o,a)=>o-a),s=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(let a of o)a.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let h=r.get(u)||tr.empty();h=a.applyToLocalView(l,h),r.set(u,h);let p=(i.get(a.batchId)||fe()).add(u);i=i.insert(a.batchId,p)})}).next(()=>{let o=[],a=i.getReverseIterator();for(;a.hasNext();){let u=a.getNext(),l=u.key,h=u.value,p=xN();h.forEach(m=>{if(!s.has(m)){let v=UN(n.get(m),r.get(m));v!==null&&p.set(m,v),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return Q.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{let o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(fs()),a=-1,u=s;return o.next(l=>O.forEach(l,(h,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,u,l,fe())).next(h=>({batchId:a,changes:MN(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Q(n)).next(r=>{let i=hu();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let s=n.collectionGroup,o=hu();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,u=>{let l=function(p,m){return new ra(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,bn.newInvalidDocument(h)))});let a=hu();return o.forEach((u,l)=>{let h=s.get(u);h!==void 0&&gu(h.mutation,l,tr.empty(),gt.now()),up(n,l)&&(a=a.insert(u,l))}),a})}};var Mw=class{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return O.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ir(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:Sz(i.bundledQuery),readTime:ir(i.readTime)}}(n)),O.resolve()}};var xw=class{constructor(){this.overlays=new Ge(Q.comparator),this.hr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=fs();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.ht(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=fs(),s=n.length+1,o=new Q(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let h=s.get(l.largestBatchId);h===null&&(h=fs(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=fs(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=i)););return O.resolve(a)}ht(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new gw(n,r));let s=this.hr.get(n);s===void 0&&(s=fe(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}};var Tu=class{constructor(){this.Pr=new St(nt.Ir),this.Tr=new St(nt.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){let r=new nt(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new nt(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){let n=new Q(new He([])),r=new nt(n,e),i=new nt(n,e+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){let n=new Q(new He([])),r=new nt(n,e),i=new nt(n,e+1),s=fe();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){let n=new nt(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},nt=class{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return Q.comparator(e.key,n.key)||be(e.pr,n.pr)}static Er(e,n){return be(e.pr,n.pr)||Q.comparator(e.key,n.key)}};var Pw=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new St(nt.Ir)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new pw(s,n,r,i);this.mutationQueue.push(o);for(let a of i)this.wr=this.wr.add(new nt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.br(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new nt(n,0),i=new nt(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{let a=this.Sr(o.pr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new St(be);return n.forEach(i=>{let s=new nt(i,0),o=new nt(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),O.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,s=r;Q.isDocumentKey(s)||(s=s.child(""));let o=new nt(new Q(s),0),a=new St(be);return this.wr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),O.resolve(this.Dr(a))}Dr(e){let n=[];return e.forEach(r=>{let i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Oe(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return O.forEach(n.mutations,i=>{let s=new nt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){let r=new nt(n,0),i=this.wr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){let n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ow=class{constructor(e){this.vr=e,this.docs=function(){return new Ge(Q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():bn.newInvalidDocument(n))}getEntries(e,n){let r=Mr();return n.forEach(i=>{let s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():bn.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Mr(),o=n.path,a=new Q(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){let{key:l,value:{document:h}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||FG(kG(h),r)<=0||(i.has(h.key)||up(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Fr(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new kw(this)}getSize(e){return O.resolve(this.size)}},kw=class extends Aw{constructor(e){super(),this.ar=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}};var Fw=class{constructor(e){this.persistence=e,this.Mr=new wi(n=>TI(n),DI),this.lastRemoteSnapshotVersion=se.min(),this.highestTargetId=0,this.Or=0,this.Nr=new Tu,this.targetCount=0,this.Lr=Cu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Lr.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),O.resolve()}qn(e){this.Mr.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.Lr=new Cu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.qn(n),O.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.Mr.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);let i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this.Nr.gr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.Nr.containsKey(n))}};var Lw=class{constructor(e,n){this.Br={},this.overlays={},this.kr=new _N(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Fw(this),this.indexManager=new bw,this.remoteDocumentCache=function(i){return new Ow(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new Dw(n),this.$r=new Mw(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xw,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new Pw(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){j("MemoryPersistence","Starting transaction:",e);let i=new Vw(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(e,n){return O.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}},Vw=class extends J_{constructor(e){super(),this.currentSequenceNumber=e}},Uw=class t{constructor(e){this.persistence=e,this.zr=new Tu,this.jr=null}static Hr(e){return new t(e)}get Jr(){if(this.jr)return this.jr;throw Z()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),O.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Jr,r=>{let i=Q.fromPath(r);return this.Yr(e,i).next(s=>{s||n.removeEntry(i,se.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return O.or([()=>O.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}};var jw=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=fe(),i=fe();for(let s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new t(e,n.fromCache,r,i)}};var Bw=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var $w=class{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return yA()?8:VG(rt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){let s={result:null};return this.ji(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Bw;return this.Ji(e,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(e,n,o,a.size)})}).next(()=>s.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(du()<=le.DEBUG&&j("QueryEngine","SDK will not create cache indexes for query:",Go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),O.resolve()):(du()<=le.DEBUG&&j("QueryEngine","Query:",Go(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(du()<=le.DEBUG&&j("QueryEngine","The SDK decides to create cache indexes for query:",Go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rr(n))):O.resolve())}ji(e,n){if(JR(n))return O.resolve(null);let r=rr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=dw(n,null,"F"),r=rr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{let o=fe(...s);return this.zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(e,dw(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return JR(n)||i.isEqual(se.min())?O.resolve(null):this.zi.getDocuments(e,r).next(s=>{let o=this.Zi(n,s);return this.Xi(n,o,r,i)?O.resolve(null):(du()<=le.DEBUG&&j("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Go(n)),this.es(e,o,n,OG(i,-1)).next(a=>a))})}Zi(e,n){let r=new St(RN(e));return n.forEach((i,s)=>{up(e,s)&&(r=r.add(s))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(e,n,r){return du()<=le.DEBUG&&j("QueryEngine","Using full collection scan to execute query:",Go(n)),this.zi.getDocumentsMatchingQuery(e,n,vs.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}};var qw=class{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new Ge(be),this.rs=new wi(s=>TI(s),DI),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Nw(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}};function Az(t,e,n,r){return new qw(t,e,n,r)}function QN(t,e){return I(this,null,function*(){let n=ie(t);return yield n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{let o=[],a=[],u=fe();for(let l of i){o.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})})}function Rz(t,e){let n=ie(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,h){let p=l.batch,m=p.keys(),v=O.resolve();return m.forEach(b=>{v=v.next(()=>h.getEntry(u,b)).next(N=>{let R=l.docVersions.get(b);Oe(R!==null),N.version.compareTo(R)<0&&(p.applyToRemoteDocument(N,l),N.isValidDocument()&&(N.setReadTime(l.commitVersion),h.addEntry(N)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,p))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=fe();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function YN(t){let e=ie(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Nz(t,e){let n=ie(t),r=e.snapshotVersion,i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;let a=[];e.targetChanges.forEach((h,p)=>{let m=i.get(p);if(!m)return;a.push(n.Qr.removeMatchingKeys(s,h.removedDocuments,p).next(()=>n.Qr.addMatchingKeys(s,h.addedDocuments,p)));let v=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?v=v.withResumeToken(Lt.EMPTY_BYTE_STRING,se.min()).withLastLimboFreeSnapshotVersion(se.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(p,v),function(N,R,P){return N.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:P.addedDocuments.size+P.modifiedDocuments.size+P.removedDocuments.size>0}(m,v,h)&&a.push(n.Qr.updateTargetData(s,v))});let u=Mr(),l=fe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(Mz(s,o,e.documentUpdates).next(h=>{u=h.cs,l=h.ls})),!r.isEqual(se.min())){let h=n.Qr.getLastRemoteSnapshotVersion(s).next(p=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function Mz(t,e,n){let r=fe(),i=fe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Mr();return n.forEach((a,u)=>{let l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(se.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):j("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function xz(t,e){let n=ie(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pz(t,e){let n=ie(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Eu(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}function Hw(t,e,n){return I(this,null,function*(){let r=ie(t),i=r.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!Ru(o))throw o;j("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.ns=r.ns.remove(e),r.rs.delete(i.target)})}function cN(t,e,n){let r=ie(t),i=se.min(),s=fe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,h){let p=ie(u),m=p.rs.get(h);return m!==void 0?O.resolve(p.ns.get(m)):p.Qr.getTargetData(l,h)}(r,o,rr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,e,n?i:se.min(),n?s:fe())).next(a=>(Oz(r,QG(e),a),{documents:a,hs:s})))}function Oz(t,e,n){let r=t.ss.get(e)||se.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.ss.set(e,r)}var Hf=class{constructor(){this.activeTargetIds=tz()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Gw=class{constructor(){this.no=new Hf,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Hf,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zw=class{io(e){}shutdown(){}};var Gf=class{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){j("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.uo)e(0)}ao(){j("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Sf=null;function j_(){return Sf===null?Sf=function(){return 268435456+Math.round(2147483648*Math.random())}():Sf++,"0x"+Sf.toString(16)}var kz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Ww=class{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}Ao(e){this.Ro=e}onMessage(e){this.Vo=e}close(){this.ho()}send(e){this.lo(e)}mo(){this.Io()}fo(){this.Eo()}po(e){this.Ro(e)}yo(e){this.Vo(e)}};var bt="WebChannelConnection",Kw=class extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;let r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){let a=j_(),u=this.vo(n,r.toUriEncodedString());j("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);let l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(h=>(j("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Jo("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",i),h})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+da}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){let i=kz[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Mo(e,n,r,i){let s=j_();return new Promise((o,a)=>{let u=new P_;u.setWithCredentials(!0),u.listenOnce(k_.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case lu.NO_ERROR:let h=u.getResponseJson();j(bt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case lu.TIMEOUT:j(bt,`RPC '${e}' ${s} timed out`),a(new z(x.DEADLINE_EXCEEDED,"Request time out"));break;case lu.HTTP_ERROR:let p=u.getStatus();if(j(bt,`RPC '${e}' ${s} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);let v=m?.error;if(v&&v.status&&v.message){let b=function(R){let P=R.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(P)>=0?P:x.UNKNOWN}(v.status);a(new z(b,v.message))}else a(new z(x.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new z(x.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{j(bt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(i);j(bt,`RPC '${e}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(e,n,r){let i=j_(),s=[this.wo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=V_(),a=L_(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new O_({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let h=s.join("");j(bt,`Creating RPC '${e}' stream ${i}: ${h}`,u);let p=o.createWebChannel(h,u),m=!1,v=!1,b=new Ww({lo:R=>{v?j(bt,`Not sending because RPC '${e}' stream ${i} is closed:`,R):(m||(j(bt,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),j(bt,`RPC '${e}' stream ${i} sending:`,R),p.send(R))},ho:()=>p.close()}),N=(R,P,q)=>{R.listen(P,H=>{try{q(H)}catch(W){setTimeout(()=>{throw W},0)}})};return N(p,Ho.EventType.OPEN,()=>{v||(j(bt,`RPC '${e}' stream ${i} transport opened.`),b.mo())}),N(p,Ho.EventType.CLOSE,()=>{v||(v=!0,j(bt,`RPC '${e}' stream ${i} transport closed`),b.po())}),N(p,Ho.EventType.ERROR,R=>{v||(v=!0,Jo(bt,`RPC '${e}' stream ${i} transport errored:`,R),b.po(new z(x.UNAVAILABLE,"The operation could not be completed")))}),N(p,Ho.EventType.MESSAGE,R=>{var P;if(!v){let q=R.data[0];Oe(!!q);let H=q,W=H.error||((P=H[0])===null||P===void 0?void 0:P.error);if(W){j(bt,`RPC '${e}' stream ${i} received error:`,W);let xe=W.status,ne=function(_){let E=tt[_];if(E!==void 0)return BN(E)}(xe),C=W.message;ne===void 0&&(ne=x.INTERNAL,C="Unknown error status: "+xe+" with message "+W.message),v=!0,b.po(new z(ne,C)),p.close()}else j(bt,`RPC '${e}' stream ${i} received:`,q),b.yo(q)}}),N(a,F_.STAT_EVENT,R=>{R.stat===Df.PROXY?j(bt,`RPC '${e}' stream ${i} detected buffering proxy`):R.stat===Df.NOPROXY&&j(bt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{b.fo()},0),b}};function B_(){return typeof document<"u"?document:null}function lp(t){return new ww(t,!0)}var zf=class{constructor(e,n,r=1e3,i=1.5,s=6e4){this.oi=e,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(e){this.cancel();let n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&j("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),e())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}};var Wf=class{constructor(e,n,r,i,s,o,a,u){this.oi=e,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new zf(e,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}stop(){return I(this,null,function*(){this.Zo()&&(yield this.close(0))})}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(e){this.s_(),this.stream.send(e)}r_(){return I(this,null,function*(){if(this.Xo())return this.close(0)})}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}close(e,n){return I(this,null,function*(){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,e!==4?this.Yo.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(Rr(n.toString()),Rr("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Ao(n)})}__(){}auth(){this.state=1;let e=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{e(()=>{let i=new z(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(e,n){let r=this.a_(this.jo);this.stream=this.l_(e,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(()=>I(this,null,function*(){this.state=0,this.start()}))}c_(e){return j("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}a_(e){return n=>{this.oi.enqueueAndForget(()=>this.jo===e?n():(j("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Qw=class extends Wf{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(e,n){return this.connection.Oo("Listen",e,n)}onMessage(e){this.Yo.reset();let n=gz(this.serializer,e),r=function(s){if(!("targetChange"in s))return se.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?se.min():o.readTime?ir(o.readTime):se.min()}(e);return this.listener.h_(n,r)}P_(e){let n={};n.database=Tw(this.serializer),n.addTarget=function(s,o){let a,u=o.target;if(a=lw(u)?{documents:_z(s,u)}:{query:wz(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=$N(s,o.resumeToken);let l=Iw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(se.min())>0){a.readTime=$f(s,o.snapshotVersion.toTimestamp());let l=Iw(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let r=Ez(this.serializer,e);r&&(n.labels=r),this.i_(n)}I_(e){let n={};n.database=Tw(this.serializer),n.removeTarget=e,this.i_(n)}},Yw=class extends Wf{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(e,n){return this.connection.Oo("Write",e,n)}onMessage(e){if(Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.T_){this.Yo.reset();let n=vz(e.writeResults,e.commitTime),r=ir(e.commitTime);return this.listener.A_(r,n)}return Oe(!e.writeResults||e.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){let e={};e.database=Tw(this.serializer),this.i_(e)}d_(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>yz(this.serializer,r))};this.i_(n)}};var Jw=class extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new z(x.FAILED_PRECONDITION,"The client has already been terminated.")}Co(e,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(e,Ew(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(x.UNKNOWN,s.toString())})}xo(e,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(e,Ew(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(x.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}},Xw=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(e){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.S_("Offline")))}set(e){this.C_(),this.g_=0,e==="Online"&&(this.y_=!1),this.S_(e)}S_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}b_(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Rr(n),this.y_=!1):j("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}};var Zw=class{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(()=>I(this,null,function*(){Cs(this)&&(j("RemoteStore","Restarting streams for network reachability change."),yield function(u){return I(this,null,function*(){let l=ie(u);l.M_.add(4),yield Nu(l),l.N_.set("Unknown"),l.M_.delete(4),yield dp(l)})}(this))}))}),this.N_=new Xw(r,i)}};function dp(t){return I(this,null,function*(){if(Cs(t))for(let e of t.x_)yield e(!0)})}function Nu(t){return I(this,null,function*(){for(let e of t.x_)yield e(!1)})}function JN(t,e){let n=ie(t);n.F_.has(e.targetId)||(n.F_.set(e.targetId,e),MI(n)?NI(n):fa(n).Xo()&&RI(n,e))}function AI(t,e){let n=ie(t),r=fa(n);n.F_.delete(e),r.Xo()&&XN(n,e),n.F_.size===0&&(r.Xo()?r.n_():Cs(n)&&n.N_.set("Unknown"))}function RI(t,e){if(t.L_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(se.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}fa(t).P_(e)}function XN(t,e){t.L_.xe(e),fa(t).I_(e)}function NI(t){t.L_=new _w({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.F_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),fa(t).start(),t.N_.w_()}function MI(t){return Cs(t)&&!fa(t).Zo()&&t.F_.size>0}function Cs(t){return ie(t).M_.size===0}function ZN(t){t.L_=void 0}function Fz(t){return I(this,null,function*(){t.N_.set("Online")})}function Lz(t){return I(this,null,function*(){t.F_.forEach((e,n)=>{RI(t,e)})})}function Vz(t,e){return I(this,null,function*(){ZN(t),MI(t)?(t.N_.D_(e),NI(t)):t.N_.set("Unknown")})}function Uz(t,e,n){return I(this,null,function*(){if(t.N_.set("Online"),e instanceof jf&&e.state===2&&e.cause)try{yield function(i,s){return I(this,null,function*(){let o=s.cause;for(let a of s.targetIds)i.F_.has(a)&&(yield i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))})}(t,e)}catch(r){j("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield Kf(t,r)}else if(e instanceof Qo?t.L_.Ke(e):e instanceof Uf?t.L_.He(e):t.L_.We(e),!n.isEqual(se.min()))try{let r=yield YN(t.localStore);n.compareTo(r)>=0&&(yield function(s,o){let a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let h=s.F_.get(l);h&&s.F_.set(l,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{let h=s.F_.get(u);if(!h)return;s.F_.set(u,h.withResumeToken(Lt.EMPTY_BYTE_STRING,h.snapshotVersion)),XN(s,u);let p=new Eu(h.target,u,l,h.sequenceNumber);RI(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n))}catch(r){j("RemoteStore","Failed to raise snapshot:",r),yield Kf(t,r)}})}function Kf(t,e,n){return I(this,null,function*(){if(!Ru(e))throw e;t.M_.add(1),yield Nu(t),t.N_.set("Offline"),n||(n=()=>YN(t.localStore)),t.asyncQueue.enqueueRetryable(()=>I(this,null,function*(){j("RemoteStore","Retrying IndexedDB access"),yield n(),t.M_.delete(1),yield dp(t)}))})}function eM(t,e){return e().catch(n=>Kf(t,n,e))}function hp(t){return I(this,null,function*(){let e=ie(t),n=Ii(e),r=e.v_.length>0?e.v_[e.v_.length-1].batchId:-1;for(;jz(e);)try{let i=yield xz(e.localStore,r);if(i===null){e.v_.length===0&&n.n_();break}r=i.batchId,Bz(e,i)}catch(i){yield Kf(e,i)}tM(e)&&nM(e)})}function jz(t){return Cs(t)&&t.v_.length<10}function Bz(t,e){t.v_.push(e);let n=Ii(t);n.Xo()&&n.E_&&n.d_(e.mutations)}function tM(t){return Cs(t)&&!Ii(t).Zo()&&t.v_.length>0}function nM(t){Ii(t).start()}function $z(t){return I(this,null,function*(){Ii(t).V_()})}function qz(t){return I(this,null,function*(){let e=Ii(t);for(let n of t.v_)e.d_(n.mutations)})}function Hz(t,e,n){return I(this,null,function*(){let r=t.v_.shift(),i=mw.from(r,e,n);yield eM(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),yield hp(t)})}function Gz(t,e){return I(this,null,function*(){e&&Ii(t).E_&&(yield function(r,i){return I(this,null,function*(){if(function(o){return cz(o)&&o!==x.ABORTED}(i.code)){let s=r.v_.shift();Ii(r).t_(),yield eM(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),yield hp(r)}})}(t,e)),tM(t)&&nM(t)})}function uN(t,e){return I(this,null,function*(){let n=ie(t);n.asyncQueue.verifyOperationInProgress(),j("RemoteStore","RemoteStore received new credentials");let r=Cs(n);n.M_.add(3),yield Nu(n),r&&n.N_.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.M_.delete(3),yield dp(n)})}function zz(t,e){return I(this,null,function*(){let n=ie(t);e?(n.M_.delete(2),yield dp(n)):e||(n.M_.add(2),yield Nu(n),n.N_.set("Unknown"))})}function fa(t){return t.B_||(t.B_=function(n,r,i){let s=ie(n);return s.f_(),new Qw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:Fz.bind(null,t),To:Lz.bind(null,t),Ao:Vz.bind(null,t),h_:Uz.bind(null,t)}),t.x_.push(e=>I(this,null,function*(){e?(t.B_.t_(),MI(t)?NI(t):t.N_.set("Unknown")):(yield t.B_.stop(),ZN(t))}))),t.B_}function Ii(t){return t.k_||(t.k_=function(n,r,i){let s=ie(n);return s.f_(),new Yw(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Po:()=>Promise.resolve(),To:$z.bind(null,t),Ao:Gz.bind(null,t),R_:qz.bind(null,t),A_:Hz.bind(null,t)}),t.x_.push(e=>I(this,null,function*(){e?(t.k_.t_(),yield hp(t)):(yield t.k_.stop(),t.v_.length>0&&(j("RemoteStore",`Stopping write stream with ${t.v_.length} pending writes`),t.v_=[]))}))),t.k_}var eI=class t{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Ar,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){let o=Date.now()+r,a=new t(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function xI(t,e){if(Rr("AsyncQueue",`${e}: ${t}`),Ru(t))return new z(x.UNAVAILABLE,`${e}: ${t}`);throw t}var Qf=class t{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Q.comparator(n.key,r.key):(n,r)=>Q.comparator(n.key,r.key),this.keyedMap=hu(),this.sortedSet=new Ge(this.comparator)}static emptySet(e){return new t(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var Yf=class{constructor(){this.q_=new Ge(Q.comparator)}track(e){let n=e.doc.key,r=this.q_.get(n);r?e.type!==0&&r.type===3?this.q_=this.q_.insert(n,e):e.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.q_=this.q_.remove(n):e.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:e.doc}):Z():this.q_=this.q_.insert(n,e)}Q_(){let e=[];return this.q_.inorderTraversal((n,r)=>{e.push(r)}),e}},ca=class t{constructor(e,n,r,i,s,o,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,s){let o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new t(e,n,Qf.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&cp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var tI=class{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(e=>e.G_())}},nI=class{constructor(){this.queries=new wi(e=>AN(e),cp),this.onlineState="Unknown",this.z_=new Set}};function Wz(t,e){return I(this,null,function*(){let n=ie(t),r=3,i=e.query,s=n.queries.get(i);s?!s.W_()&&e.G_()&&(r=2):(s=new tI,r=e.G_()?0:1);try{switch(r){case 0:s.K_=yield n.onListen(i,!0);break;case 1:s.K_=yield n.onListen(i,!1);break;case 2:yield n.onFirstRemoteStoreListen(i)}}catch(o){let a=xI(o,`Initialization of query '${Go(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.U_.push(e),e.j_(n.onlineState),s.K_&&e.H_(s.K_)&&PI(n)})}function Kz(t,e){return I(this,null,function*(){let n=ie(t),r=e.query,i=3,s=n.queries.get(r);if(s){let o=s.U_.indexOf(e);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=e.G_()?0:1:!s.W_()&&e.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}})}function Qz(t,e){let n=ie(t),r=!1;for(let i of e){let s=i.query,o=n.queries.get(s);if(o){for(let a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&PI(n)}function Yz(t,e,n){let r=ie(t),i=r.queries.get(e);if(i)for(let s of i.U_)s.onError(n);r.queries.delete(e)}function PI(t){t.z_.forEach(e=>{e.next()})}var rI,lN;(lN=rI||(rI={})).J_="default",lN.Cache="cache";var iI=class{constructor(e,n,r){this.query=e,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ca(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Z_?this.ea(e)&&(this.Y_.next(e),n=!0):this.ta(e,this.onlineState)&&(this.na(e),n=!0),this.X_=e,n}onError(e){this.Y_.error(e)}j_(e){this.onlineState=e;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,e)&&(this.na(this.X_),n=!0),n}ta(e,n){if(!e.fromCache||!this.G_())return!0;let r=n!=="Offline";return(!this.options.ra||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ea(e){if(e.docChanges.length>0)return!0;let n=this.X_&&this.X_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(e){e=ca.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Z_=!0,this.Y_.next(e)}G_(){return this.options.source!==rI.Cache}};var Jf=class{constructor(e){this.key=e}},Xf=class{constructor(e){this.key=e}},sI=class{constructor(e,n){this.query=e,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=fe(),this.mutatedKeys=fe(),this.Ia=RN(e),this.Ta=new Qf(this.Ia)}get Ea(){return this.la}da(e,n){let r=n?n.Aa:new Yf,i=n?n.Ta:this.Ta,s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((h,p)=>{let m=i.get(h),v=up(this.query,p)?p:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations),R=!1;m&&v?m.data.isEqual(v.data)?b!==N&&(r.track({type:3,doc:v}),R=!0):this.Ra(m,v)||(r.track({type:2,doc:v}),R=!0,(u&&this.Ia(v,u)>0||l&&this.Ia(v,l)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),R=!0):m&&!v&&(r.track({type:1,doc:m}),R=!0,(u||l)&&(a=!0)),R&&(v?(o=o.add(v),s=N?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let s=this.Ta;this.Ta=e.Ta,this.mutatedKeys=e.mutatedKeys;let o=e.Aa.Q_();o.sort((h,p)=>function(v,b){let N=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return N(v)-N(b)}(h.type,p.type)||this.Ia(h.doc,p.doc)),this.Va(r),i=i!=null&&i;let a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new ca(this.query,e.Ta,s,o,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new Yf,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(e){return!this.la.has(e)&&!!this.Ta.has(e)&&!this.Ta.get(e).hasLocalMutations}Va(e){e&&(e.addedDocuments.forEach(n=>this.la=this.la.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=e.current)}ma(){if(!this.current)return[];let e=this.Pa;this.Pa=fe(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});let n=[];return e.forEach(r=>{this.Pa.has(r)||n.push(new Xf(r))}),this.Pa.forEach(r=>{e.has(r)||n.push(new Jf(r))}),n}pa(e){this.la=e.hs,this.Pa=fe();let n=this.da(e.documents);return this.applyChanges(n,!0)}ya(){return ca.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}},oI=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},aI=class{constructor(e){this.key=e,this.wa=!1}},cI=class{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new wi(a=>AN(a),cp),this.Da=new Map,this.Ca=new Set,this.va=new Ge(Q.comparator),this.Fa=new Map,this.Ma=new Tu,this.xa={},this.Oa=new Map,this.Na=Cu.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}};function Jz(t,e,n=!0){return I(this,null,function*(){let r=cM(t),i,s=r.ba.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=yield rM(r,e,n,!0),i})}function Xz(t,e){return I(this,null,function*(){let n=cM(t);yield rM(n,e,!0,!1)})}function rM(t,e,n,r){return I(this,null,function*(){let i=yield Pz(t.localStore,rr(e)),s=i.targetId,o=n?t.sharedClientState.addLocalQueryTarget(s):"not-current",a;return r&&(a=yield Zz(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&JN(t.remoteStore,i),a})}function Zz(t,e,n,r,i){return I(this,null,function*(){t.Ba=(p,m,v)=>function(N,R,P,q){return I(this,null,function*(){let H=R.view.da(P);H.Xi&&(H=yield cN(N.localStore,R.query,!1).then(({documents:C})=>R.view.da(C,H)));let W=q&&q.targetChanges.get(R.targetId),xe=q&&q.targetMismatches.get(R.targetId)!=null,ne=R.view.applyChanges(H,N.isPrimaryClient,W,xe);return hN(N,R.targetId,ne.fa),ne.snapshot})}(t,p,m,v);let s=yield cN(t.localStore,e,!0),o=new sI(e,s.hs),a=o.da(s.documents),u=Iu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=o.applyChanges(a,t.isPrimaryClient,u);hN(t,n,l.fa);let h=new oI(e,n,o);return t.ba.set(e,h),t.Da.has(n)?t.Da.get(n).push(e):t.Da.set(n,[e]),l.snapshot})}function e4(t,e,n){return I(this,null,function*(){let r=ie(t),i=r.ba.get(e),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!cp(o,e))),void r.ba.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Hw(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&AI(r.remoteStore,i.targetId),uI(r,i.targetId)}).catch(Au))):(uI(r,i.targetId),yield Hw(r.localStore,i.targetId,!0))})}function t4(t,e){return I(this,null,function*(){let n=ie(t),r=n.ba.get(e),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),AI(n.remoteStore,r.targetId))})}function n4(t,e,n){return I(this,null,function*(){let r=u4(t);try{let i=yield function(o,a){let u=ie(o),l=gt.now(),h=a.reduce((v,b)=>v.add(b.key),fe()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let b=Mr(),N=fe();return u.os.getEntries(v,h).next(R=>{b=R,b.forEach((P,q)=>{q.isValidDocument()||(N=N.add(P))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,b)).next(R=>{p=R;let P=[];for(let q of a){let H=az(q,p.get(q.key).overlayedDocument);H!=null&&P.push(new xr(q.key,H,EN(H.value.mapValue),gs.exists(!0)))}return u.mutationQueue.addMutationBatch(v,l,P,a)}).next(R=>{m=R;let P=R.applyToLocalDocumentSet(p,N);return u.documentOverlayCache.saveOverlays(v,R.batchId,P)})}).then(()=>({batchId:m.batchId,changes:MN(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Ge(be)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),yield Mu(r,i.changes),yield hp(r.remoteStore)}catch(i){let s=xI(i,"Failed to persist write");n.reject(s)}})}function iM(t,e){return I(this,null,function*(){let n=ie(t);try{let r=yield Nz(n.localStore,e);e.targetChanges.forEach((i,s)=>{let o=n.Fa.get(s);o&&(Oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?Oe(o.wa):i.removedDocuments.size>0&&(Oe(o.wa),o.wa=!1))}),yield Mu(n,r,e)}catch(r){yield Au(r)}})}function dN(t,e,n){let r=ie(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.ba.forEach((s,o)=>{let a=o.view.j_(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){let u=ie(o);u.onlineState=a;let l=!1;u.queries.forEach((h,p)=>{for(let m of p.U_)m.j_(a)&&(l=!0)}),l&&PI(u)}(r.eventManager,e),i.length&&r.Sa.h_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function r4(t,e,n){return I(this,null,function*(){let r=ie(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Fa.get(e),s=i&&i.key;if(s){let o=new Ge(Q.comparator);o=o.insert(s,bn.newNoDocument(s,se.min()));let a=fe().add(s),u=new Vf(se.min(),new Map,new Ge(be),o,a);yield iM(r,u),r.va=r.va.remove(s),r.Fa.delete(e),OI(r)}else yield Hw(r.localStore,e,!1).then(()=>uI(r,e,n)).catch(Au)})}function i4(t,e){return I(this,null,function*(){let n=ie(t),r=e.batch.batchId;try{let i=yield Rz(n.localStore,e);oM(n,r,null),sM(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield Mu(n,i)}catch(i){yield Au(i)}})}function s4(t,e,n){return I(this,null,function*(){let r=ie(t);try{let i=yield function(o,a){let u=ie(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return u.mutationQueue.lookupMutationBatch(l,a).next(p=>(Oe(p!==null),h=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>u.localDocuments.getDocuments(l,h))})}(r.localStore,e);oM(r,e,n),sM(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),yield Mu(r,i)}catch(i){yield Au(i)}})}function sM(t,e){(t.Oa.get(e)||[]).forEach(n=>{n.resolve()}),t.Oa.delete(e)}function oM(t,e,n){let r=ie(t),i=r.xa[r.currentUser.toKey()];if(i){let s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.xa[r.currentUser.toKey()]=i}}function uI(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Da.get(e))t.ba.delete(r),n&&t.Sa.ka(r,n);t.Da.delete(e),t.isPrimaryClient&&t.Ma.Vr(e).forEach(r=>{t.Ma.containsKey(r)||aM(t,r)})}function aM(t,e){t.Ca.delete(e.path.canonicalString());let n=t.va.get(e);n!==null&&(AI(t.remoteStore,n),t.va=t.va.remove(e),t.Fa.delete(n),OI(t))}function hN(t,e,n){for(let r of n)r instanceof Jf?(t.Ma.addReference(r.key,e),o4(t,r)):r instanceof Xf?(j("SyncEngine","Document no longer in limbo: "+r.key),t.Ma.removeReference(r.key,e),t.Ma.containsKey(r.key)||aM(t,r.key)):Z()}function o4(t,e){let n=e.key,r=n.path.canonicalString();t.va.get(n)||t.Ca.has(r)||(j("SyncEngine","New document in limbo: "+n),t.Ca.add(r),OI(t))}function OI(t){for(;t.Ca.size>0&&t.va.size<t.maxConcurrentLimboResolutions;){let e=t.Ca.values().next().value;t.Ca.delete(e);let n=new Q(He.fromString(e)),r=t.Na.next();t.Fa.set(r,new aI(n)),t.va=t.va.insert(n,r),JN(t.remoteStore,new Eu(rr(bI(n.path)),r,"TargetPurposeLimboResolution",_N.oe))}}function Mu(t,e,n){return I(this,null,function*(){let r=ie(t),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let h=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,h?"current":"not-current")}if(l){i.push(l);let h=jw.Ki(u.targetId,l);s.push(h)}}))}),yield Promise.all(o),r.Sa.h_(i),yield function(u,l){return I(this,null,function*(){let h=ie(u);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.qi,v=>h.persistence.referenceDelegate.addReference(p,m.targetId,v)).next(()=>O.forEach(m.Qi,v=>h.persistence.referenceDelegate.removeReference(p,m.targetId,v)))))}catch(p){if(!Ru(p))throw p;j("LocalStore","Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let v=h.ns.get(m),b=v.snapshotVersion,N=v.withLastLimboFreeSnapshotVersion(b);h.ns=h.ns.insert(m,N)}}})}(r.localStore,s))})}function a4(t,e){return I(this,null,function*(){let n=ie(t);if(!n.currentUser.isEqual(e)){j("SyncEngine","User change. New user:",e.toKey());let r=yield QN(n.localStore,e);n.currentUser=e,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new z(x.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Mu(n,r.us)}})}function c4(t,e){let n=ie(t),r=n.Fa.get(e);if(r&&r.wa)return fe().add(r.key);{let i=fe(),s=n.Da.get(e);if(!s)return i;for(let o of s){let a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function cM(t){let e=ie(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=c4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=r4.bind(null,e),e.Sa.h_=Qz.bind(null,e.eventManager),e.Sa.ka=Yz.bind(null,e.eventManager),e}function u4(t){let e=ie(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=i4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=s4.bind(null,e),e}var Zf=class{constructor(){this.synchronizeTabs=!1}initialize(e){return I(this,null,function*(){this.serializer=lp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Az(this.persistence,new $w,e.initialUser,this.serializer)}createPersistence(e){return new Lw(Uw.Hr,this.serializer)}createSharedClientState(e){return new Gw}terminate(){return I(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var lI=class{initialize(e,n){return I(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=a4.bind(null,this.syncEngine),yield zz(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new nI}()}createDatastore(e){let n=lp(e.databaseInfo.databaseId),r=function(s){return new Kw(s)}(e.databaseInfo);return function(s,o,a,u){return new Jw(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new Zw(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>dN(this.syncEngine,n,0),function(){return Gf.D()?new Gf:new zw}())}createSyncEngine(e,n){return function(i,s,o,a,u,l,h){let p=new cI(i,s,o,a,u,l);return h&&(p.La=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return I(this,null,function*(){var e;yield function(r){return I(this,null,function*(){let i=ie(r);j("RemoteStore","RemoteStore shutting down."),i.M_.add(5),yield Nu(i),i.O_.shutdown(),i.N_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()})}};var dI=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ka(this.observer.next,e)}error(e){this.observer.error?this.Ka(this.observer.error,e):Rr("Uncaught Error in snapshot listener:",e.toString())}$a(){this.muted=!0}Ka(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}};var hI=class{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=ut.UNAUTHENTICATED,this.clientId=Mf.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,s=>I(this,null,function*(){j("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(r,s=>(j("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Ar;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>I(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=xI(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function $_(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress(),j("FirestoreClient","Initializing OfflineComponentProvider");let n=t.configuration;yield e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(i=>I(this,null,function*(){r.isEqual(i)||(yield QN(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e})}function fN(t,e){return I(this,null,function*(){t.asyncQueue.verifyOperationInProgress();let n=yield d4(t);j("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>uN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>uN(e.remoteStore,i)),t._onlineComponents=e})}function l4(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}function d4(t){return I(this,null,function*(){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){j("FirestoreClient","Using user provided OfflineComponentProvider");try{yield $_(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!l4(n))throw n;Jo("Error using user provided cache. Falling back to memory cache: "+n),yield $_(t,new Zf)}}else j("FirestoreClient","Using default OfflineComponentProvider"),yield $_(t,new Zf);return t._offlineComponents})}function uM(t){return I(this,null,function*(){return t._onlineComponents||(t._uninitializedComponentsProvider?(j("FirestoreClient","Using user provided OnlineComponentProvider"),yield fN(t,t._uninitializedComponentsProvider._online)):(j("FirestoreClient","Using default OnlineComponentProvider"),yield fN(t,new lI))),t._onlineComponents})}function h4(t){return uM(t).then(e=>e.syncEngine)}function pN(t){return I(this,null,function*(){let e=yield uM(t),n=e.eventManager;return n.onListen=Jz.bind(null,e.syncEngine),n.onUnlisten=e4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Xz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=t4.bind(null,e.syncEngine),n})}function lM(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var mN=new Map;function dM(t,e,n){if(!n)throw new z(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function f4(t,e,n,r){if(e===!0&&r===!0)throw new z(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function gN(t){if(!Q.isDocumentKey(t))throw new z(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function yN(t){if(Q.isDocumentKey(t))throw new z(x.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function kI(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function yu(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=kI(t);throw new z(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}var ep=class{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lM((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ua=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ep({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ep(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new q_;switch(r.type){case"firstParty":return new W_(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){let r=mN.get(n);r&&(j("ComponentProvider","Removing Datastore"),mN.delete(n),r.terminate())}(this),Promise.resolve()}};function hM(t,e,n,r={}){var i;let s=(t=yu(t,ua))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Jo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=ut.MOCK_USER;else{a=Qh(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);let l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new z(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ut(l)}t._authCredentials=new H_(new Nf(a,u))}}var tp=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},dn=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}},vi=class t extends tp{constructor(e,n,r){super(e,n,bI(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new dn(this.firestore,null,new Q(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function pa(t,e,...n){if(t=ct(t),dM("collection","path",e),t instanceof ua){let r=He.fromString(e,...n);return yN(r),new vi(t,null,r)}{if(!(t instanceof dn||t instanceof vi))throw new z(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return yN(r),new vi(t.firestore,null,r)}}function fM(t,e,...n){if(t=ct(t),arguments.length===1&&(e=Mf.newId()),dM("doc","path",e),t instanceof ua){let r=He.fromString(e,...n);return gN(r),new dn(t,null,new Q(r))}{if(!(t instanceof dn||t instanceof vi))throw new z(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(He.fromString(e,...n));return gN(r),new dn(t.firestore,t instanceof vi?t.converter:null,new Q(r))}}var fI=class{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new zf(this,"async_queue_retry"),this.hu=()=>{let n=B_();n&&j("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};let e=B_();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.ou){this.ou=!0,this.cu=e||!1;let n=B_();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(e){if(this.Pu(),this.ou)return new Promise(()=>{});let n=new Ar;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.su.push(e),this.Tu()))}Tu(){return I(this,null,function*(){if(this.su.length!==0){try{yield this.su[0](),this.su.shift(),this.Yo.reset()}catch(e){if(!Ru(e))throw e;j("AsyncQueue","Operation failed with retryable error: "+e)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}})}Iu(e){let n=this.iu.then(()=>(this.uu=!0,e().catch(r=>{this.au=r,this.uu=!1;let i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Rr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(e,n,r){this.Pu(),this.lu.indexOf(e)>-1&&(n=0);let i=eI.createAndSchedule(this,e,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&Z()}verifyOperationInProgress(){}du(){return I(this,null,function*(){let e;do e=this.iu,yield e;while(e!==this.iu)})}Au(e){for(let n of this._u)if(n.timerId===e)return!0;return!1}Ru(e){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this._u)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.du()})}Vu(e){this.lu.push(e)}Eu(e){let n=this._u.indexOf(e);this._u.splice(n,1)}};function vN(t){return function(n,r){if(typeof n!="object"||n===null)return!1;let i=n;for(let s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}var la=class extends ua{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new fI}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gM(this),this._firestoreClient.terminate()}};function pM(t,e){let n=typeof t=="object"?t:li(),r=typeof t=="string"?t:e||"(default)",i=is(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let s=Kh("firestore");s&&hM(i,...s)}return i}function mM(t){return t._firestoreClient||gM(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function gM(t){var e,n,r;let i=t._freezeSettings(),s=function(a,u,l,h){return new X_(a,u,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,lM(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new hI(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Du=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Lt.fromBase64String(e))}catch(n){throw new z(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var bu=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var np=class{constructor(e){this._methodName=e}};var Su=class{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return be(this._lat,e._lat)||be(this._long,e._long)}};var p4=/^__.*__$/,pI=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new xr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Es(e,this.data,n,this.fieldTransforms)}};function yM(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}var mI=class t{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.wu(e),i}Su(e){var n;let r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(e){return this.gu({path:void 0,yu:!0})}Du(e){return rp(e,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let e=0;e<this.path.length;e++)this.wu(this.path.get(e))}wu(e){if(e.length===0)throw this.Du("Document fields must not be empty");if(yM(this.fu)&&p4.test(e))throw this.Du('Document fields cannot begin and end with "__"')}},gI=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||lp(e)}Fu(e,n,r,i=!1){return new mI({fu:e,methodName:n,vu:r,path:en.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function m4(t){let e=t._freezeSettings(),n=lp(t._databaseId);return new gI(t._databaseId,!!e.ignoreUndefinedProperties,n)}function g4(t,e,n,r,i,s={}){let o=t.Fu(s.merge||s.mergeFields?2:0,e,n,i);IM("Data must be an object, but it was:",o,r);let a=_M(r,o),u,l;if(s.merge)u=new tr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let p of s.mergeFields){let m=y4(e,p,n);if(!o.contains(m))throw new z(x.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);_4(h,m)||h.push(m)}u=new tr(h),l=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=o.fieldTransforms;return new pI(new Dn(a),u,l)}function vM(t,e){if(wM(t=ct(t)))return IM("Unsupported field value:",e,t),_M(t,e);if(t instanceof np)return function(r,i){if(!yM(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);let s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.yu&&e.fu!==4)throw e.Du("Nested arrays are not supported");return function(r,i){let s=[],o=0;for(let a of r){let u=vM(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=ct(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nz(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let s=gt.fromDate(r);return{timestampValue:$f(i.serializer,s)}}if(r instanceof gt){let s=new gt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:$f(i.serializer,s)}}if(r instanceof Su)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Du)return{bytesValue:$N(i.serializer,r._byteString)};if(r instanceof dn){let s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:SI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${kI(r)}`)}(t,e)}function _M(t,e){let n={};return wN(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ha(t,(r,i)=>{let s=vM(i,e.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function wM(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof gt||t instanceof Su||t instanceof Du||t instanceof dn||t instanceof np)}function IM(t,e,n){if(!wM(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){let r=kI(n);throw r==="an object"?e.Du(t+" a custom object"):e.Du(t+" "+r)}}function y4(t,e,n){if((e=ct(e))instanceof bu)return e._internalPath;if(typeof e=="string")return EM(t,e);throw rp("Field path arguments must be of type string or ",t,!1,void 0,n)}var v4=new RegExp("[~\\*/\\[\\]]");function EM(t,e,n){if(e.search(v4)>=0)throw rp(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new bu(...e.split("."))._internalPath}catch{throw rp(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function rp(t,e,n,r,i){let s=r&&!r.isEmpty(),o=i!==void 0,a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new z(x.INVALID_ARGUMENT,a+t+u)}function _4(t,e){return t.some(n=>n.isEqual(e))}var ip=class{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new dn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new yI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(CM("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},yI=class extends ip{data(){return super.data()}};function CM(t,e){return typeof e=="string"?EM(t,e):e instanceof bu?e._internalPath:e._delegate._internalPath}function w4(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(x.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vI=class{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return qe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(_i(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return ha(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new Su(qe(e.latitude),qe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=EI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(e));default:return null}}convertTimestamp(e){let n=Nr(e);return new gt(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=He.fromString(e);Oe(KN(r));let i=new kf(r.get(1),r.get(3)),s=new Q(r.popFirst(5));return i.isEqual(n)||Rr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}};function I4(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var ms=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},sp=class extends ip{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new Yo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(CM("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},Yo=class extends sp{data(e={}){return super.data(e)}},_I=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new ms(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Yo(this._firestore,this._userDataWriter,r.key,r,new ms(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(x.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{let u=new Yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let u=new Yo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new ms(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:E4(a.type),doc:u,oldIndex:l,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function E4(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Z()}}var op=class extends vI{constructor(e){super(),this.firestore=e}convertBytes(e){return new Du(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new dn(this.firestore,null,n)}};function TM(t,e){let n=yu(t.firestore,la),r=fM(t),i=I4(t.converter,e);return C4(n,[g4(m4(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gs.exists(!1))]).then(()=>r)}function FI(t,...e){var n,r,i;t=ct(t);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||vN(e[o])||(s=e[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(vN(e[o])){let p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(i=p.complete)===null||i===void 0?void 0:i.bind(p)}let u,l,h;if(t instanceof dn)l=yu(t.firestore,la),h=bI(t._key.path),u={next:p=>{e[o]&&e[o](T4(l,t,p))},error:e[o+1],complete:e[o+2]};else{let p=yu(t,tp);l=yu(p.firestore,la),h=p._query;let m=new op(l);u={next:v=>{e[o]&&e[o](new _I(l,m,p,v))},error:e[o+1],complete:e[o+2]},w4(t._query)}return function(m,v,b,N){let R=new dI(N),P=new iI(v,R,b);return m.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return Wz(yield pN(m),P)})),()=>{R.$a(),m.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return Kz(yield pN(m),P)}))}}(mM(l),h,a,u)}function C4(t,e){return function(r,i){let s=new Ar;return r.asyncQueue.enqueueAndForget(()=>I(this,null,function*(){return n4(yield h4(r),i,s)})),s.promise}(mM(t),e)}function T4(t,e,n){let r=n.docs.get(e._key),i=new op(t);return new sp(t,i,e._key,r,new ms(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){da=i})(Jn),Qn(new $t("firestore",(r,{instanceIdentifier:i,options:s})=>{let o=r.getProvider("app").getImmediate(),a=new la(new G_(r.getProvider("auth-internal")),new Q_(r.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new kf(l.options.projectId,h)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ue(qR,"4.6.3",e),Ue(qR,"4.6.3","esm2017")})();var fp=function(){return fp=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},fp.apply(this,arguments)};var S4={includeMetadataChanges:!1};function DM(t,e){return e===void 0&&(e=S4),new ae(function(n){var r=FI(t,e,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)});return{unsubscribe:r}})}function bM(t,e){var n;e===void 0&&(e={});var r=t.data(e);return!t.exists()||typeof r!="object"||r===null||!e.idField?r:fp(fp({},r),(n={},n[e.idField]=t.id,n))}function SM(t){return DM(t,{includeMetadataChanges:!0}).pipe(te(function(e){return e.docs}))}function AM(t,e){return e===void 0&&(e={}),SM(t).pipe(te(function(n){return n.map(function(r){return bM(r,e)})}))}var Sn=class{constructor(e){return e}},RM="firestore",LI=class{constructor(){return os(RM)}};var VI=new B("angularfire2.firestore-instances");function A4(t,e){let n=Bo(RM,t,e);return n&&new Sn(n)}function R4(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Sn(r)}}var N4={provide:LI,deps:[[new We,VI]]},M4={provide:Sn,useFactory:A4,deps:[[new We,VI],Tn]};function NM(t,...e){return Ue("angularfire",Cr.full,"fst"),jt([M4,N4,{provide:VI,useFactory:R4(t),multi:!0,deps:[ye,pt,hi,Tr,[new We,hs],[new We,di],...e]}])}var pp=ln(AM,!0);var MM=ln(TM,!0);var xM=ln(pa,!0);var PM=ln(pM,!0);var OM=(()=>{let e=class e{constructor(){this._firestore=M(Sn)}create(r){let i=xM(this._firestore,"collection");MM(i,L({},r))}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=$({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function x4(t,e){if(t&1){let n=Gd();U(0,"tr",3),Ke("click",function(){let i=bd(n).$implicit,s=Kt(2);return Sd(s.handleSelectCountry(i))}),U(1,"td"),J(2),V(),U(3,"td"),Ve(4,"img",4),V()()}if(t&2){let n=e.$implicit;ue(2),zi(n.name.common),ue(2),De("src",n.flags.svg,Hi)}}function P4(t,e){if(t&1&&(yr(0),U(1,"table")(2,"tr")(3,"th",1),J(4,"Nombre"),V(),U(5,"th"),J(6,"Bandera"),V()(),je(7,x4,5,2,"tr",2),V(),vr()),t&2){let n=Kt();ue(7),De("ngForOf",n.countries)}}var kM=(()=>{let e=class e{constructor(){this.countries=[],this.httpClient=M(gc),this.onCountrySelect=new Xe}getCountries(){return this.httpClient.get("https://restcountries.com/v3.1/subregion/Africa")}handleSelectCountry(r){console.log(r),this.onCountrySelect.emit({name:r.name.common,flag:r.flags.svg})}ngOnInit(){this.getCountries().subscribe({next:r=>{console.log(r),this.countries=r}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["countries-table"]],outputs:{onCountrySelect:"onCountrySelect"},standalone:!0,features:[et],decls:1,vars:1,consts:[[4,"ngIf"],[2,"text-align","start"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],["alt","",2,"height","30px","width","50px",3,"src"]],template:function(i,s){i&1&&je(0,P4,8,1,"ng-container",0),i&2&&De("ngIf",s.countries.length)},dependencies:[Qt,Zd,cn]});let t=e;return t})();function O4(t,e){t&1&&(U(0,"div",19),J(1," DNI es requerido "),V())}function k4(t,e){t&1&&(U(0,"div",19),J(1," Nombre es requerido "),V())}function F4(t,e){t&1&&(U(0,"div",19),J(1," Edad es requerido y debe estar entre 18 y 80 "),V())}function L4(t,e){t&1&&(U(0,"div",19),J(1," Capacidad es requerido y debe ser mayor a 0 "),V())}function V4(t,e){t&1&&(U(0,"div",19),J(1," El pais es requerido "),V())}function U4(t,e){t&1&&(U(0,"div",19),J(1," Unidad propia es requerido "),V())}var FM=(()=>{let e=class e{constructor(){this.formBuilder=M(qh),this.entityservice=M(OM)}ngOnInit(){this.entityForm=this.formBuilder.group({countryFlag:["",Ft.required],dni:["",Ft.required],name:["",Ft.required],age:[0,[Ft.required,Ft.min(18),Ft.max(80)]],quantity:[0,[Ft.required,Ft.min(1)]],country:["",Ft.required],hasCar:[!1]})}get formControls(){return this.entityForm.controls}handleSelectCountry(r){console.log(r),this.formControls.country.setValue(r.name),this.formControls.countryFlag.setValue(r.flag)}submit(){if(this.entityForm.valid){console.log(this.entityForm.value);try{this.entityservice.create(this.entityForm.value),this.entityForm.reset()}catch{console.log("Ocurrio un error")}}else this.entityForm.markAllAsTouched()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-create"]],standalone:!0,features:[et],decls:39,vars:8,consts:[[1,"screen"],[2,"display","flex","gap","30px"],[3,"submit","formGroup"],["type","hidden","formControlName","countryFlag"],[1,"column"],["for","name"],["type","number","formControlName","dni"],["class","error",4,"ngIf"],["type","text","formControlName","name"],["for","age"],["type","number","formControlName","age"],["for","quantity"],["type","number","formControlName","quantity"],["for","country"],["type","text","formControlName","country",3,"readOnly"],["for","hasCar"],["type","checkbox","formControlName","hasCar"],["type","submit"],[3,"onCountrySelect"],[1,"error"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"h1"),J(2,"Agregar repartidor"),V(),U(3,"div",1)(4,"form",2),Ke("submit",function(){return s.submit()}),Ve(5,"input",3),U(6,"div",4)(7,"label",5),J(8,"DNI:"),V(),Ve(9,"input",6),je(10,O4,2,0,"div",7),V(),U(11,"div",4)(12,"label",5),J(13,"Nombre:"),V(),Ve(14,"input",8),je(15,k4,2,0,"div",7),V(),U(16,"div",4)(17,"label",9),J(18,"Edad:"),V(),Ve(19,"input",10),je(20,F4,2,0,"div",7),V(),U(21,"div",4)(22,"label",11),J(23,"Capacidad de transporte:"),V(),Ve(24,"input",12),je(25,L4,2,0,"div",7),V(),U(26,"div",4)(27,"label",13),J(28,"Pais de origen:"),V(),Ve(29,"input",14),je(30,V4,2,0,"div",7),V(),U(31,"div")(32,"label",15),J(33,"Unidad propia:"),V(),Ve(34,"input",16),je(35,U4,2,0,"div",7),V(),U(36,"button",17),J(37,"Agregar"),V()(),U(38,"countries-table",18),Ke("onCountrySelect",function(a){return s.handleSelectCountry(a)}),V()()()),i&2&&(ue(4),De("formGroup",s.entityForm),ue(6),De("ngIf",s.formControls.dni.touched&&s.formControls.dni.invalid),ue(5),De("ngIf",s.formControls.name.touched&&s.formControls.name.invalid),ue(5),De("ngIf",s.formControls.age.touched&&s.formControls.age.invalid),ue(5),De("ngIf",s.formControls.quantity.touched&&s.formControls.quantity.invalid),ue(4),De("readOnly",!0),ue(),De("ngIf",s.formControls.country.touched&&s.formControls.country.invalid),ue(5),De("ngIf",s.formControls.hasCar.touched&&s.formControls.hasCar.invalid))},dependencies:[Hh,$h,Fo,Tv,_v,Vh,Uh,Gc,zc,Qt,cn,kM]});let t=e;return t})();var mp=()=>{let t=M(Xt),e=localStorage.getItem("loggedUser");return e||t.navigateByUrl(""),!!e};function j4(t,e){if(t&1){let n=Gd();U(0,"tr",3),Ke("click",function(){let i=bd(n).$implicit,s=Kt(2);return Sd(s.handleSelect(i))}),U(1,"td"),J(2),V()()}if(t&2){let n=e.$implicit;ue(2),zi(n.name)}}function B4(t,e){if(t&1&&(yr(0),U(1,"table")(2,"tr")(3,"th"),J(4,"Nombre"),V()(),je(5,j4,3,1,"tr",2),V(),vr()),t&2){let n=Kt();ue(5),De("ngForOf",n.entityData)}}function $4(t,e){t&1&&(U(0,"div"),J(1," Cargando... "),V())}var LM=(()=>{let e=class e{constructor(){this._firestore=M(Sn),this.onUserSelect=new Xe,this.entityData=[]}handleSelect(r){this.onUserSelect.emit(r)}ngOnInit(){let r=pa(this._firestore,"collection");pp(r).subscribe({next:s=>{console.log("DDD",s),this.entityData=s}})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["user-table"]],outputs:{onUserSelect:"onUserSelect"},standalone:!0,features:[et],decls:3,vars:2,consts:[["loading",""],[4,"ngIf","ngIfElse"],[3,"click",4,"ngFor","ngForOf"],[3,"click"]],template:function(i,s){if(i&1&&je(0,B4,6,1,"ng-container",1)(1,$4,2,0,"ng-template",null,0,Wd),i&2){let o=zd(2);De("ngIf",s.entityData.length)("ngIfElse",o)}},dependencies:[Qt,Zd,cn]});let t=e;return t})();var VM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["user-detail"]],inputs:{name:"name",age:"age",country:"country",flag:"flag",dni:"dni",hasCar:"hasCar",quantity:"quantity"},standalone:!0,features:[et],decls:16,vars:7,consts:[[2,"display","flex","gap","10px"],[2,"display","flex","flex-direction","column","margin-top","15px","gap","8px"],["alt","",2,"height","200px","width","250px",3,"src"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"div",1)(2,"div"),J(3),V(),U(4,"div"),J(5),V(),U(6,"div"),J(7),V(),U(8,"div"),J(9),V(),U(10,"div"),J(11),V()(),U(12,"div"),Ve(13,"img",2),U(14,"div"),J(15),V()()()),i&2&&(ue(3),Cn(" Nombre: ",s.name," "),ue(2),Cn(" Edad: ",s.age," "),ue(2),Cn(" DNI: ",s.dni," "),ue(2),Cn(" Capacidad de carga: ",s.quantity," "),ue(2),Cn(" Unidad propia: ",s.hasCar?"SI":"NO"," "),ue(2),De("src",s.flag,Hi),ue(2),Cn("Pais: ",s.country,""))}});let t=e;return t})();function q4(t,e){if(t&1&&(yr(0),Ve(1,"user-detail",3),vr()),t&2){let n=Kt();ue(),De("name",n.selectedUserData.name)("age",n.selectedUserData.age)("country",n.selectedUserData.country)("dni",n.selectedUserData.dni)("quantity",n.selectedUserData.quantity)("flag",n.selectedUserData.countryFlag)}}var UM=(()=>{let e=class e{constructor(){this._firestore=M(Sn),this.entityData=[]}ngOnInit(){let r=pa(this._firestore,"collection");pp(r).subscribe({next:s=>{this.entityData=s}})}setSelectedUser(r){console.log("llegok",r),this.selectedUserData=r}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-list"]],standalone:!0,features:[et],decls:5,vars:1,consts:[[1,"screen"],[3,"onUserSelect"],[4,"ngIf"],[3,"name","age","country","dni","quantity","flag"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"h1"),J(2,"Listado de repartidores"),V(),U(3,"user-table",1),Ke("onUserSelect",function(a){return s.setSelectedUser(a)}),V(),je(4,q4,2,6,"ng-container",2),V()),i&2&&(ue(4),De("ngIf",s.selectedUserData))},dependencies:[Qt,cn,LM,VM]});let t=e;return t})();var jM=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-home"]],standalone:!0,features:[et],decls:8,vars:0,consts:[[1,"screen"],[1,"column",2,"display","flex","flex-direction","column","gap","15px","margin-top","20px"],["routerLink","/create"],["routerLink","/list"]],template:function(i,s){i&1&&(U(0,"div",0)(1,"h1"),J(2,"Inicio"),V(),U(3,"div",1)(4,"button",2),J(5,"Alta de repartidor"),V(),U(6,"button",3),J(7,"Listado de repartidores"),V()()())},dependencies:[Ah,Sh]});let t=e;return t})();var BM=[{path:"",component:jR},{path:"login",component:UR},{path:"home",component:jM,canActivate:[mp]},{path:"create",component:FM,canActivate:[mp]},{path:"list",component:UM,canActivate:[mp]}];var $M="@firebase/database",qM="1.0.5";var FE="";function H4(t){FE=t}var zI=class{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),at(n))}get(e){let n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Lo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}};var WI=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return zn(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}};var Ix=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){let e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new zI(e)}}catch{}return new WI},Ds=Ix("localStorage"),KI=Ix("sessionStorage");var va=new Wn("@firebase/database"),G4=function(){let t=1;return function(){return t++}}(),Ex=function(t){let e=TA(t),n=new Gh;n.update(e);let r=n.digest();return zh.encodeByteArray(r)},Hu=function(...t){let e="";for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=Hu.apply(null,r):typeof r=="object"?e+=at(r):e+=r,e+=" "}return e},bs=null,HM=!0,z4=function(t,e){F(!e||t===!0||t===!1,"Can't turn on custom loggers persistently."),t===!0?(va.logLevel=le.VERBOSE,bs=va.log.bind(va),e&&KI.set("logging_enabled",!0)):typeof t=="function"?bs=t:(bs=null,KI.remove("logging_enabled"))},At=function(...t){if(HM===!0&&(HM=!1,bs===null&&KI.get("logging_enabled")===!0&&z4(!0)),bs){let e=Hu.apply(null,t);bs(e)}},Gu=function(t){return function(...e){At(t,...e)}},QI=function(...t){let e="FIREBASE INTERNAL ERROR: "+Hu(...t);va.error(e)},Or=function(...t){let e=`FIREBASE FATAL ERROR: ${Hu(...t)}`;throw va.error(e),new Error(e)},tn=function(...t){let e="FIREBASE WARNING: "+Hu(...t);va.warn(e)},W4=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Cx=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},K4=function(t){if(Gn()||document.readyState==="complete")t();else{let e=!1,n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},wa="[MIN_NAME]",Ss="[MAX_NAME]",Sa=function(t,e){if(t===e)return 0;if(t===wa||e===Ss)return-1;if(e===wa||t===Ss)return 1;{let n=GM(t),r=GM(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Q4=function(t,e){return t===e?0:t<e?-1:1},xu=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+at(e))},LE=function(t){if(typeof t!="object"||t===null)return at(t);let e=[];for(let r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=at(e[r]),n+=":",n+=LE(t[e[r]]);return n+="}",n},Tx=function(t,e){let n=t.length;if(n<=e)return[t];let r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function pn(t,e){for(let n in t)t.hasOwnProperty(n)&&e(n,t[n])}var Dx=function(t){F(!Cx(t),"Invalid JSON number");let e=11,n=52,r=(1<<e-1)-1,i,s,o,a,u;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(a=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=a+r,o=Math.round(t*Math.pow(2,n-a)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));let l=[];for(u=n;u;u-=1)l.push(o%2?1:0),o=Math.floor(o/2);for(u=e;u;u-=1)l.push(s%2?1:0),s=Math.floor(s/2);l.push(i?1:0),l.reverse();let h=l.join(""),p="";for(u=0;u<64;u+=8){let m=parseInt(h.substr(u,8),2).toString(16);m.length===1&&(m="0"+m),p=p+m}return p.toLowerCase()},Y4=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},J4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};var X4=new RegExp("^-?(0*)\\d{1,10}$"),Z4=-2147483648,eW=2147483647,GM=function(t){if(X4.test(t)){let e=Number(t);if(e>=Z4&&e<=eW)return e}return null},zu=function(t){try{t()}catch(e){setTimeout(()=>{let n=e.stack||"";throw tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},tW=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Lu=function(t,e){let n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};var YI=class{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n?.getImmediate({optional:!0}),this.appCheck||n?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){tn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var JI=class{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(At("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tn(e)}},Vu=(()=>{class t{constructor(n){this.accessToken=n}getToken(n){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(n){n(this.accessToken)}removeTokenChangeListener(n){}notifyForInvalidToken(){}}t.OWNER="owner";return t})(),yp="5",bx="v",Sx="s",Ax="r",Rx="f",Nx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Mx="ls",xx="p",XI="ac",Px="websocket",Ox="long_polling";var vp=class{constructor(e,n,r,i,s=!1,o="",a=!1,u=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=u,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ds.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ds.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){let e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}};function nW(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function kx(t,e,n){F(typeof e=="string","typeof type must == string"),F(typeof n=="object","typeof params must == object");let r;if(e===Px)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===Ox)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);nW(t)&&(n.ns=t.namespace);let i=[];return pn(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}var ZI=class{constructor(){this.counters_={}}incrementCounter(e,n=1){zn(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return fA(this.counters_)}};var UI={},jI={};function VE(t){let e=t.toString();return UI[e]||(UI[e]=new ZI),UI[e]}function rW(t,e){let n=t.toString();return jI[n]||(jI[n]=e()),jI[n]}var eE=class{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){let r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&zu(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var zM="start",iW="close",sW="pLPCommand",oW="pRTLPCB",Fx="id",Lx="pw",Vx="ser",aW="cb",cW="seg",uW="ts",lW="d",dW="dframe",Ux=1870,jx=30,hW=Ux-jx,fW=25e3,pW=3e4,tE=class t{constructor(e,n,r,i,s,o,a){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Gu(e),this.stats_=VE(n),this.urlFn=u=>(this.appCheckToken&&(u[XI]=this.appCheckToken),kx(n,Ox,u))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new eE(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(pW)),K4(()=>{if(this.isClosed_)return;this.scriptTagHolder=new nE((...s)=>{let[o,a,u,l,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===zM)this.id=a,this.password=u;else if(o===iW)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let r={};r[zM]="t",r[Vx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[aW]=this.scriptTagHolder.uniqueCallbackIdentifier),r[bx]=yp,this.transportSessionId&&(r[Sx]=this.transportSessionId),this.lastSessionId&&(r[Mx]=this.lastSessionId),this.applicationId&&(r[xx]=this.applicationId),this.appCheckToken&&(r[XI]=this.appCheckToken),typeof location<"u"&&location.hostname&&Nx.test(location.hostname)&&(r[Ax]=Rx);let i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){t.forceAllow_=!0}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){return Gn()?!1:t.forceAllow_?!0:!t.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!Y4()&&!J4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){let n=at(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=Rv(n),i=Tx(r,hW);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){if(Gn())return;this.myDisconnFrame=document.createElement("iframe");let r={};r[dW]="t",r[Fx]=e,r[Lx]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){let n=at(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}},nE=class t{constructor(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,Gn())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=G4(),window[sW+this.uniqueCallbackIdentifier]=e,window[oW+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){At("frame writing exception"),a.stack&&At(a.stack),At(a)}}}static createIFrame_(){let e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||At("No IE domain setting required")}catch{let r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let e={};e[Fx]=this.myID,e[Lx]=this.myPW,e[Vx]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+jx+r.length<=Ux;){let o=this.pendingSegs.shift();r=r+"&"+cW+i+"="+o.seg+"&"+uW+i+"="+o.ts+"&"+lW+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);let r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(fW)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){Gn()?this.doNodeLongPoll(e,n):setTimeout(()=>{try{if(!this.sendNewPolls)return;let r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){let i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{At("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}};var mW=16384,gW=45e3,_p=null;typeof MozWebSocket<"u"?_p=MozWebSocket:typeof WebSocket<"u"&&(_p=WebSocket);var Pu=(()=>{class t{constructor(n,r,i,s,o,a,u){this.connId=n,this.applicationId=i,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Gu(this.connId),this.stats_=VE(r),this.connURL=t.connectionURL_(r,a,u,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(n,r,i,s,o){let a={};return a[bx]=yp,!Gn()&&typeof location<"u"&&location.hostname&&Nx.test(location.hostname)&&(a[Ax]=Rx),r&&(a[Sx]=r),i&&(a[Mx]=i),s&&(a[XI]=s),o&&(a[xx]=o),kx(n,Px,a)}open(n,r){this.onDisconnect=r,this.onMessage=n,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ds.set("previous_websocket_failure",!0);try{let i;if(Gn()){let s=this.nodeAdmin?"AdminNode":"Node";i={headers:{"User-Agent":`Firebase/${yp}/${FE}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a})}this.mySock=new _p(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");let s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){t.forceDisallow_=!0}static isAvailable(){let n=!1;if(typeof navigator<"u"&&navigator.userAgent){let r=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(r);i&&i.length>1&&parseFloat(i[1])<4.4&&(n=!0)}return!n&&_p!==null&&!t.forceDisallow_}static previouslyFailed(){return Ds.isInMemoryStorage||Ds.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ds.remove("previous_websocket_failure")}appendFrame_(n){if(this.frames.push(n),this.frames.length===this.totalFrames){let r=this.frames.join("");this.frames=null;let i=Lo(r);this.onMessage(i)}}handleNewFrameCount_(n){this.totalFrames=n,this.frames=[]}extractFrameCount_(n){if(F(this.frames===null,"We already have a frame buffer"),n.length<=6){let r=Number(n);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),n}handleIncomingFrame(n){if(this.mySock===null)return;let r=n.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(r);else{let i=this.extractFrameCount_(r);i!==null&&this.appendFrame_(i)}}send(n){this.resetKeepAlive();let r=at(n);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);let i=Tx(r,mW);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(gW))}sendString_(n){try{this.mySock.send(n)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4;return t})(),yW=(()=>{class t{constructor(n){this.initTransports_(n)}static get ALL_TRANSPORTS(){return[tE,Pu]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(n){let r=Pu&&Pu.isAvailable(),i=r&&!Pu.previouslyFailed();if(n.webSocketOnly&&(r||tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Pu];else{let s=this.transports_=[];for(let o of t.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);t.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}t.globalTransportInitialized_=!1;return t})(),vW=6e4,_W=5e3,wW=10*1024,IW=100*1024,BI="t",WM="d",EW="s",KM="r",CW="e",QM="o",YM="a",JM="n",XM="p",TW="h",rE=class{constructor(e,n,r,i,s,o,a,u,l,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=u,this.onKill_=l,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Gu("c:"+this.id+":"),this.transportManager_=new yW(n),this.log_("Connection created"),this.start_()}start_(){let e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));let i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=Lu(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>IW?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>wW?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){let n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(BI in e){let n=e[BI];n===YM?this.upgradeIfSecondaryHealthy_():n===KM?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===QM&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){let n=xu("t",e),r=xu("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:XM,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:YM,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:JM,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){let n=xu("t",e),r=xu("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){let n=xu(BI,e);if(WM in e){let r=e[WM];if(n===TW){let i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===JM){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===EW?this.onConnectionShutdown_(r):n===KM?this.onReset_(r):n===CW?QI("Server Error: "+r):n===QM?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):QI("Unknown control packet command: "+n)}}onHandshake_(e){let n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),yp!==r&&tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;let n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Lu(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(vW))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Lu(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(_W))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:XM,d:{}}}))}onSecondaryConnectionLost_(){let e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ds.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var wp=class{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}};var Ip=class{constructor(e){this.allowedEvents_=e,this.listeners_={},F(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){let r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});let i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);let i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){F(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}};var Ep=class t extends Ip{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Qc()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new t}getInitialEvent(e){return F(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}};var ZM=32,ex=768,Me=class{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}};function Ae(){return new Me("")}function _e(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ci(t){return t.pieces_.length-t.pieceNum_}function Fe(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Me(t.pieces_,e)}function Bx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function DW(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function $x(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function qx(t){if(t.pieceNum_>=t.pieces_.length)return null;let e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Me(e,0)}function lt(t,e){let n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof Me)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{let r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new Me(n,0)}function me(t){return t.pieceNum_>=t.pieces_.length}function hn(t,e){let n=_e(t),r=_e(e);if(n===null)return e;if(n===r)return hn(Fe(t),Fe(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Hx(t,e){if(Ci(t)!==Ci(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Rn(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(Ci(t)>Ci(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var iE=class{constructor(e,n){this.errorPrefix_=n,this.parts_=$x(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xc(this.parts_[r]);Gx(this)}};function bW(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xc(e),Gx(t)}function SW(t){let e=t.parts_.pop();t.byteLength_-=Xc(e),t.parts_.length>0&&(t.byteLength_-=1)}function Gx(t){if(t.byteLength_>ex)throw new Error(t.errorPrefix_+"has a key path longer than "+ex+" bytes ("+t.byteLength_+").");if(t.parts_.length>ZM)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+ZM+") or object contains a cycle "+Ts(t))}function Ts(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}var sE=class t extends Ip{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{let r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new t}getInitialEvent(e){return F(e==="visible","Unknown event type: "+e),[this.visible_]}};var Ou=1e3,AW=60*5*1e3,tx=30*1e3,RW=1.3,NW=3e4,MW="server_kill",nx=3,UE=(()=>{class t extends wp{constructor(n,r,i,s,o,a,u,l){if(super(),this.repoInfo_=n,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=u,this.authOverride_=l,this.id=t.nextPersistentConnectionId_++,this.log_=Gu("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ou,this.maxReconnectDelay_=AW,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!Gn())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");sE.getInstance().on("visible",this.onVisible_,this),n.host.indexOf("fblocal")===-1&&Ep.getInstance().on("online",this.onOnline_,this)}sendRequest(n,r,i){let s=++this.requestNumber_,o={r:s,a:n,b:r};this.log_(at(o)),F(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),i&&(this.requestCBHash_[s]=i)}get(n){this.initConnection_();let r=new Ji,s={action:"g",request:{p:n._path.toString(),q:n._queryObject},onComplete:a=>{let u=a.d;a.s==="ok"?r.resolve(u):r.reject(u)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),r.promise}listen(n,r,i,s){this.initConnection_();let o=n._queryIdentifier,a=n._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"listen() called for non-default but complete query"),F(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let u={onComplete:s,hashFn:r,query:n,tag:i};this.listens.get(a).set(o,u),this.connected_&&this.sendListen_(u)}sendGet_(n){let r=this.outstandingGets_[n];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[n],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(n){let r=n.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);let o={p:i},a="q";n.tag&&(o.q=r._queryObject,o.t=n.tag),o.h=n.hashFn(),this.sendRequest(a,o,u=>{let l=u.d,h=u.s;t.warnOnListenWarnings_(l,r),(this.listens.get(i)&&this.listens.get(i).get(s))===n&&(this.log_("listen response",u),h!=="ok"&&this.removeListen_(i,s),n.onComplete&&n.onComplete(h,l))})}static warnOnListenWarnings_(n,r){if(n&&typeof n=="object"&&zn(n,"w")){let i=Zi(n,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){let s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',o=r._path.toString();tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(n){this.authToken_=n,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(n)}reduceReconnectDelayIfAdminCredential_(n){(n&&n.length===40||IA(n))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=tx)}refreshAppCheckToken(n){this.appCheckToken_=n,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let n=this.authToken_,r=wA(n)?"auth":"gauth",i={cred:n};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{let o=s.s,a=s.d||"error";this.authToken_===n&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},n=>{let r=n.s,i=n.d||"error";r==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(n,r){let i=n._path.toString(),s=n._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),F(n._queryParams.isDefault()||!n._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,n._queryObject,r)}sendUnlisten_(n,r,i,s){this.log_("Unlisten on "+n+" for "+r);let o={p:n},a="n";s&&(o.q=i,o.t=s),this.sendRequest(a,o)}onDisconnectPut(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"o",data:r,onComplete:i})}onDisconnectMerge(n,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",n,r,i):this.onDisconnectRequestQueue_.push({pathString:n,action:"om",data:r,onComplete:i})}onDisconnectCancel(n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",n,null,r):this.onDisconnectRequestQueue_.push({pathString:n,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(n,r,i,s){let o={p:r,d:i};this.log_("onDisconnect "+n,o),this.sendRequest(n,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(n,r,i,s){this.putInternal("p",n,r,i,s)}merge(n,r,i,s){this.putInternal("m",n,r,i,s)}putInternal(n,r,i,s,o){this.initConnection_();let a={p:r,d:i};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:n,request:a,onComplete:s}),this.outstandingPutCount_++;let u=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(u):this.log_("Buffering put: "+r)}sendPut_(n){let r=this.outstandingPuts_[n].action,i=this.outstandingPuts_[n].request,s=this.outstandingPuts_[n].onComplete;this.outstandingPuts_[n].queued=this.connected_,this.sendRequest(r,i,o=>{this.log_(r+" response",o),delete this.outstandingPuts_[n],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(n){if(this.connected_){let r={c:n};this.log_("reportStats",r),this.sendRequest("s",r,i=>{if(i.s!=="ok"){let o=i.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(n){if("r"in n){this.log_("from server: "+at(n));let r=n.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(n.b))}else{if("error"in n)throw"A server-side error has occurred: "+n.error;"a"in n&&this.onDataPush_(n.a,n.b)}}onDataPush_(n,r){this.log_("handleServerMessage",n,r),n==="d"?this.onDataUpdate_(r.p,r.d,!1,r.t):n==="m"?this.onDataUpdate_(r.p,r.d,!0,r.t):n==="c"?this.onListenRevoked_(r.p,r.q):n==="ac"?this.onAuthRevoked_(r.s,r.d):n==="apc"?this.onAppCheckRevoked_(r.s,r.d):n==="sd"?this.onSecurityDebugPacket_(r):QI("Unrecognized action received from server: "+at(n)+`
Are you using the latest client?`)}onReady_(n,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(n),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(n){F(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(n))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(n){n&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ou,this.realtime_||this.scheduleConnect_(0)),this.visible_=n}onOnline_(n){n?(this.log_("Browser went online."),this.reconnectDelay_=Ou,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>NW&&(this.reconnectDelay_=Ou),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let n=new Date().getTime()-this.lastConnectionAttemptTime_,r=Math.max(0,this.reconnectDelay_-n);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RW)}this.onConnectStatus_(!1)}establishConnection_(){return I(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let n=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+t.nextConnectionId_++,o=this.lastSessionId,a=!1,u=null,l=function(){u?u.close():(a=!0,i())},h=function(m){F(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(m)};this.realtime_={close:l,sendRequest:h};let p=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[m,v]=yield Promise.all([this.authTokenProvider_.getToken(p),this.appCheckTokenProvider_.getToken(p)]);a?At("getToken() completed but was canceled"):(At("getToken() completed. Creating connection."),this.authToken_=m&&m.accessToken,this.appCheckToken_=v&&v.token,u=new rE(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,n,r,i,b=>{tn(b+" ("+this.repoInfo_.toString()+")"),this.interrupt(MW)},o))}catch(m){this.log_("Failed to get token: "+m),a||(this.repoInfo_.nodeAdmin&&tn(m),l())}}})}interrupt(n){At("Interrupting connection for reason: "+n),this.interruptReasons_[n]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(n){At("Resuming connection for reason: "+n),delete this.interruptReasons_[n],Yc(this.interruptReasons_)&&(this.reconnectDelay_=Ou,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(n){let r=n-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let n=0;n<this.outstandingPuts_.length;n++){let r=this.outstandingPuts_[n];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[n],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(n,r){let i;r?i=r.map(o=>LE(o)).join("$"):i="default";let s=this.removeListen_(n,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(n,r){let i=new Me(n).toString(),s;if(this.listens.has(i)){let o=this.listens.get(i);s=o.get(r),o.delete(r),o.size===0&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(n,r){At("Auth token revoked: "+n+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(n==="invalid_token"||n==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=nx&&(this.reconnectDelay_=tx,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(n,r){At("App check token revoked: "+n+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(n==="invalid_token"||n==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=nx&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(n){this.securityDebugCallback_?this.securityDebugCallback_(n):"msg"in n&&console.log("FIREBASE: "+n.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let n of this.listens.values())for(let r of n.values())this.sendListen_(r);for(let n=0;n<this.outstandingPuts_.length;n++)this.outstandingPuts_[n]&&this.sendPut_(n);for(;this.onDisconnectRequestQueue_.length;){let n=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(n.action,n.pathString,n.data,n.onComplete)}for(let n=0;n<this.outstandingGets_.length;n++)this.outstandingGets_[n]&&this.sendGet_(n)}sendConnectStats_(){let n={},r="js";Gn()&&(this.repoInfo_.nodeAdmin?r="admin_node":r="node"),n["sdk."+r+"."+FE.replace(/\./g,"-")]=1,Qc()?n["framework.cordova"]=1:Yh()&&(n["framework.reactnative"]=1),this.reportStats(n)}shouldReconnect_(){let n=Ep.getInstance().currentlyOnline();return Yc(this.interruptReasons_)&&n}}t.nextPersistentConnectionId_=0,t.nextConnectionId_=0;return t})(),we=class t{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new t(e,n)}};var Ia=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){let r=new we(wa,e),i=new we(wa,n);return this.compare(r,i)!==0}minPost(){return we.MIN}};var gp,Cp=class extends Ia{static get __EMPTY_NODE(){return gp}static set __EMPTY_NODE(e){gp=e}compare(e,n){return Sa(e.name,n.name)}isDefinedOn(e){throw Xi("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return we.MIN}maxPost(){return new we(Ss,gp)}makePost(e,n){return F(typeof e=="string","KeyIndex indexValue must always be a string."),new we(e,gp)}toString(){return".key"}},_a=new Cp;var ga=class{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}},An=(()=>{class t{constructor(n,r,i,s,o){this.key=n,this.value=r,this.color=i??t.RED,this.left=s??fn.EMPTY_NODE,this.right=o??fn.EMPTY_NODE}copy(n,r,i,s,o){return new t(n??this.key,r??this.value,i??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(n){return this.left.inorderTraversal(n)||!!n(this.key,this.value)||this.right.inorderTraversal(n)}reverseTraversal(n){return this.right.reverseTraversal(n)||n(this.key,this.value)||this.left.reverseTraversal(n)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(n,r,i){let s=this,o=i(n,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(n,r,i),null):o===0?s=s.copy(null,r,null,null,null):s=s.copy(null,null,null,null,s.right.insert(n,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return fn.EMPTY_NODE;let n=this;return!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.removeMin_(),null),n.fixUp_()}remove(n,r){let i,s;if(i=this,r(n,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(n,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),r(n,i.key)===0){if(i.right.isEmpty())return fn.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(n,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let n=this;return n.right.isRed_()&&!n.left.isRed_()&&(n=n.rotateLeft_()),n.left.isRed_()&&n.left.left.isRed_()&&(n=n.rotateRight_()),n.left.isRed_()&&n.right.isRed_()&&(n=n.colorFlip_()),n}moveRedLeft_(){let n=this.colorFlip_();return n.right.left.isRed_()&&(n=n.copy(null,null,null,null,n.right.rotateRight_()),n=n.rotateLeft_(),n=n.colorFlip_()),n}moveRedRight_(){let n=this.colorFlip_();return n.left.left.isRed_()&&(n=n.rotateRight_(),n=n.colorFlip_()),n}rotateLeft_(){let n=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,n,null)}rotateRight_(){let n=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,n)}colorFlip_(){let n=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,n,r)}checkMaxDepth_(){let n=this.check_();return Math.pow(2,n)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let n=this.left.check_();if(n!==this.right.check_())throw new Error("Black depths differ");return n+(this.isRed_()?0:1)}}return t.RED=!0,t.BLACK=!1,t})(),oE=class{copy(e,n,r,i,s){return this}insert(e,n,r){return new An(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},fn=class t{constructor(e,n=t.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,An.BLACK,null,null))}remove(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,An.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new ga(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new ga(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new ga(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new ga(this.root_,null,this.comparator_,!0,e)}};fn.EMPTY_NODE=new oE;function xW(t,e){return Sa(t.name,e.name)}function jE(t,e){return Sa(t,e)}var aE;function PW(t){aE=t}var zx=function(t){return typeof t=="number"?"number:"+Dx(t):"string:"+t},Wx=function(t){if(t.isLeafNode()){let e=t.val();F(typeof e=="string"||typeof e=="number"||typeof e=="object"&&zn(e,".sv"),"Priority must be a string or number.")}else F(t===aE||t.isEmpty(),"priority of unexpected type.");F(t===aE||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var rx,Ea=(()=>{class t{constructor(n,r=t.__childrenNodeConstructor.EMPTY_NODE){this.value_=n,this.priorityNode_=r,this.lazyHash_=null,F(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Wx(this.priorityNode_)}static set __childrenNodeConstructor(n){rx=n}static get __childrenNodeConstructor(){return rx}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(n){return new t(this.value_,n)}getImmediateChild(n){return n===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}getChild(n){return me(n)?this:_e(n)===".priority"?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(n,r){return null}updateImmediateChild(n,r){return n===".priority"?this.updatePriority(r):r.isEmpty()&&n!==".priority"?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(n,r).updatePriority(this.priorityNode_)}updateChild(n,r){let i=_e(n);return i===null?r:r.isEmpty()&&i!==".priority"?this:(F(i!==".priority"||Ci(n)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Fe(n),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(n,r){return!1}val(n){return n&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let n="";this.priorityNode_.isEmpty()||(n+="priority:"+zx(this.priorityNode_.val())+":");let r=typeof this.value_;n+=r+":",r==="number"?n+=Dx(this.value_):n+=this.value_,this.lazyHash_=Ex(n)}return this.lazyHash_}getValue(){return this.value_}compareTo(n){return n===t.__childrenNodeConstructor.EMPTY_NODE?1:n instanceof t.__childrenNodeConstructor?-1:(F(n.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(n))}compareToLeafNode_(n){let r=typeof n.value_,i=typeof this.value_,s=t.VALUE_TYPE_ORDER.indexOf(r),o=t.VALUE_TYPE_ORDER.indexOf(i);return F(s>=0,"Unknown leaf type: "+r),F(o>=0,"Unknown leaf type: "+i),s===o?i==="object"?0:this.value_<n.value_?-1:this.value_===n.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(n){if(n===this)return!0;if(n.isLeafNode()){let r=n;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}else return!1}}t.VALUE_TYPE_ORDER=["object","boolean","number","string"];return t})(),Kx,Qx;function OW(t){Kx=t}function kW(t){Qx=t}var cE=class extends Ia{compare(e,n){let r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Sa(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return we.MIN}maxPost(){return new we(Ss,new Ea("[PRIORITY-POST]",Qx))}makePost(e,n){let r=Kx(e);return new we(n,new Ea("[PRIORITY-POST]",r))}toString(){return".priority"}},Nt=new cE;var FW=Math.log(2),uE=class{constructor(e){let n=s=>parseInt(Math.log(s)/FW,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;let i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){let e=!(this.bits_&1<<this.current_);return this.current_--,e}},Tp=function(t,e,n,r){t.sort(e);let i=function(u,l){let h=l-u,p,m;if(h===0)return null;if(h===1)return p=t[u],m=n?n(p):p,new An(m,p.node,An.BLACK,null,null);{let v=parseInt(h/2,10)+u,b=i(u,v),N=i(v+1,l);return p=t[v],m=n?n(p):p,new An(m,p.node,An.BLACK,b,N)}},s=function(u){let l=null,h=null,p=t.length,m=function(b,N){let R=p-b,P=p;p-=b;let q=i(R+1,P),H=t[R],W=n?n(H):H;v(new An(W,H.node,N,null,q))},v=function(b){l?(l.left=b,l=b):(h=b,l=b)};for(let b=0;b<u.count;++b){let N=u.nextBitIsOne(),R=Math.pow(2,u.count-(b+1));N?m(R,An.BLACK):(m(R,An.BLACK),m(R,An.RED))}return h},o=new uE(t.length),a=s(o);return new fn(r||e,a)};var $I,ma={},Ca=class t{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return F(ma&&Nt,"ChildrenNode.ts has not been loaded"),$I=$I||new t({".priority":ma},{".priority":Nt}),$I}get(e){let n=Zi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof fn?n:null}hasIndex(e){return zn(this.indexSet_,e.toString())}addIndex(e,n){F(e!==_a,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let r=[],i=!1,s=n.getIterator(we.Wrap),o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let a;i?a=Tp(r,e.getCompare()):a=ma;let u=e.toString(),l=Object.assign({},this.indexSet_);l[u]=e;let h=Object.assign({},this.indexes_);return h[u]=a,new t(h,l)}addToIndexes(e,n){let r=Jc(this.indexes_,(i,s)=>{let o=Zi(this.indexSet_,s);if(F(o,"Missing index implementation for "+s),i===ma)if(o.isDefinedOn(e.node)){let a=[],u=n.getIterator(we.Wrap),l=u.getNext();for(;l;)l.name!==e.name&&a.push(l),l=u.getNext();return a.push(e),Tp(a,o.getCompare())}else return ma;else{let a=n.get(e.name),u=i;return a&&(u=u.remove(new we(e.name,a))),u.insert(e,e.node)}});return new t(r,this.indexSet_)}removeFromIndexes(e,n){let r=Jc(this.indexes_,i=>{if(i===ma)return i;{let s=n.get(e.name);return s?i.remove(new we(e.name,s)):i}});return new t(r,this.indexSet_)}};var ku,Be=(()=>{class t{constructor(n,r,i){this.children_=n,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&Wx(this.priorityNode_),this.children_.isEmpty()&&F(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ku||(ku=new t(new fn(jE),null,Ca.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ku}updatePriority(n){return this.children_.isEmpty()?this:new t(this.children_,n,this.indexMap_)}getImmediateChild(n){if(n===".priority")return this.getPriority();{let r=this.children_.get(n);return r===null?ku:r}}getChild(n){let r=_e(n);return r===null?this:this.getImmediateChild(r).getChild(Fe(n))}hasChild(n){return this.children_.get(n)!==null}updateImmediateChild(n,r){if(F(r,"We should always be passing snapshot nodes"),n===".priority")return this.updatePriority(r);{let i=new we(n,r),s,o;r.isEmpty()?(s=this.children_.remove(n),o=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(n,r),o=this.indexMap_.addToIndexes(i,this.children_));let a=s.isEmpty()?ku:this.priorityNode_;return new t(s,a,o)}}updateChild(n,r){let i=_e(n);if(i===null)return r;{F(_e(n)!==".priority"||Ci(n)===1,".priority must be the last token in a path");let s=this.getImmediateChild(i).updateChild(Fe(n),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(n){if(this.isEmpty())return null;let r={},i=0,s=0,o=!0;if(this.forEachChild(Nt,(a,u)=>{r[a]=u.val(n),i++,o&&t.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!n&&o&&s<2*i){let a=[];for(let u in r)a[u]=r[u];return a}else return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(this.lazyHash_===null){let n="";this.getPriority().isEmpty()||(n+="priority:"+zx(this.getPriority().val())+":"),this.forEachChild(Nt,(r,i)=>{let s=i.hash();s!==""&&(n+=":"+r+":"+s)}),this.lazyHash_=n===""?"":Ex(n)}return this.lazyHash_}getPredecessorChildName(n,r,i){let s=this.resolveIndex_(i);if(s){let o=s.getPredecessorKey(new we(n,r));return o?o.name:null}else return this.children_.getPredecessorKey(n)}getFirstChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(n){let r=this.getFirstChildName(n);return r?new we(r,this.children_.get(r)):null}getLastChildName(n){let r=this.resolveIndex_(n);if(r){let i=r.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(n){let r=this.getLastChildName(n);return r?new we(r,this.children_.get(r)):null}forEachChild(n,r){let i=this.resolveIndex_(n);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(n){return this.getIteratorFrom(n.minPost(),n)}getIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(n,s=>s);{let s=this.children_.getIteratorFrom(n.name,we.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(n){return this.getReverseIteratorFrom(n.maxPost(),n)}getReverseIteratorFrom(n,r){let i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(n,s=>s);{let s=this.children_.getReverseIteratorFrom(n.name,we.Wrap),o=s.peek();for(;o!=null&&r.compare(o,n)>0;)s.getNext(),o=s.peek();return s}}compareTo(n){return this.isEmpty()?n.isEmpty()?0:-1:n.isLeafNode()||n.isEmpty()?1:n===Wu?-1:0}withIndex(n){if(n===_a||this.indexMap_.hasIndex(n))return this;{let r=this.indexMap_.addIndex(n,this.children_);return new t(this.children_,this.priorityNode_,r)}}isIndexed(n){return n===_a||this.indexMap_.hasIndex(n)}equals(n){if(n===this)return!0;if(n.isLeafNode())return!1;{let r=n;if(this.getPriority().equals(r.getPriority()))if(this.children_.count()===r.children_.count()){let i=this.getIterator(Nt),s=r.getIterator(Nt),o=i.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=i.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(n){return n===_a?null:this.indexMap_.get(n.toString())}}return t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t})(),lE=class extends Be{constructor(){super(new fn(jE),Be.EMPTY_NODE,Ca.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Be.EMPTY_NODE}isEmpty(){return!1}},Wu=new lE;Object.defineProperties(we,{MIN:{value:new we(wa,Be.EMPTY_NODE)},MAX:{value:new we(Ss,Wu)}});Cp.__EMPTY_NODE=Be.EMPTY_NODE;Ea.__childrenNodeConstructor=Be;PW(Wu);kW(Wu);var LW=!0;function Rt(t,e=null){if(t===null)return Be.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),F(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){let n=t;return new Ea(n,Rt(e))}if(!(t instanceof Array)&&LW){let n=[],r=!1;if(pn(t,(o,a)=>{if(o.substring(0,1)!=="."){let u=Rt(a);u.isEmpty()||(r=r||!u.getPriority().isEmpty(),n.push(new we(o,u)))}}),n.length===0)return Be.EMPTY_NODE;let s=Tp(n,xW,o=>o.name,jE);if(r){let o=Tp(n,Nt.getCompare());return new Be(s,Rt(e),new Ca({".priority":o},{".priority":Nt}))}else return new Be(s,Rt(e),Ca.Default)}else{let n=Be.EMPTY_NODE;return pn(t,(r,i)=>{if(zn(t,r)&&r.substring(0,1)!=="."){let s=Rt(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(Rt(e))}}OW(Rt);var dE=class extends Ia{constructor(e){super(),this.indexPath_=e,F(!me(e)&&_e(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){let r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Sa(e.name,n.name):s}makePost(e,n){let r=Rt(e),i=Be.EMPTY_NODE.updateChild(this.indexPath_,r);return new we(n,i)}maxPost(){let e=Be.EMPTY_NODE.updateChild(this.indexPath_,Wu);return new we(Ss,e)}toString(){return $x(this.indexPath_,0).join("/")}};var hE=class extends Ia{compare(e,n){let r=e.node.compareTo(n.node);return r===0?Sa(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return we.MIN}maxPost(){return we.MAX}makePost(e,n){let r=Rt(e);return new we(n,r)}toString(){return".value"}},VW=new hE;function UW(t){return{type:"value",snapshotNode:t}}function jW(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function BW(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ix(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function $W(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}var fE=class t{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return F(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return F(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:wa}hasEnd(){return this.endSet_}getIndexEndValue(){return F(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return F(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ss}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return F(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Nt}copy(){let e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}};function sx(t){let e={};if(t.isDefault())return e;let n;if(t.index_===Nt?n="$priority":t.index_===VW?n="$value":t.index_===_a?n="$key":(F(t.index_ instanceof dE,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=at(n),t.startSet_){let r=t.startAfterSet_?"startAfter":"startAt";e[r]=at(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+at(t.indexStartName_))}if(t.endSet_){let r=t.endBeforeSet_?"endBefore":"endAt";e[r]=at(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+at(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function ox(t){let e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==Nt&&(e.i=t.index_.toString()),e}var pE=class t extends wp{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=Gu("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(F(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){let s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);let o=t.getListenId_(e,r),a={};this.listens_[o]=a;let u=sx(e._queryParams);this.restRequest_(s+".json",u,(l,h)=>{let p=h;if(l===404&&(p=null,l=null),l===null&&this.onDataUpdate_(s,p,!1,r),Zi(this.listens_,o)===a){let m;l?l===401?m="permission_denied":m="rest_error:"+l:m="ok",i(m,null)}})}unlisten(e,n){let r=t.getListenId_(e,n);delete this.listens_[r]}get(e){let n=sx(e._queryParams),r=e._path.toString(),i=new Ji;return this.restRequest_(r+".json",n,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+ts(n);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(r&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let u=null;if(a.status>=200&&a.status<300){try{u=Lo(a.responseText)}catch{tn("Failed to parse JSON response for "+o+": "+a.responseText)}r(null,u)}else a.status!==401&&a.status!==404&&tn("Got unsuccessful REST response for "+o+" Status: "+a.status),r(a.status);r=null}},a.open("GET",o,!0),a.send()})}};var mE=class{constructor(){this.rootNode_=Be.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}};function Dp(){return{value:null,children:new Map}}function Yx(t,e,n){if(me(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{let r=_e(e);t.children.has(r)||t.children.set(r,Dp());let i=t.children.get(r);e=Fe(e),Yx(i,e,n)}}function gE(t,e,n){t.value!==null?n(e,t.value):qW(t,(r,i)=>{let s=new Me(e.toString()+"/"+r);gE(i,s,n)})}function qW(t,e){t.children.forEach((n,r)=>{e(r,n)})}var yE=class{constructor(e){this.collection_=e,this.last_=null}get(){let e=this.collection_.get(),n=Object.assign({},e);return this.last_&&pn(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}};var ax=10*1e3,HW=30*1e3,GW=5*60*1e3,vE=class{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new yE(e);let r=ax+(HW-ax)*Math.random();Lu(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){let e=this.statsListener_.get(),n={},r=!1;pn(e,(i,s)=>{s>0&&zn(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),Lu(this.reportStats_.bind(this),Math.floor(Math.random()*2*GW))}};var Pr=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}(Pr||{});function Jx(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Xx(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Zx(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var _E=class t{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=Pr.ACK_USER_WRITE,this.source=Jx()}operationForChild(e){if(me(this.path)){if(this.affectedTree.value!=null)return F(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let n=this.affectedTree.subtree(new Me(e));return new t(Ae(),n,this.revert)}}else return F(_e(this.path)===e,"operationForChild called for unrelated child."),new t(Fe(this.path),this.affectedTree,this.revert)}};var Ta=class t{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=Pr.OVERWRITE}operationForChild(e){return me(this.path)?new t(this.source,Ae(),this.snap.getImmediateChild(e)):new t(this.source,Fe(this.path),this.snap)}};var bp=class t{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=Pr.MERGE}operationForChild(e){if(me(this.path)){let n=this.children.subtree(new Me(e));return n.isEmpty()?null:n.value?new Ta(this.source,Ae(),n.value):new t(this.source,Ae(),n)}else return F(_e(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Bu=class{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(me(e))return this.isFullyInitialized()&&!this.filtered_;let n=_e(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}};function zW(t,e,n,r){let i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push($W(o.childName,o.snapshotNode))}),Fu(t,i,"child_removed",e,r,n),Fu(t,i,"child_added",e,r,n),Fu(t,i,"child_moved",s,r,n),Fu(t,i,"child_changed",e,r,n),Fu(t,i,"value",e,r,n),i}function Fu(t,e,n,r,i,s){let o=r.filter(a=>a.type===n);o.sort((a,u)=>KW(t,a,u)),o.forEach(a=>{let u=WW(t,a,s);i.forEach(l=>{l.respondsTo(a.type)&&e.push(l.createEvent(u,t.query_))})})}function WW(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function KW(t,e,n){if(e.childName==null||n.childName==null)throw Xi("Should only compare child_ events.");let r=new we(e.childName,e.snapshotNode),i=new we(n.childName,n.snapshotNode);return t.index_.compare(r,i)}function eP(t,e){return{eventCache:t,serverCache:e}}function Uu(t,e,n,r){return eP(new Bu(e,n,r),t.serverCache)}function tP(t,e,n,r){return eP(t.eventCache,new Bu(e,n,r))}function wE(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function As(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var qI,QW=()=>(qI||(qI=new fn(Q4)),qI),qt=class t{constructor(e,n=QW()){this.value=e,this.children=n}static fromObject(e){let n=new t(null);return pn(e,(r,i)=>{n=n.set(new Me(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:Ae(),value:this.value};if(me(e))return null;{let r=_e(e),i=this.children.get(r);if(i!==null){let s=i.findRootMostMatchingPathAndValue(Fe(e),n);return s!=null?{path:lt(new Me(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(me(e))return this;{let n=_e(e),r=this.children.get(n);return r!==null?r.subtree(Fe(e)):new t(null)}}set(e,n){if(me(e))return new t(n,this.children);{let r=_e(e),s=(this.children.get(r)||new t(null)).set(Fe(e),n),o=this.children.insert(r,s);return new t(this.value,o)}}remove(e){if(me(e))return this.children.isEmpty()?new t(null):new t(null,this.children);{let n=_e(e),r=this.children.get(n);if(r){let i=r.remove(Fe(e)),s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new t(null):new t(this.value,s)}else return this}}get(e){if(me(e))return this.value;{let n=_e(e),r=this.children.get(n);return r?r.get(Fe(e)):null}}setTree(e,n){if(me(e))return n;{let r=_e(e),s=(this.children.get(r)||new t(null)).setTree(Fe(e),n),o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new t(this.value,o)}}fold(e){return this.fold_(Ae(),e)}fold_(e,n){let r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(lt(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,Ae(),n)}findOnPath_(e,n,r){let i=this.value?r(n,this.value):!1;if(i)return i;if(me(e))return null;{let s=_e(e),o=this.children.get(s);return o?o.findOnPath_(Fe(e),lt(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,Ae(),n)}foreachOnPath_(e,n,r){if(me(e))return this;{this.value&&r(n,this.value);let i=_e(e),s=this.children.get(i);return s?s.foreachOnPath_(Fe(e),lt(n,i),r):new t(null)}}foreach(e){this.foreach_(Ae(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(lt(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}};var Nn=class t{constructor(e){this.writeTree_=e}static empty(){return new t(new qt(null))}};function ju(t,e,n){if(me(e))return new Nn(new qt(n));{let r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){let i=r.path,s=r.value,o=hn(i,e);return s=s.updateChild(o,n),new Nn(t.writeTree_.set(i,s))}else{let i=new qt(n),s=t.writeTree_.setTree(e,i);return new Nn(s)}}}function cx(t,e,n){let r=t;return pn(n,(i,s)=>{r=ju(r,lt(e,i),s)}),r}function ux(t,e){if(me(e))return Nn.empty();{let n=t.writeTree_.setTree(e,new qt(null));return new Nn(n)}}function IE(t,e){return Rs(t,e)!=null}function Rs(t,e){let n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(hn(n.path,e)):null}function lx(t){let e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(Nt,(r,i)=>{e.push(new we(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new we(r,i.value))}),e}function Ei(t,e){if(me(e))return t;{let n=Rs(t,e);return n!=null?new Nn(new qt(n)):new Nn(t.writeTree_.subtree(e))}}function EE(t){return t.writeTree_.isEmpty()}function Da(t,e){return nP(Ae(),t.writeTree_,e)}function nP(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(F(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=nP(lt(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(lt(t,".priority"),r)),n}}function rP(t,e){return cP(e,t)}function YW(t,e,n,r,i){F(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ju(t.visibleWrites,e,n)),t.lastWriteId=r}function JW(t,e){for(let n=0;n<t.allWrites.length;n++){let r=t.allWrites[n];if(r.writeId===e)return r}return null}function XW(t,e){let n=t.allWrites.findIndex(a=>a.writeId===e);F(n>=0,"removeWrite called with nonexistent writeId.");let r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){let a=t.allWrites[o];a.visible&&(o>=n&&ZW(a,r.path)?i=!1:Rn(r.path,a.path)&&(s=!0)),o--}if(i){if(s)return e3(t),!0;if(r.snap)t.visibleWrites=ux(t.visibleWrites,r.path);else{let a=r.children;pn(a,u=>{t.visibleWrites=ux(t.visibleWrites,lt(r.path,u))})}return!0}else return!1}function ZW(t,e){if(t.snap)return Rn(t.path,e);for(let n in t.children)if(t.children.hasOwnProperty(n)&&Rn(lt(t.path,n),e))return!0;return!1}function e3(t){t.visibleWrites=iP(t.allWrites,t3,Ae()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function t3(t){return t.visible}function iP(t,e,n){let r=Nn.empty();for(let i=0;i<t.length;++i){let s=t[i];if(e(s)){let o=s.path,a;if(s.snap)Rn(n,o)?(a=hn(n,o),r=ju(r,a,s.snap)):Rn(o,n)&&(a=hn(o,n),r=ju(r,Ae(),s.snap.getChild(a)));else if(s.children){if(Rn(n,o))a=hn(n,o),r=cx(r,a,s.children);else if(Rn(o,n))if(a=hn(o,n),me(a))r=cx(r,Ae(),s.children);else{let u=Zi(s.children,_e(a));if(u){let l=u.getChild(Fe(a));r=ju(r,Ae(),l)}}}else throw Xi("WriteRecord should have .snap or .children")}}return r}function sP(t,e,n,r,i){if(!r&&!i){let s=Rs(t.visibleWrites,e);if(s!=null)return s;{let o=Ei(t.visibleWrites,e);if(EE(o))return n;if(n==null&&!IE(o,Ae()))return null;{let a=n||Be.EMPTY_NODE;return Da(o,a)}}}else{let s=Ei(t.visibleWrites,e);if(!i&&EE(s))return n;if(!i&&n==null&&!IE(s,Ae()))return null;{let o=function(l){return(l.visible||i)&&(!r||!~r.indexOf(l.writeId))&&(Rn(l.path,e)||Rn(e,l.path))},a=iP(t.allWrites,o,e),u=n||Be.EMPTY_NODE;return Da(a,u)}}}function n3(t,e,n){let r=Be.EMPTY_NODE,i=Rs(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Nt,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){let s=Ei(t.visibleWrites,e);return n.forEachChild(Nt,(o,a)=>{let u=Da(Ei(s,new Me(o)),a);r=r.updateImmediateChild(o,u)}),lx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{let s=Ei(t.visibleWrites,e);return lx(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function r3(t,e,n,r,i){F(r||i,"Either existingEventSnap or existingServerSnap must exist");let s=lt(e,n);if(IE(t.visibleWrites,s))return null;{let o=Ei(t.visibleWrites,s);return EE(o)?i.getChild(n):Da(o,i.getChild(n))}}function i3(t,e,n,r){let i=lt(e,n),s=Rs(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){let o=Ei(t.visibleWrites,i);return Da(o,r.getNode().getImmediateChild(n))}else return null}function s3(t,e){return Rs(t.visibleWrites,e)}function o3(t,e,n,r,i,s,o){let a,u=Ei(t.visibleWrites,e),l=Rs(u,Ae());if(l!=null)a=l;else if(n!=null)a=Da(u,n);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let h=[],p=o.getCompare(),m=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o),v=m.getNext();for(;v&&h.length<i;)p(v,r)!==0&&h.push(v),v=m.getNext();return h}else return[]}function a3(){return{visibleWrites:Nn.empty(),allWrites:[],lastWriteId:-1}}function CE(t,e,n,r){return sP(t.writeTree,t.treePath,e,n,r)}function oP(t,e){return n3(t.writeTree,t.treePath,e)}function dx(t,e,n,r){return r3(t.writeTree,t.treePath,e,n,r)}function Sp(t,e){return s3(t.writeTree,lt(t.treePath,e))}function c3(t,e,n,r,i,s){return o3(t.writeTree,t.treePath,e,n,r,i,s)}function BE(t,e,n){return i3(t.writeTree,t.treePath,e,n)}function aP(t,e){return cP(lt(t.treePath,e),t.writeTree)}function cP(t,e){return{treePath:t,writeTree:e}}var TE=class{constructor(){this.changeMap=new Map}trackChildChange(e){let n=e.type,r=e.childName;F(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),F(r!==".priority","Only non-priority child changes can be tracked.");let i=this.changeMap.get(r);if(i){let s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,ix(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,BW(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,jW(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,ix(r,e.snapshotNode,i.oldSnap));else throw Xi("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}};var DE=class{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}},uP=new DE,$u=class{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){let n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{let r=this.optCompleteServerCache_!=null?new Bu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BE(this.writes_,e,r)}}getChildAfterChild(e,n,r){let i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:As(this.viewCache_),s=c3(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}};function u3(t,e){F(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),F(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function l3(t,e,n,r,i){let s=new TE,o,a;if(n.type===Pr.OVERWRITE){let l=n;l.source.fromUser?o=bE(t,e,l.path,l.snap,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered()&&!me(l.path),o=Ap(t,e,l.path,l.snap,r,i,a,s))}else if(n.type===Pr.MERGE){let l=n;l.source.fromUser?o=h3(t,e,l.path,l.children,r,i,s):(F(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),o=SE(t,e,l.path,l.children,r,i,a,s))}else if(n.type===Pr.ACK_USER_WRITE){let l=n;l.revert?o=m3(t,e,l.path,r,i,s):o=f3(t,e,l.path,l.affectedTree,r,i,s)}else if(n.type===Pr.LISTEN_COMPLETE)o=p3(t,e,n.path,r,s);else throw Xi("Unknown operation type: "+n.type);let u=s.getChanges();return d3(e,o,u),{viewCache:o,changes:u}}function d3(t,e,n){let r=e.eventCache;if(r.isFullyInitialized()){let i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=wE(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(UW(wE(e)))}}function lP(t,e,n,r,i,s){let o=e.eventCache;if(Sp(r,n)!=null)return e;{let a,u;if(me(n))if(F(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){let l=As(e),h=l instanceof Be?l:Be.EMPTY_NODE,p=oP(r,h);a=t.filter.updateFullNode(e.eventCache.getNode(),p,s)}else{let l=CE(r,As(e));a=t.filter.updateFullNode(e.eventCache.getNode(),l,s)}else{let l=_e(n);if(l===".priority"){F(Ci(n)===1,"Can't have a priority with additional path components");let h=o.getNode();u=e.serverCache.getNode();let p=dx(r,n,h,u);p!=null?a=t.filter.updatePriority(h,p):a=o.getNode()}else{let h=Fe(n),p;if(o.isCompleteForChild(l)){u=e.serverCache.getNode();let m=dx(r,n,o.getNode(),u);m!=null?p=o.getNode().getImmediateChild(l).updateChild(h,m):p=o.getNode().getImmediateChild(l)}else p=BE(r,l,e.serverCache);p!=null?a=t.filter.updateChild(o.getNode(),l,p,h,i,s):a=o.getNode()}}return Uu(e,a,o.isFullyInitialized()||me(n),t.filter.filtersNodes())}}function Ap(t,e,n,r,i,s,o,a){let u=e.serverCache,l,h=o?t.filter:t.filter.getIndexedFilter();if(me(n))l=h.updateFullNode(u.getNode(),r,null);else if(h.filtersNodes()&&!u.isFiltered()){let v=u.getNode().updateChild(n,r);l=h.updateFullNode(u.getNode(),v,null)}else{let v=_e(n);if(!u.isCompleteForPath(n)&&Ci(n)>1)return e;let b=Fe(n),R=u.getNode().getImmediateChild(v).updateChild(b,r);v===".priority"?l=h.updatePriority(u.getNode(),R):l=h.updateChild(u.getNode(),v,R,b,uP,null)}let p=tP(e,l,u.isFullyInitialized()||me(n),h.filtersNodes()),m=new $u(i,p,s);return lP(t,p,n,i,m,a)}function bE(t,e,n,r,i,s,o){let a=e.eventCache,u,l,h=new $u(i,e,s);if(me(n))l=t.filter.updateFullNode(e.eventCache.getNode(),r,o),u=Uu(e,l,!0,t.filter.filtersNodes());else{let p=_e(n);if(p===".priority")l=t.filter.updatePriority(e.eventCache.getNode(),r),u=Uu(e,l,a.isFullyInitialized(),a.isFiltered());else{let m=Fe(n),v=a.getNode().getImmediateChild(p),b;if(me(m))b=r;else{let N=h.getCompleteChild(p);N!=null?Bx(m)===".priority"&&N.getChild(qx(m)).isEmpty()?b=N:b=N.updateChild(m,r):b=Be.EMPTY_NODE}if(v.equals(b))u=e;else{let N=t.filter.updateChild(a.getNode(),p,b,m,h,o);u=Uu(e,N,a.isFullyInitialized(),t.filter.filtersNodes())}}}return u}function hx(t,e){return t.eventCache.isCompleteForChild(e)}function h3(t,e,n,r,i,s,o){let a=e;return r.foreach((u,l)=>{let h=lt(n,u);hx(e,_e(h))&&(a=bE(t,a,h,l,i,s,o))}),r.foreach((u,l)=>{let h=lt(n,u);hx(e,_e(h))||(a=bE(t,a,h,l,i,s,o))}),a}function fx(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function SE(t,e,n,r,i,s,o,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let u=e,l;me(n)?l=r:l=new qt(null).setTree(n,r);let h=e.serverCache.getNode();return l.children.inorderTraversal((p,m)=>{if(h.hasChild(p)){let v=e.serverCache.getNode().getImmediateChild(p),b=fx(t,v,m);u=Ap(t,u,new Me(p),b,i,s,o,a)}}),l.children.inorderTraversal((p,m)=>{let v=!e.serverCache.isCompleteForChild(p)&&m.value===null;if(!h.hasChild(p)&&!v){let b=e.serverCache.getNode().getImmediateChild(p),N=fx(t,b,m);u=Ap(t,u,new Me(p),N,i,s,o,a)}}),u}function f3(t,e,n,r,i,s,o){if(Sp(i,n)!=null)return e;let a=e.serverCache.isFiltered(),u=e.serverCache;if(r.value!=null){if(me(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Ap(t,e,n,u.getNode().getChild(n),i,s,a,o);if(me(n)){let l=new qt(null);return u.getNode().forEachChild(_a,(h,p)=>{l=l.set(new Me(h),p)}),SE(t,e,n,l,i,s,a,o)}else return e}else{let l=new qt(null);return r.foreach((h,p)=>{let m=lt(n,h);u.isCompleteForPath(m)&&(l=l.set(h,u.getNode().getChild(m)))}),SE(t,e,n,l,i,s,a,o)}}function p3(t,e,n,r,i){let s=e.serverCache,o=tP(e,s.getNode(),s.isFullyInitialized()||me(n),s.isFiltered());return lP(t,o,n,r,uP,i)}function m3(t,e,n,r,i,s){let o;if(Sp(r,n)!=null)return e;{let a=new $u(r,e,i),u=e.eventCache.getNode(),l;if(me(n)||_e(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=CE(r,As(e));else{let p=e.serverCache.getNode();F(p instanceof Be,"serverChildren would be complete if leaf node"),h=oP(r,p)}h=h,l=t.filter.updateFullNode(u,h,s)}else{let h=_e(n),p=BE(r,h,e.serverCache);p==null&&e.serverCache.isCompleteForChild(h)&&(p=u.getImmediateChild(h)),p!=null?l=t.filter.updateChild(u,h,p,Fe(n),a,s):e.eventCache.getNode().hasChild(h)?l=t.filter.updateChild(u,h,Be.EMPTY_NODE,Fe(n),a,s):l=u,l.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=CE(r,As(e)),o.isLeafNode()&&(l=t.filter.updateFullNode(l,o,s)))}return o=e.serverCache.isFullyInitialized()||Sp(r,Ae())!=null,Uu(e,l,o,t.filter.filtersNodes())}}function g3(t,e){let n=As(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!me(e)&&!n.getImmediateChild(_e(e)).isEmpty())?n.getChild(e):null}function px(t,e,n,r){e.type===Pr.MERGE&&e.source.queryId!==null&&(F(As(t.viewCache_),"We should always have a full cache before handling merges"),F(wE(t.viewCache_),"Missing event cache, even though we have a server cache"));let i=t.viewCache_,s=l3(t.processor_,i,e,n,r);return u3(t.processor_,s.viewCache),F(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,y3(t,s.changes,s.viewCache.eventCache.getNode(),null)}function y3(t,e,n,r){let i=r?[r]:t.eventRegistrations_;return zW(t.eventGenerator_,e,n,i)}var mx;function v3(t){F(!mx,"__referenceConstructor has already been defined"),mx=t}function $E(t,e,n,r){let i=e.source.queryId;if(i!==null){let s=t.views.get(i);return F(s!=null,"SyncTree gave us an op for an invalid query."),px(s,e,n,r)}else{let s=[];for(let o of t.views.values())s=s.concat(px(o,e,n,r));return s}}function qE(t,e){let n=null;for(let r of t.views.values())n=n||g3(r,e);return n}var gx;function _3(t){F(!gx,"__referenceConstructor has already been defined"),gx=t}var Rp=class{constructor(e){this.listenProvider_=e,this.syncPointTree_=new qt(null),this.pendingWriteTree_=a3(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function w3(t,e,n,r,i){return YW(t.pendingWriteTree_,e,n,r,i),i?Mp(t,new Ta(Jx(),e,n)):[]}function ya(t,e,n=!1){let r=JW(t.pendingWriteTree_,e);if(XW(t.pendingWriteTree_,e)){let s=new qt(null);return r.snap!=null?s=s.set(Ae(),!0):pn(r.children,o=>{s=s.set(new Me(o),!0)}),Mp(t,new _E(r.path,s,n))}else return[]}function Np(t,e,n){return Mp(t,new Ta(Xx(),e,n))}function I3(t,e,n){let r=qt.fromObject(n);return Mp(t,new bp(Xx(),e,r))}function E3(t,e,n,r){let i=pP(t,r);if(i!=null){let s=mP(i),o=s.path,a=s.queryId,u=hn(o,e),l=new Ta(Zx(a),u,n);return gP(t,o,l)}else return[]}function C3(t,e,n,r){let i=pP(t,r);if(i){let s=mP(i),o=s.path,a=s.queryId,u=hn(o,e),l=qt.fromObject(n),h=new bp(Zx(a),u,l);return gP(t,o,h)}else return[]}function dP(t,e,n){let i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,a)=>{let u=hn(o,e),l=qE(a,u);if(l)return l});return sP(i,e,s,n,!0)}function Mp(t,e){return hP(e,t.syncPointTree_,null,rP(t.pendingWriteTree_,Ae()))}function hP(t,e,n,r){if(me(t.path))return fP(t,e,n,r);{let i=e.get(Ae());n==null&&i!=null&&(n=qE(i,Ae()));let s=[],o=_e(t.path),a=t.operationForChild(o),u=e.children.get(o);if(u&&a){let l=n?n.getImmediateChild(o):null,h=aP(r,o);s=s.concat(hP(a,u,l,h))}return i&&(s=s.concat($E(i,t,r,n))),s}}function fP(t,e,n,r){let i=e.get(Ae());n==null&&i!=null&&(n=qE(i,Ae()));let s=[];return e.children.inorderTraversal((o,a)=>{let u=n?n.getImmediateChild(o):null,l=aP(r,o),h=t.operationForChild(o);h&&(s=s.concat(fP(h,a,u,l)))}),i&&(s=s.concat($E(i,t,r,n))),s}function pP(t,e){return t.tagToQueryMap.get(e)}function mP(t){let e=t.indexOf("$");return F(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Me(t.substr(0,e))}}function gP(t,e,n){let r=t.syncPointTree_.get(e);F(r,"Missing sync point for query tag that we're tracking");let i=rP(t.pendingWriteTree_,e);return $E(r,n,i,null)}var AE=class t{constructor(e){this.node_=e}getImmediateChild(e){let n=this.node_.getImmediateChild(e);return new t(n)}node(){return this.node_}},RE=class t{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){let n=lt(this.path_,e);return new t(this.syncTree_,n)}node(){return dP(this.syncTree_,this.path_)}},T3=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},yx=function(t,e,n){if(!t||typeof t!="object")return t;if(F(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return D3(t[".sv"],e,n);if(typeof t[".sv"]=="object")return b3(t[".sv"],e);F(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},D3=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:F(!1,"Unexpected server value: "+t)}},b3=function(t,e,n){t.hasOwnProperty("increment")||F(!1,"Unexpected server value: "+JSON.stringify(t,null,2));let r=t.increment;typeof r!="number"&&F(!1,"Unexpected increment value: "+r);let i=e.node();if(F(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;let o=i.getValue();return typeof o!="number"?r:o+r},S3=function(t,e,n,r){return HE(e,new RE(n,t),r)},A3=function(t,e,n){return HE(t,new AE(e),n)};function HE(t,e,n){let r=t.getPriority().val(),i=yx(r,e.getImmediateChild(".priority"),n),s;if(t.isLeafNode()){let o=t,a=yx(o.getValue(),e,n);return a!==o.getValue()||i!==o.getPriority().val()?new Ea(a,Rt(i)):t}else{let o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new Ea(i))),o.forEachChild(Nt,(a,u)=>{let l=HE(u,e.getImmediateChild(a),n);l!==u&&(s=s.updateImmediateChild(a,l))}),s}}var qu=class{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}};function GE(t,e){let n=e instanceof Me?e:new Me(e),r=t,i=_e(n);for(;i!==null;){let s=Zi(r.node.children,i)||{children:{},childCount:0};r=new qu(i,r,s),n=Fe(n),i=_e(n)}return r}function Aa(t){return t.node.value}function yP(t,e){t.node.value=e,NE(t)}function vP(t){return t.node.childCount>0}function R3(t){return Aa(t)===void 0&&!vP(t)}function xp(t,e){pn(t.node.children,(n,r)=>{e(new qu(n,t,r))})}function _P(t,e,n,r){n&&!r&&e(t),xp(t,i=>{_P(i,e,!0,r)}),n&&r&&e(t)}function N3(t,e,n){let r=n?t:t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function Ku(t){return new Me(t.parent===null?t.name:Ku(t.parent)+"/"+t.name)}function NE(t){t.parent!==null&&M3(t.parent,t.name,t)}function M3(t,e,n){let r=R3(n),i=zn(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,NE(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,NE(t))}var x3=/[\[\].#$\/\u0000-\u001F\u007F]/,P3=/[\[\].#$\u0000-\u001F\u007F]/,HI=10*1024*1024,wP=function(t){return typeof t=="string"&&t.length!==0&&!x3.test(t)},O3=function(t){return typeof t=="string"&&t.length!==0&&!P3.test(t)},k3=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),O3(t)};var IP=function(t,e,n){let r=n instanceof Me?new iE(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Ts(r));if(typeof e=="function")throw new Error(t+"contains a function "+Ts(r)+" with contents = "+e.toString());if(Cx(e))throw new Error(t+"contains "+e.toString()+" "+Ts(r));if(typeof e=="string"&&e.length>HI/3&&Xc(e)>HI)throw new Error(t+"contains a string greater than "+HI+" utf8 bytes "+Ts(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(pn(e,(o,a)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!wP(o)))throw new Error(t+" contains an invalid key ("+o+") "+Ts(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bW(r,o),IP(t,a,r),SW(r)}),i&&s)throw new Error(t+' contains ".value" child '+Ts(r)+" in addition to actual children.")}};var F3=function(t,e){let n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!wP(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!k3(n))throw new Error(CA(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var ME=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function L3(t,e){let n=null;for(let r=0;r<e.length;r++){let i=e[r],s=i.getPath();n!==null&&!Hx(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function Ns(t,e,n){L3(t,n),V3(t,r=>Rn(r,e)||Rn(e,r))}function V3(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){let i=t.eventLists_[r];if(i){let s=i.path;e(s)?(U3(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function U3(t){for(let e=0;e<t.events.length;e++){let n=t.events[e];if(n!==null){t.events[e]=null;let r=n.getEventRunner();bs&&At("event: "+n.toString()),zu(r)}}}var j3="repo_interrupt",B3=25,xE=class{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ME,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Dp(),this.transactionQueueTree_=new qu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function $3(t,e,n){if(t.stats_=VE(t.repoInfo_),t.forceRestClient_||tW())t.server_=new pE(t.repoInfo_,(r,i,s,o)=>{vx(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>_x(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{at(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new UE(t.repoInfo_,e,(r,i,s,o)=>{vx(t,r,i,s,o)},r=>{_x(t,r)},r=>{H3(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=rW(t.repoInfo_,()=>new vE(t.stats_,t.server_)),t.infoData_=new mE,t.infoSyncTree_=new Rp({startListening:(r,i,s,o)=>{let a=[],u=t.infoData_.getNode(r._path);return u.isEmpty()||(a=Np(t.infoSyncTree_,r._path,u),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),zE(t,"connected",!1),t.serverSyncTree_=new Rp({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(a,u)=>{let l=o(a,u);Ns(t.eventQueue_,r._path,l)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function q3(t){let n=t.infoData_.getNode(new Me(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function EP(t){return T3({timestamp:q3(t)})}function vx(t,e,n,r,i){t.dataUpdateCount++;let s=new Me(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){let u=Jc(n,l=>Rt(l));o=C3(t.serverSyncTree_,s,u,i)}else{let u=Rt(n);o=E3(t.serverSyncTree_,s,u,i)}else if(r){let u=Jc(n,l=>Rt(l));o=I3(t.serverSyncTree_,s,u)}else{let u=Rt(n);o=Np(t.serverSyncTree_,s,u)}let a=s;o.length>0&&(a=KE(t,s)),Ns(t.eventQueue_,a,o)}function _x(t,e){zE(t,"connected",e),e===!1&&z3(t)}function H3(t,e){pn(e,(n,r)=>{zE(t,n,r)})}function zE(t,e,n){let r=new Me("/.info/"+e),i=Rt(n);t.infoData_.updateSnapshot(r,i);let s=Np(t.infoSyncTree_,r,i);Ns(t.eventQueue_,r,s)}function G3(t){return t.nextWriteId_++}function z3(t){CP(t,"onDisconnectEvents");let e=EP(t),n=Dp();gE(t.onDisconnect_,Ae(),(i,s)=>{let o=S3(i,s,t.serverSyncTree_,e);Yx(n,i,o)});let r=[];gE(n,Ae(),(i,s)=>{r=r.concat(Np(t.serverSyncTree_,i,s));let o=Y3(t,i);KE(t,o)}),t.onDisconnect_=Dp(),Ns(t.eventQueue_,Ae(),r)}function W3(t){t.persistentConnection_&&t.persistentConnection_.interrupt(j3)}function CP(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),At(n,...e)}function TP(t,e,n){return dP(t.serverSyncTree_,e,n)||Be.EMPTY_NODE}function WE(t,e=t.transactionQueueTree_){if(e||Pp(t,e),Aa(e)){let n=bP(t,e);F(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&K3(t,Ku(e),n)}else vP(e)&&xp(e,n=>{WE(t,n)})}function K3(t,e,n){let r=n.map(l=>l.currentWriteId),i=TP(t,e,r),s=i,o=i.hash();for(let l=0;l<n.length;l++){let h=n[l];F(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;let p=hn(e,h.path);s=s.updateChild(p,h.currentOutputSnapshotRaw)}let a=s.val(!0),u=e;t.server_.put(u.toString(),a,l=>{CP(t,"transaction put response",{path:u.toString(),status:l});let h=[];if(l==="ok"){let p=[];for(let m=0;m<n.length;m++)n[m].status=2,h=h.concat(ya(t.serverSyncTree_,n[m].currentWriteId)),n[m].onComplete&&p.push(()=>n[m].onComplete(null,!0,n[m].currentOutputSnapshotResolved)),n[m].unwatcher();Pp(t,GE(t.transactionQueueTree_,e)),WE(t,t.transactionQueueTree_),Ns(t.eventQueue_,e,h);for(let m=0;m<p.length;m++)zu(p[m])}else{if(l==="datastale")for(let p=0;p<n.length;p++)n[p].status===3?n[p].status=4:n[p].status=0;else{tn("transaction at "+u.toString()+" failed: "+l);for(let p=0;p<n.length;p++)n[p].status=4,n[p].abortReason=l}KE(t,e)}},o)}function KE(t,e){let n=DP(t,e),r=Ku(n),i=bP(t,n);return Q3(t,i,r),r}function Q3(t,e,n){if(e.length===0)return;let r=[],i=[],o=e.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<e.length;a++){let u=e[a],l=hn(n,u.path),h=!1,p;if(F(l!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),u.status===4)h=!0,p=u.abortReason,i=i.concat(ya(t.serverSyncTree_,u.currentWriteId,!0));else if(u.status===0)if(u.retryCount>=B3)h=!0,p="maxretry",i=i.concat(ya(t.serverSyncTree_,u.currentWriteId,!0));else{let m=TP(t,u.path,o);u.currentInputSnapshot=m;let v=e[a].update(m.val());if(v!==void 0){IP("transaction failed: Data returned ",v,u.path);let b=Rt(v);typeof v=="object"&&v!=null&&zn(v,".priority")||(b=b.updatePriority(m.getPriority()));let R=u.currentWriteId,P=EP(t),q=A3(b,m,P);u.currentOutputSnapshotRaw=b,u.currentOutputSnapshotResolved=q,u.currentWriteId=G3(t),o.splice(o.indexOf(R),1),i=i.concat(w3(t.serverSyncTree_,u.path,q,u.currentWriteId,u.applyLocally)),i=i.concat(ya(t.serverSyncTree_,R,!0))}else h=!0,p="nodata",i=i.concat(ya(t.serverSyncTree_,u.currentWriteId,!0))}Ns(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,function(m){setTimeout(m,Math.floor(0))}(e[a].unwatcher),e[a].onComplete&&(p==="nodata"?r.push(()=>e[a].onComplete(null,!1,e[a].currentInputSnapshot)):r.push(()=>e[a].onComplete(new Error(p),!1,null))))}Pp(t,t.transactionQueueTree_);for(let a=0;a<r.length;a++)zu(r[a]);WE(t,t.transactionQueueTree_)}function DP(t,e){let n,r=t.transactionQueueTree_;for(n=_e(e);n!==null&&Aa(r)===void 0;)r=GE(r,n),e=Fe(e),n=_e(e);return r}function bP(t,e){let n=[];return SP(t,e,n),n.sort((r,i)=>r.order-i.order),n}function SP(t,e,n){let r=Aa(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);xp(e,i=>{SP(t,i,n)})}function Pp(t,e){let n=Aa(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,yP(e,n.length>0?n:void 0)}xp(e,r=>{Pp(t,r)})}function Y3(t,e){let n=Ku(DP(t,e)),r=GE(t.transactionQueueTree_,e);return N3(r,i=>{GI(t,i)}),GI(t,r),_P(r,i=>{GI(t,i)}),n}function GI(t,e){let n=Aa(e);if(n){let r=[],i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(F(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(F(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(ya(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?yP(e,void 0):n.length=s+1,Ns(t.eventQueue_,Ku(e),i);for(let o=0;o<r.length;o++)zu(r[o])}}function J3(t){let e="",n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function X3(t){let e={};t.charAt(0)==="?"&&(t=t.substring(1));for(let n of t.split("&")){if(n.length===0)continue;let r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):tn(`Invalid query segment '${n}' in query '${t}'`)}return e}var wx=function(t,e){let n=Z3(t),r=n.namespace;n.domain==="firebase.com"&&Or(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&Or("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||W4();let i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new vp(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new Me(n.pathString)}},Z3=function(t){let e="",n="",r="",i="",s="",o=!0,a="https",u=443;if(typeof t=="string"){let l=t.indexOf("//");l>=0&&(a=t.substring(0,l-1),t=t.substring(l+2));let h=t.indexOf("/");h===-1&&(h=t.length);let p=t.indexOf("?");p===-1&&(p=t.length),e=t.substring(0,Math.min(h,p)),h<p&&(i=J3(t.substring(h,p)));let m=X3(t.substring(Math.min(t.length,p)));l=e.indexOf(":"),l>=0?(o=a==="https"||a==="wss",u=parseInt(e.substring(l+1),10)):l=e.length;let v=e.slice(0,l);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{let b=e.indexOf(".");r=e.substring(0,b).toLowerCase(),n=e.substring(b+1),s=r}"ns"in m&&(s=m.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};var PE=class t{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return me(this._path)?null:Bx(this._path)}get ref(){return new ba(this._repo,this._path)}get _queryIdentifier(){let e=ox(this._queryParams),n=LE(e);return n==="{}"?"default":n}get _queryObject(){return ox(this._queryParams)}isEqual(e){if(e=ct(e),!(e instanceof t))return!1;let n=this._repo===e._repo,r=Hx(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+DW(this._path)}};var ba=class t extends PE{constructor(e,n){super(e,n,new fE,!1)}get parent(){let e=qx(this._path);return e===null?null:new t(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}};v3(ba);_3(ba);var e9="FIREBASE_DATABASE_EMULATOR_HOST",OE={},t9=!1;function n9(t,e,n,r){t.repoInfo_=new vp(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function r9(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||Or("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),At("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=wx(s,i),a=o.repoInfo,u,l;typeof process<"u"&&process.env&&(l=process.env[e9]),l?(u=!0,s=`http://${l}?ns=${a.namespace}`,o=wx(s,i),a=o.repoInfo):u=!o.repoInfo.secure;let h=i&&u?new Vu(Vu.OWNER):new JI(t.name,t.options,e);F3("Invalid Firebase Database URL",o),me(o.path)||Or("Database URL must point to the root of a Firebase Database (not including a child path).");let p=s9(a,t,h,new YI(t.name,n));return new kE(p,t)}function i9(t,e){let n=OE[e];(!n||n[t.key]!==t)&&Or(`Database ${e}(${t.repoInfo_}) has already been deleted.`),W3(t),delete n[t.key]}function s9(t,e,n,r){let i=OE[e.name];i||(i={},OE[e.name]=i);let s=i[t.toURLString()];return s&&Or("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new xE(t,t9,n,r),i[t.toURLString()]=s,s}var kE=class{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||($3(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ba(this._repo,Ae())),this._rootInternal}_delete(){return this._rootInternal!==null&&(i9(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Or("Cannot call "+e+" on a deleted database.")}};function AP(t=li(),e){let n=is(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){let r=Kh("database");r&&RP(n,...r)}return n}function RP(t,e,n,r={}){t=ct(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Or("Cannot call useEmulator() after instance has already been initialized.");let i=t._repoInternal,s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Or('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vu(Vu.OWNER);else if(r.mockUserToken){let o=typeof r.mockUserToken=="string"?r.mockUserToken:Qh(r.mockUserToken,t.app.options.projectId);s=new Vu(o)}n9(i,e,n,s)}function o9(t){H4(Jn),Qn(new $t("database",(e,{instanceIdentifier:n})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return r9(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),Ue($M,qM,t),Ue($M,qM,"esm2017")}UE.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};UE.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};o9();var Qu=class{constructor(e){return e}},NP="database",QE=class{constructor(){return os(NP)}};var YE=new B("angularfire2.database-instances");function a9(t,e){let n=Bo(NP,t,e);return n&&new Qu(n)}function c9(t){return(e,n)=>{let r=e.runOutsideAngular(()=>t(n));return new Qu(r)}}var u9={provide:QE,deps:[[new We,YE]]},l9={provide:Qu,useFactory:a9,deps:[[new We,YE],Tn]};function MP(t,...e){return Ue("angularfire",Cr.full,"rtdb"),jt([l9,u9,{provide:YE,useFactory:c9(t),multi:!0,deps:[ye,pt,hi,Tr,[new We,hs],[new We,di],...e]}])}var xP=ln(AP,!0);var PP={providers:[AS(BM),UA(()=>jA({projectId:"parcialjs",appId:"1:15189415614:web:1331423ebfb0722777b0ef",storageBucket:"parcialjs.appspot.com",apiKey:"AIzaSyCVB_2gFQIG6UGoZL5OLTBvlU_sJ-hhMfk",authDomain:"parcialjs.firebaseapp.com",messagingSenderId:"15189415614"})),kR(()=>FR()),NM(()=>PM()),MP(()=>xP()),x0()]};var OP=(()=>{let e=class e{constructor(){this.title="parcial-julian-schmidt"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=Ze({type:e,selectors:[["app-root"]],standalone:!0,features:[et],decls:1,vars:0,template:function(i,s){i&1&&Ve(0,"router-outlet")},dependencies:[cv]});let t=e;return t})();j0(OP,PP).catch(t=>console.error(t));
